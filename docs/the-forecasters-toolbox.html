<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 The forecaster’s toolbox | Forecasting: Principles and Practice (3rd ed)</title>
  <meta name="description" content="Chapter 5 The forecaster’s toolbox | Forecasting: Principles and Practice (3rd ed)" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 The forecaster’s toolbox | Forecasting: Principles and Practice (3rd ed)" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="https://github.com/daluchkin/fpp3_notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 The forecaster’s toolbox | Forecasting: Principles and Practice (3rd ed)" />
  
  
  

<meta name="author" content="Dmitry Luchkin" />


<meta name="date" content="2024-12-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="time-series-features.html"/>
<link rel="next" href="judgmental-forecasts.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://otexts.com/fpp3/">Forecasting: Principles and Practice (3rd ed)</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#what-can-be-forecast"><i class="fa fa-check"></i><b>1.1</b> What can be forecast?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#forecasting-goals-and-planning"><i class="fa fa-check"></i><b>1.2</b> Forecasting, goals and planning</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#determining-what-to-forecast"><i class="fa fa-check"></i><b>1.3</b> Determining what to forecast</a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#forecasting-data-and-methods"><i class="fa fa-check"></i><b>1.4</b> Forecasting data and methods</a></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#some-case-studies"><i class="fa fa-check"></i><b>1.5</b> Some case studies</a></li>
<li class="chapter" data-level="1.6" data-path="getting-started.html"><a href="getting-started.html#the-basic-steps-in-a-forecasting-task"><i class="fa fa-check"></i><b>1.6</b> The basic steps in a forecasting task</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="getting-started.html"><a href="getting-started.html#summary-five-basic-steps-of-forecasting"><i class="fa fa-check"></i><b>1.6.1</b> Summary: Five Basic Steps of Forecasting</a></li>
<li class="chapter" data-level="1.6.2" data-path="getting-started.html"><a href="getting-started.html#summary-five-basic-steps-of-forecasting-1"><i class="fa fa-check"></i><b>1.6.2</b> Summary: Five Basic Steps of Forecasting</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="getting-started.html"><a href="getting-started.html#the-statistical-forecasting-perspective"><i class="fa fa-check"></i><b>1.7</b> The statistical forecasting perspective</a></li>
<li class="chapter" data-level="1.8" data-path="getting-started.html"><a href="getting-started.html#excercises"><i class="fa fa-check"></i><b>1.8</b> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="time-series-graphics.html"><a href="time-series-graphics.html"><i class="fa fa-check"></i><b>2</b> Time series graphics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#tsibble-object"><i class="fa fa-check"></i><b>2.1</b> <code>tsibble</code> object</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#the-index-variable"><i class="fa fa-check"></i><b>2.1.1</b> The index variable</a></li>
<li class="chapter" data-level="2.1.2" data-path="time-series-graphics.html"><a href="time-series-graphics.html#the-key-variable"><i class="fa fa-check"></i><b>2.1.2</b> The key variable</a></li>
<li class="chapter" data-level="2.1.3" data-path="time-series-graphics.html"><a href="time-series-graphics.html#working-with-tsibble-object"><i class="fa fa-check"></i><b>2.1.3</b> Working with <code>tsibble</code> object</a></li>
<li class="chapter" data-level="2.1.4" data-path="time-series-graphics.html"><a href="time-series-graphics.html#read-a-csv-file-and-convert-to-a-tsibble"><i class="fa fa-check"></i><b>2.1.4</b> Read a csv file and convert to a tsibble</a></li>
<li class="chapter" data-level="2.1.5" data-path="time-series-graphics.html"><a href="time-series-graphics.html#the-seasonal-period"><i class="fa fa-check"></i><b>2.1.5</b> The seasonal period</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="time-series-graphics.html"><a href="time-series-graphics.html#time-plot"><i class="fa fa-check"></i><b>2.2</b> Time plot</a></li>
<li class="chapter" data-level="2.3" data-path="time-series-graphics.html"><a href="time-series-graphics.html#time-series-patterns"><i class="fa fa-check"></i><b>2.3</b> Time series patterns</a></li>
<li class="chapter" data-level="2.4" data-path="time-series-graphics.html"><a href="time-series-graphics.html#seasonal-plots"><i class="fa fa-check"></i><b>2.4</b> Seasonal plots</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#multiple-seasonal-periods"><i class="fa fa-check"></i><b>2.4.1</b> Multiple seasonal periods</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="time-series-graphics.html"><a href="time-series-graphics.html#seasonal-subseries-plots"><i class="fa fa-check"></i><b>2.5</b> Seasonal subseries plots</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#example-australian-holiday-tourism"><i class="fa fa-check"></i><b>2.5.1</b> Example: Australian holiday tourism</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="time-series-graphics.html"><a href="time-series-graphics.html#scatterplots"><i class="fa fa-check"></i><b>2.6</b> Scatterplots</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#correlation"><i class="fa fa-check"></i><b>2.6.1</b> Correlation</a></li>
<li class="chapter" data-level="2.6.2" data-path="time-series-graphics.html"><a href="time-series-graphics.html#scatterplot-matrices"><i class="fa fa-check"></i><b>2.6.2</b> Scatterplot matrices</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="time-series-graphics.html"><a href="time-series-graphics.html#lag-plots"><i class="fa fa-check"></i><b>2.7</b> Lag plots</a></li>
<li class="chapter" data-level="2.8" data-path="time-series-graphics.html"><a href="time-series-graphics.html#autocorrelation"><i class="fa fa-check"></i><b>2.8</b> Autocorrelation</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#trend-and-seasonality-in-acf-plots"><i class="fa fa-check"></i><b>2.8.1</b> Trend and seasonality in ACF plots</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="time-series-graphics.html"><a href="time-series-graphics.html#white-moise"><i class="fa fa-check"></i><b>2.9</b> White moise</a></li>
<li class="chapter" data-level="2.10" data-path="time-series-graphics.html"><a href="time-series-graphics.html#excercises-1"><i class="fa fa-check"></i><b>2.10</b> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html"><i class="fa fa-check"></i><b>3</b> Time series decomposition</a>
<ul>
<li class="chapter" data-level="3.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#transformations-and-adjustments"><i class="fa fa-check"></i><b>3.1</b> Transformations and adjustments</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#calendar-adjustments"><i class="fa fa-check"></i><b>3.1.1</b> Calendar adjustments</a></li>
<li class="chapter" data-level="3.1.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#population-adjustments"><i class="fa fa-check"></i><b>3.1.2</b> Population adjustments</a></li>
<li class="chapter" data-level="3.1.3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#inflation-adjustments"><i class="fa fa-check"></i><b>3.1.3</b> Inflation adjustments</a></li>
<li class="chapter" data-level="3.1.4" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#mathematical-transformations"><i class="fa fa-check"></i><b>3.1.4</b> Mathematical transformations</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#time-series-components"><i class="fa fa-check"></i><b>3.2</b> Time series components</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#seasonally-adjusted-data"><i class="fa fa-check"></i><b>3.2.1</b> Seasonally adjusted data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#moving-averages"><i class="fa fa-check"></i><b>3.3</b> Moving averages</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#moving-average-smoothing"><i class="fa fa-check"></i><b>3.3.1</b> Moving average smoothing</a></li>
<li class="chapter" data-level="3.3.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#moving-averages-of-moving-averages"><i class="fa fa-check"></i><b>3.3.2</b> Moving averages of moving averages</a></li>
<li class="chapter" data-level="3.3.3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#estimating-the-trend-cycle-with-seasonal-data"><i class="fa fa-check"></i><b>3.3.3</b> Estimating the trend-cycle with seasonal data</a></li>
<li class="chapter" data-level="3.3.4" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#example-employment-in-the-us-retail-sector"><i class="fa fa-check"></i><b>3.3.4</b> Example: Employment in the US retail sector</a></li>
<li class="chapter" data-level="3.3.5" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#weighted-moving-averages"><i class="fa fa-check"></i><b>3.3.5</b> Weighted moving averages</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#classical-decomposition"><i class="fa fa-check"></i><b>3.4</b> Classical decomposition</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#additive-decomposition"><i class="fa fa-check"></i><b>3.4.1</b> Additive decomposition</a></li>
<li class="chapter" data-level="3.4.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#multiplicative-decomposition"><i class="fa fa-check"></i><b>3.4.2</b> Multiplicative decomposition</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#excercises-2"><i class="fa fa-check"></i><b>3.5</b> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="time-series-features.html"><a href="time-series-features.html"><i class="fa fa-check"></i><b>4</b> Time series features</a>
<ul>
<li class="chapter" data-level="4.1" data-path="time-series-features.html"><a href="time-series-features.html#some-simple-statistics"><i class="fa fa-check"></i><b>4.1</b> Some simple statistics</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="time-series-features.html"><a href="time-series-features.html#acf-features"><i class="fa fa-check"></i><b>4.1.1</b> ACF features</a></li>
<li class="chapter" data-level="4.1.2" data-path="time-series-features.html"><a href="time-series-features.html#stl-features"><i class="fa fa-check"></i><b>4.1.2</b> STL features</a></li>
<li class="chapter" data-level="4.1.3" data-path="time-series-features.html"><a href="time-series-features.html#other-features"><i class="fa fa-check"></i><b>4.1.3</b> Other features</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="time-series-features.html"><a href="time-series-features.html#exploring-australian-tourism-data"><i class="fa fa-check"></i><b>4.2</b> Exploring Australian tourism data</a></li>
<li class="chapter" data-level="4.3" data-path="time-series-features.html"><a href="time-series-features.html#exercises"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html"><i class="fa fa-check"></i><b>5</b> The forecaster’s toolbox</a>
<ul>
<li class="chapter" data-level="5.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#a-tidy-forecasting-workflow"><i class="fa fa-check"></i><b>5.1</b> A tidy forecasting workflow</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#data-preparation-tidy"><i class="fa fa-check"></i><b>5.1.1</b> Data preparation (tidy)</a></li>
<li class="chapter" data-level="5.1.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#plot-the-data-visualise"><i class="fa fa-check"></i><b>5.1.2</b> Plot the data (visualise)</a></li>
<li class="chapter" data-level="5.1.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#define-a-model-specify"><i class="fa fa-check"></i><b>5.1.3</b> Define a model (specify)</a></li>
<li class="chapter" data-level="5.1.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#train-the-model-estimate"><i class="fa fa-check"></i><b>5.1.4</b> Train the model (estimate)</a></li>
<li class="chapter" data-level="5.1.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#check-model-performance-evaluate"><i class="fa fa-check"></i><b>5.1.5</b> Check model performance (evaluate)</a></li>
<li class="chapter" data-level="5.1.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#produce-forecasts-forecast"><i class="fa fa-check"></i><b>5.1.6</b> Produce forecasts (forecast)</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#some-simple-forecasting-methods"><i class="fa fa-check"></i><b>5.2</b> Some simple forecasting methods</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#mean-method"><i class="fa fa-check"></i><b>5.2.1</b> Mean method</a></li>
<li class="chapter" data-level="5.2.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#naiïve-method"><i class="fa fa-check"></i><b>5.2.2</b> Naiïve method</a></li>
<li class="chapter" data-level="5.2.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#seasonal-naïve-method"><i class="fa fa-check"></i><b>5.2.3</b> Seasonal naïve method</a></li>
<li class="chapter" data-level="5.2.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#drift-method"><i class="fa fa-check"></i><b>5.2.4</b> Drift method</a></li>
<li class="chapter" data-level="5.2.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#model-fitting"><i class="fa fa-check"></i><b>5.2.5</b> Model fitting</a></li>
<li class="chapter" data-level="5.2.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#producing-forecasts"><i class="fa fa-check"></i><b>5.2.6</b> Producing forecasts</a></li>
<li class="chapter" data-level="5.2.7" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#visualising-forecasts"><i class="fa fa-check"></i><b>5.2.7</b> Visualising forecasts</a></li>
<li class="chapter" data-level="5.2.8" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-facebook-closing-stock-price"><i class="fa fa-check"></i><b>5.2.8</b> Example: Facebook closing stock price</a></li>
<li class="chapter" data-level="5.2.9" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-australian-quarterly-beer-production"><i class="fa fa-check"></i><b>5.2.9</b> Example: Australian quarterly beer production</a></li>
<li class="chapter" data-level="5.2.10" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-googles-daily-closing-stock-price"><i class="fa fa-check"></i><b>5.2.10</b> Example: Google’s daily closing stock price</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#fitted-values-and-residuals"><i class="fa fa-check"></i><b>5.3</b> Fitted values and residuals</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#fitted-values"><i class="fa fa-check"></i><b>5.3.1</b> Fitted values</a></li>
<li class="chapter" data-level="5.3.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#residuals"><i class="fa fa-check"></i><b>5.3.2</b> Residuals</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#residual-diagnostics"><i class="fa fa-check"></i><b>5.4</b> Residual diagnostics</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#acf-of-residuals"><i class="fa fa-check"></i><b>5.4.1</b> ACF of residuals</a></li>
<li class="chapter" data-level="5.4.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-forecasting-google-daily-closing-stock-prices"><i class="fa fa-check"></i><b>5.4.2</b> Example: Forecasting Google daily closing stock prices</a></li>
<li class="chapter" data-level="5.4.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#portmanteau-tests-for-autocorrelation"><i class="fa fa-check"></i><b>5.4.3</b> Portmanteau tests for autocorrelation</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#distributional-forecasts-and-prediction-intervals"><i class="fa fa-check"></i><b>5.5</b> Distributional forecasts and prediction intervals</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecast-distributions"><i class="fa fa-check"></i><b>5.5.1</b> Forecast distributions</a></li>
<li class="chapter" data-level="5.5.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#prediction-intervals"><i class="fa fa-check"></i><b>5.5.2</b> Prediction intervals</a></li>
<li class="chapter" data-level="5.5.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#one-step-prediction-intervals"><i class="fa fa-check"></i><b>5.5.3</b> One-step prediction intervals</a></li>
<li class="chapter" data-level="5.5.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#multi-step-prediction-intervals"><i class="fa fa-check"></i><b>5.5.4</b> Multi-step prediction intervals</a></li>
<li class="chapter" data-level="5.5.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#benchmark-methods"><i class="fa fa-check"></i><b>5.5.5</b> Benchmark methods</a></li>
<li class="chapter" data-level="5.5.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#prediction-intervals-from-bootstrapped-residuals"><i class="fa fa-check"></i><b>5.5.6</b> Prediction intervals from bootstrapped residuals</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecasting-using-transformations"><i class="fa fa-check"></i><b>5.6</b> Forecasting using transformations</a></li>
<li class="chapter" data-level="5.7" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecasting-with-decomposition"><i class="fa fa-check"></i><b>5.7</b> Forecasting with decomposition</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-employment-in-the-us-retail-sector-1"><i class="fa fa-check"></i><b>5.7.1</b> Example: Employment in the US retail sector</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#evaluating-point-forecast-accuracy"><i class="fa fa-check"></i><b>5.8</b> Evaluating point forecast accuracy</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#training-and-test-sets"><i class="fa fa-check"></i><b>5.8.1</b> Training and test sets</a></li>
<li class="chapter" data-level="5.8.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#functions-to-subset-a-time-series"><i class="fa fa-check"></i><b>5.8.2</b> Functions to subset a time series</a></li>
<li class="chapter" data-level="5.8.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecast-errors"><i class="fa fa-check"></i><b>5.8.3</b> Forecast errors</a></li>
<li class="chapter" data-level="5.8.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#scale-dependent-errors"><i class="fa fa-check"></i><b>5.8.4</b> Scale-dependent errors</a></li>
<li class="chapter" data-level="5.8.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#percentage-errors"><i class="fa fa-check"></i><b>5.8.5</b> Percentage errors</a></li>
<li class="chapter" data-level="5.8.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#scaled-errors"><i class="fa fa-check"></i><b>5.8.6</b> Scaled errors</a></li>
<li class="chapter" data-level="5.8.7" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#examples"><i class="fa fa-check"></i><b>5.8.7</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#evaluating-distributional-forecast-accuracy"><i class="fa fa-check"></i><b>5.9</b> Evaluating distributional forecast accuracy</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#quantile-scores"><i class="fa fa-check"></i><b>5.9.1</b> Quantile scores</a></li>
<li class="chapter" data-level="5.9.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#winkler-score"><i class="fa fa-check"></i><b>5.9.2</b> Winkler Score</a></li>
<li class="chapter" data-level="5.9.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#continuous-ranked-probability-score"><i class="fa fa-check"></i><b>5.9.3</b> Continuous Ranked Probability Score</a></li>
<li class="chapter" data-level="5.9.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#scale-free-comparisons-using-skill-scores"><i class="fa fa-check"></i><b>5.9.4</b> Scale-free comparisons using skill scores</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#time-series-cross-validation"><i class="fa fa-check"></i><b>5.10</b> Time series cross-validation</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-forecast-horizon-accuracy-with-cross-validation"><i class="fa fa-check"></i><b>5.10.1</b> Example: Forecast horizon accuracy with cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#exercises-1"><i class="fa fa-check"></i><b>5.11</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html"><i class="fa fa-check"></i><b>6</b> Judgmental forecasts</a>
<ul>
<li class="chapter" data-level="6.1" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#beware-of-limitations"><i class="fa fa-check"></i><b>6.1</b> Beware of limitations</a></li>
<li class="chapter" data-level="6.2" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#key-principles"><i class="fa fa-check"></i><b>6.2</b> Key principles</a></li>
<li class="chapter" data-level="6.3" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#the-delphi-method"><i class="fa fa-check"></i><b>6.3</b> The Delphi method</a></li>
<li class="chapter" data-level="6.4" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#forecasting-by-analogy"><i class="fa fa-check"></i><b>6.4</b> Forecasting by analogy</a></li>
<li class="chapter" data-level="6.5" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#scenario-forecasting"><i class="fa fa-check"></i><b>6.5</b> Scenario forecasting</a></li>
<li class="chapter" data-level="6.6" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#new-product-forecasting"><i class="fa fa-check"></i><b>6.6</b> New product forecasting</a></li>
<li class="chapter" data-level="6.7" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#judgmental-adjustments"><i class="fa fa-check"></i><b>6.7</b> Judgmental adjustments</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html"><i class="fa fa-check"></i><b>7</b> Time series regression models</a>
<ul>
<li class="chapter" data-level="7.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#the-linear-model"><i class="fa fa-check"></i><b>7.1</b> The linear model</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#simple-linear-regression"><i class="fa fa-check"></i><b>7.1.1</b> Simple linear regression</a></li>
<li class="chapter" data-level="7.1.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#multiple-linear-regression"><i class="fa fa-check"></i><b>7.1.2</b> Multiple linear regression</a></li>
<li class="chapter" data-level="7.1.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#assumptions"><i class="fa fa-check"></i><b>7.1.3</b> Assumptions</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#least-squares-estimation"><i class="fa fa-check"></i><b>7.2</b> Least squares estimation</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#fitted-values-1"><i class="fa fa-check"></i><b>7.2.1</b> Fitted values</a></li>
<li class="chapter" data-level="7.2.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#goodness-of-fit"><i class="fa fa-check"></i><b>7.2.2</b> Goodness-of-fit</a></li>
<li class="chapter" data-level="7.2.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#standard-error-of-the-regression"><i class="fa fa-check"></i><b>7.2.3</b> Standard error of the regression</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#evaluating-the-regression-model"><i class="fa fa-check"></i><b>7.3</b> Evaluating the regression model</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#acf-plot-of-residuals"><i class="fa fa-check"></i><b>7.3.1</b> ACF plot of residuals</a></li>
<li class="chapter" data-level="7.3.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#histogram-of-residuals"><i class="fa fa-check"></i><b>7.3.2</b> Histogram of residuals</a></li>
<li class="chapter" data-level="7.3.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#residual-plots-against-predictors"><i class="fa fa-check"></i><b>7.3.3</b> Residual plots against predictors</a></li>
<li class="chapter" data-level="7.3.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#residual-plots-against-fitted-values"><i class="fa fa-check"></i><b>7.3.4</b> Residual plots against fitted values</a></li>
<li class="chapter" data-level="7.3.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#outliers-and-influential-observations"><i class="fa fa-check"></i><b>7.3.5</b> Outliers and influential observations</a></li>
<li class="chapter" data-level="7.3.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#spurious-regression"><i class="fa fa-check"></i><b>7.3.6</b> Spurious regression</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#some-useful-predictors"><i class="fa fa-check"></i><b>7.4</b> Some useful predictors</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#trend"><i class="fa fa-check"></i><b>7.4.1</b> Trend</a></li>
<li class="chapter" data-level="7.4.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#dummy-variables"><i class="fa fa-check"></i><b>7.4.2</b> Dummy variables</a></li>
<li class="chapter" data-level="7.4.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#seasonal-dummy-variables"><i class="fa fa-check"></i><b>7.4.3</b> Seasonal dummy variables</a></li>
<li class="chapter" data-level="7.4.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#intervention-variables"><i class="fa fa-check"></i><b>7.4.4</b> Intervention variables</a></li>
<li class="chapter" data-level="7.4.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#trading-days"><i class="fa fa-check"></i><b>7.4.5</b> Trading days</a></li>
<li class="chapter" data-level="7.4.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#distributed-lags"><i class="fa fa-check"></i><b>7.4.6</b> Distributed lags</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#selecting-predictors"><i class="fa fa-check"></i><b>7.5</b> Selecting predictors</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#adjusted-r2"><i class="fa fa-check"></i><b>7.5.1</b> Adjusted <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="7.5.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#cross-validation"><i class="fa fa-check"></i><b>7.5.2</b> Cross-validation</a></li>
<li class="chapter" data-level="7.5.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#akaikes-information-criterion"><i class="fa fa-check"></i><b>7.5.3</b> Akaike’s Information Criterion</a></li>
<li class="chapter" data-level="7.5.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#corrected-akaikes-information-criterion"><i class="fa fa-check"></i><b>7.5.4</b> Corrected Akaike’s Information Criterion</a></li>
<li class="chapter" data-level="7.5.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#schwarzs-bayesian-information-criterion"><i class="fa fa-check"></i><b>7.5.5</b> Schwarz’s Bayesian Information Criterion</a></li>
<li class="chapter" data-level="7.5.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#stepwise-regression"><i class="fa fa-check"></i><b>7.5.6</b> Stepwise regression</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#forecasting-with-regression"><i class="fa fa-check"></i><b>7.6</b> Forecasting with regression</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#scenario-based-forecasting"><i class="fa fa-check"></i><b>7.6.1</b> Scenario based forecasting</a></li>
<li class="chapter" data-level="7.6.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#prediction-intervals-1"><i class="fa fa-check"></i><b>7.6.2</b> Prediction intervals</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#nonlinear-regression"><i class="fa fa-check"></i><b>7.7</b> Nonlinear regression</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#forecasting-with-a-nonlinear-trend"><i class="fa fa-check"></i><b>7.7.1</b> Forecasting with a nonlinear trend</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#correlation-causation-and-forecasting"><i class="fa fa-check"></i><b>7.8</b> Correlation, causation and forecasting</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#correlation-is-not-causation"><i class="fa fa-check"></i><b>7.8.1</b> Correlation is not causation</a></li>
<li class="chapter" data-level="7.8.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#forecasting-with-correlated-predictors"><i class="fa fa-check"></i><b>7.8.2</b> Forecasting with correlated predictors</a></li>
<li class="chapter" data-level="7.8.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#multicollinearity-and-forecasting"><i class="fa fa-check"></i><b>7.8.3</b> Multicollinearity and forecasting</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#exercises-2"><i class="fa fa-check"></i><b>7.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html"><i class="fa fa-check"></i><b>8</b> Exponential Smoothing</a>
<ul>
<li class="chapter" data-level="8.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#simple-exponential-smoothing"><i class="fa fa-check"></i><b>8.1</b> Simple exponential smoothing</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#weighted-average-form"><i class="fa fa-check"></i><b>8.1.1</b> Weighted average form</a></li>
<li class="chapter" data-level="8.1.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#component-form"><i class="fa fa-check"></i><b>8.1.2</b> Component form</a></li>
<li class="chapter" data-level="8.1.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#flat-forecast"><i class="fa fa-check"></i><b>8.1.3</b> Flat forecast</a></li>
<li class="chapter" data-level="8.1.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#optimisation"><i class="fa fa-check"></i><b>8.1.4</b> Optimisation</a></li>
<li class="chapter" data-level="8.1.5" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-algerian-exports"><i class="fa fa-check"></i><b>8.1.5</b> Example: Algerian exports</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#methods-with-trend"><i class="fa fa-check"></i><b>8.2</b> Methods with trend</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holts-linear-trend-method"><i class="fa fa-check"></i><b>8.2.1</b> Holt’s linear trend method</a></li>
<li class="chapter" data-level="8.2.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#damped-trend-methods"><i class="fa fa-check"></i><b>8.2.2</b> Damped trend methods</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#methods-with-seasonality"><i class="fa fa-check"></i><b>8.3</b> Methods with seasonality</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-winters-additive-method"><i class="fa fa-check"></i><b>8.3.1</b> Holt-Winters’ additive method</a></li>
<li class="chapter" data-level="8.3.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-winters-multiplicative-method"><i class="fa fa-check"></i><b>8.3.2</b> Holt-Winters’ multiplicative method</a></li>
<li class="chapter" data-level="8.3.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-domestic-overnight-trips-in-australia"><i class="fa fa-check"></i><b>8.3.3</b> Example: Domestic overnight trips in Australia</a></li>
<li class="chapter" data-level="8.3.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-winters-damped-method"><i class="fa fa-check"></i><b>8.3.4</b> Holt-Winters’ damped method</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#a-taxonomy-of-exponential-smoothing-methods"><i class="fa fa-check"></i><b>8.4</b> A taxonomy of exponential smoothing methods</a></li>
<li class="chapter" data-level="8.5" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#innovations-state-space-models-for-exponential-smoothing"><i class="fa fa-check"></i><b>8.5</b> Innovations state space models for exponential smoothing</a></li>
<li class="chapter" data-level="8.6" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#estimation-and-model-selection"><i class="fa fa-check"></i><b>8.6</b> Estimation and model selection</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#model-selection"><i class="fa fa-check"></i><b>8.6.1</b> Model selection</a></li>
<li class="chapter" data-level="8.6.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-domestic-holiday-tourist-visitor-nights-in-australia"><i class="fa fa-check"></i><b>8.6.2</b> Example: Domestic holiday tourist visitor nights in Australia</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#forecasting-with-ets-models"><i class="fa fa-check"></i><b>8.7</b> Forecasting with ETS models</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#prediction-intervals-2"><i class="fa fa-check"></i><b>8.7.1</b> Prediction intervals</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#excercises-3"><i class="fa fa-check"></i><b>8.8</b> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="arima-models.html"><a href="arima-models.html"><i class="fa fa-check"></i><b>9</b> ARIMA models</a>
<ul>
<li class="chapter" data-level="9.1" data-path="arima-models.html"><a href="arima-models.html#stationarity-and-differencing"><i class="fa fa-check"></i><b>9.1</b> Stationarity and differencing</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="arima-models.html"><a href="arima-models.html#differencing"><i class="fa fa-check"></i><b>9.1.1</b> Differencing</a></li>
<li class="chapter" data-level="9.1.2" data-path="arima-models.html"><a href="arima-models.html#second-order-differencing"><i class="fa fa-check"></i><b>9.1.2</b> Second-order differencing</a></li>
<li class="chapter" data-level="9.1.3" data-path="arima-models.html"><a href="arima-models.html#seasonal-differencing"><i class="fa fa-check"></i><b>9.1.3</b> Seasonal differencing</a></li>
<li class="chapter" data-level="9.1.4" data-path="arima-models.html"><a href="arima-models.html#unit-root-tests"><i class="fa fa-check"></i><b>9.1.4</b> Unit root tests</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="arima-models.html"><a href="arima-models.html#backshift-notation"><i class="fa fa-check"></i><b>9.2</b> Backshift notation</a></li>
<li class="chapter" data-level="9.3" data-path="arima-models.html"><a href="arima-models.html#autoregressive-ar-models"><i class="fa fa-check"></i><b>9.3</b> Autoregressive (AR) models</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="arima-models.html"><a href="arima-models.html#ar1-model"><i class="fa fa-check"></i><b>9.3.1</b> AR(1) model</a></li>
<li class="chapter" data-level="9.3.2" data-path="arima-models.html"><a href="arima-models.html#ar2-model"><i class="fa fa-check"></i><b>9.3.2</b> AR(2) model</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="arima-models.html"><a href="arima-models.html#moving-average-models"><i class="fa fa-check"></i><b>9.4</b> Moving average models</a></li>
<li class="chapter" data-level="9.5" data-path="arima-models.html"><a href="arima-models.html#non-seasonal-arima-models"><i class="fa fa-check"></i><b>9.5</b> Non-seasonal ARIMA models</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="arima-models.html"><a href="arima-models.html#example-egyptian-exports"><i class="fa fa-check"></i><b>9.5.1</b> Example: Egyptian exports</a></li>
<li class="chapter" data-level="9.5.2" data-path="arima-models.html"><a href="arima-models.html#acf-and-pacf-plots"><i class="fa fa-check"></i><b>9.5.2</b> ACF and PACF plots</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="arima-models.html"><a href="arima-models.html#estimation-and-order-selection"><i class="fa fa-check"></i><b>9.6</b> Estimation and order selection</a></li>
<li class="chapter" data-level="9.7" data-path="arima-models.html"><a href="arima-models.html#arima-modelling-in-fable"><i class="fa fa-check"></i><b>9.7</b> ARIMA modelling in <code>fable</code></a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="arima-models.html"><a href="arima-models.html#how-does-arima-work"><i class="fa fa-check"></i><b>9.7.1</b> How does ARIMA() work?</a></li>
<li class="chapter" data-level="9.7.2" data-path="arima-models.html"><a href="arima-models.html#modelling-procedure"><i class="fa fa-check"></i><b>9.7.2</b> Modelling procedure</a></li>
<li class="chapter" data-level="9.7.3" data-path="arima-models.html"><a href="arima-models.html#example-central-african-republic-exports"><i class="fa fa-check"></i><b>9.7.3</b> Example: Central African Republic exports</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="arima-models.html"><a href="arima-models.html#forecasting"><i class="fa fa-check"></i><b>9.8</b> Forecasting</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="arima-models.html"><a href="arima-models.html#prediction-intervals-3"><i class="fa fa-check"></i><b>9.8.1</b> Prediction intervals</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="arima-models.html"><a href="arima-models.html#seasonal-arima-models"><i class="fa fa-check"></i><b>9.9</b> Seasonal ARIMA models</a>
<ul>
<li class="chapter" data-level="9.9.1" data-path="arima-models.html"><a href="arima-models.html#arima-model-notation"><i class="fa fa-check"></i><b>9.9.1</b> ARIMA Model Notation</a></li>
<li class="chapter" data-level="9.9.2" data-path="arima-models.html"><a href="arima-models.html#acfpacf"><i class="fa fa-check"></i><b>9.9.2</b> ACF/PACF</a></li>
<li class="chapter" data-level="9.9.3" data-path="arima-models.html"><a href="arima-models.html#example-monthly-us-leisure-and-hospitality-employment"><i class="fa fa-check"></i><b>9.9.3</b> Example: Monthly US leisure and hospitality employment</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="arima-models.html"><a href="arima-models.html#arima-vs-ets"><i class="fa fa-check"></i><b>9.10</b> ARIMA vs ETS</a>
<ul>
<li class="chapter" data-level="9.10.1" data-path="arima-models.html"><a href="arima-models.html#comparing-arima-and-ets-on-non-seasonal-data"><i class="fa fa-check"></i><b>9.10.1</b> Comparing <code>ARIMA()</code> and <code>ETS()</code> on non-seasonal data</a></li>
<li class="chapter" data-level="9.10.2" data-path="arima-models.html"><a href="arima-models.html#comparing-arima-and-ets-on-seasonal-data"><i class="fa fa-check"></i><b>9.10.2</b> Comparing <code>ARIMA()</code> and <code>ETS()</code> on seasonal data</a></li>
</ul></li>
<li class="chapter" data-level="9.11" data-path="arima-models.html"><a href="arima-models.html#exercises-3"><i class="fa fa-check"></i><b>9.11</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html"><i class="fa fa-check"></i><b>10</b> Dynamic regression models</a>
<ul>
<li class="chapter" data-level="10.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#regression-with-arima-errors-using-fable"><i class="fa fa-check"></i><b>10.1</b> Regression with ARIMA errors using <code>fable</code></a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-us-personal-consumption-and-income"><i class="fa fa-check"></i><b>10.1.1</b> Example: US Personal Consumption and Income</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#forecasting-1"><i class="fa fa-check"></i><b>10.2</b> Forecasting</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-us-personal-consumption-and-income-1"><i class="fa fa-check"></i><b>10.2.1</b> Example: US Personal Consumption and Income</a></li>
<li class="chapter" data-level="10.2.2" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-forecasting-electricity-demand"><i class="fa fa-check"></i><b>10.2.2</b> Example: Forecasting electricity demand</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#stochastic-and-deterministic-trends"><i class="fa fa-check"></i><b>10.3</b> Stochastic and deterministic trends</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-air-transport-passengers-australia"><i class="fa fa-check"></i><b>10.3.1</b> Example: Air transport passengers Australia</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#dynamic-harmonic-regression"><i class="fa fa-check"></i><b>10.4</b> Dynamic harmonic regression</a></li>
<li class="chapter" data-level="10.5" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-australian-eating-out-expenditure"><i class="fa fa-check"></i><b>10.5</b> Example: Australian eating out expenditure</a></li>
<li class="chapter" data-level="10.6" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#lagged-predictors"><i class="fa fa-check"></i><b>10.6</b> Lagged predictors</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-tv-advertising-and-insurance-quotations"><i class="fa fa-check"></i><b>10.6.1</b> Example: TV advertising and insurance quotations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html"><i class="fa fa-check"></i><b>11</b> Forecasting hierarchical and grouped time series</a>
<ul>
<li class="chapter" data-level="11.1" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#hierarchical-and-grouped-time-series"><i class="fa fa-check"></i><b>11.1</b> Hierarchical and grouped time series</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#hierarchical-time-series"><i class="fa fa-check"></i><b>11.1.1</b> Hierarchical time series</a></li>
<li class="chapter" data-level="11.1.2" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#example-australian-tourism-hierarchy"><i class="fa fa-check"></i><b>11.1.2</b> Example: Australian tourism hierarchy</a></li>
<li class="chapter" data-level="11.1.3" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#grouped-time-series"><i class="fa fa-check"></i><b>11.1.3</b> Grouped time series</a></li>
<li class="chapter" data-level="11.1.4" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#example-australian-prison-population"><i class="fa fa-check"></i><b>11.1.4</b> Example: Australian prison population</a></li>
<li class="chapter" data-level="11.1.5" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#mixed-hierarchical-and-grouped-structure"><i class="fa fa-check"></i><b>11.1.5</b> Mixed hierarchical and grouped structure</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#single-level-approaches"><i class="fa fa-check"></i><b>11.2</b> Single level approaches</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#the-bottom-up-approach"><i class="fa fa-check"></i><b>11.2.1</b> The bottom-up approach</a></li>
<li class="chapter" data-level="11.2.2" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#top-down-approaches"><i class="fa fa-check"></i><b>11.2.2</b> Top-down approaches</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#forecast-reconciliation"><i class="fa fa-check"></i><b>11.3</b> Forecast reconciliation</a></li>
<li class="chapter" data-level="11.4" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#forecasting-australian-domestic-tourism"><i class="fa fa-check"></i><b>11.4</b> Forecasting Australian domestic tourism</a></li>
<li class="chapter" data-level="11.5" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#reconciled-distributional-forecasts"><i class="fa fa-check"></i><b>11.5</b> Reconciled distributional forecasts</a></li>
<li class="chapter" data-level="11.6" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#forecasting-australian-prison-population"><i class="fa fa-check"></i><b>11.6</b> Forecasting Australian prison population</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html"><i class="fa fa-check"></i><b>12</b> Advanced forecasting methods</a>
<ul>
<li class="chapter" data-level="12.1" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#complex-seasonality"><i class="fa fa-check"></i><b>12.1</b> Complex seasonality</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#stl-with-multiple-seasonal-periods"><i class="fa fa-check"></i><b>12.1.1</b> STL with multiple seasonal periods</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#prophet-model"><i class="fa fa-check"></i><b>12.2</b> Prophet model</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#example-quarterly-cement-production"><i class="fa fa-check"></i><b>12.2.1</b> Example: Quarterly cement production</a></li>
<li class="chapter" data-level="12.2.2" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#example-half-hourly-electricity-demand"><i class="fa fa-check"></i><b>12.2.2</b> Example: Half-hourly electricity demand</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#vector-autoregressions"><i class="fa fa-check"></i><b>12.3</b> Vector autoregressions</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/daluchkin?tab=repositories">All Repositories</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Forecasting: Principles and Practice (3rd ed)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-forecasters-toolbox" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> The forecaster’s toolbox<a href="the-forecasters-toolbox.html#the-forecasters-toolbox" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="the-forecasters-toolbox.html#cb485-1" tabindex="-1"></a><span class="co"># loading libraries</span></span>
<span id="cb485-2"><a href="the-forecasters-toolbox.html#cb485-2" tabindex="-1"></a><span class="fu">library</span>(tsibble)</span>
<span id="cb485-3"><a href="the-forecasters-toolbox.html#cb485-3" tabindex="-1"></a><span class="fu">library</span>(tsibbledata)</span>
<span id="cb485-4"><a href="the-forecasters-toolbox.html#cb485-4" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb485-5"><a href="the-forecasters-toolbox.html#cb485-5" tabindex="-1"></a><span class="co"># to read data</span></span>
<span id="cb485-6"><a href="the-forecasters-toolbox.html#cb485-6" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb485-7"><a href="the-forecasters-toolbox.html#cb485-7" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb485-8"><a href="the-forecasters-toolbox.html#cb485-8" tabindex="-1"></a><span class="fu">library</span>(fabletools)</span>
<span id="cb485-9"><a href="the-forecasters-toolbox.html#cb485-9" tabindex="-1"></a><span class="fu">library</span>(feasts)</span>
<span id="cb485-10"><a href="the-forecasters-toolbox.html#cb485-10" tabindex="-1"></a><span class="fu">library</span>(fpp3)</span>
<span id="cb485-11"><a href="the-forecasters-toolbox.html#cb485-11" tabindex="-1"></a><span class="fu">library</span>(latex2exp)</span>
<span id="cb485-12"><a href="the-forecasters-toolbox.html#cb485-12" tabindex="-1"></a><span class="fu">library</span>(forecast)</span></code></pre></div>
<p><a href="https://otexts.com/fpp3/toolbox.html">The source of the chapter</a></p>
<p>The process of producing forecasts can be split up into a few fundamentals steps:</p>
<ul>
<li>Preparing data - generate a <code>tsibble</code></li>
<li>Data visualisation</li>
<li>Specifying a model</li>
<li>Model estimation - model() -&gt; mable</li>
<li>Accuracy &amp; performance evaluation</li>
<li>Producing forecasts - forecast() -&gt; fable</li>
</ul>
<div id="a-tidy-forecasting-workflow" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> A tidy forecasting workflow<a href="the-forecasters-toolbox.html#a-tidy-forecasting-workflow" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/a-tidy-forecasting-workflow.html">The source of the section</a></p>
<p>The process to make a forecast: <img src="https://otexts.com/fpp3/fpp_files/figure-html/workflow-1.png" alt="alt text" /></p>
<div id="data-preparation-tidy" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Data preparation (tidy)<a href="the-forecasters-toolbox.html#data-preparation-tidy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="the-forecasters-toolbox.html#cb486-1" tabindex="-1"></a>gdppc <span class="ot">&lt;-</span> global_economy <span class="sc">|&gt;</span></span>
<span id="cb486-2"><a href="the-forecasters-toolbox.html#cb486-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GDP_per_capita =</span> GDP <span class="sc">/</span> Population)</span>
<span id="cb486-3"><a href="the-forecasters-toolbox.html#cb486-3" tabindex="-1"></a></span>
<span id="cb486-4"><a href="the-forecasters-toolbox.html#cb486-4" tabindex="-1"></a>gdppc</span></code></pre></div>
<pre><code>## # A tsibble: 15,150 x 10 [1Y]
## # Key:       Country [263]
##    Country     Code   Year         GDP Growth   CPI Imports Exports Population GDP_per_capita
##    &lt;fct&gt;       &lt;fct&gt; &lt;dbl&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;
##  1 Afghanistan AFG    1960  537777811.     NA    NA    7.02    4.13    8996351           59.8
##  2 Afghanistan AFG    1961  548888896.     NA    NA    8.10    4.45    9166764           59.9
##  3 Afghanistan AFG    1962  546666678.     NA    NA    9.35    4.88    9345868           58.5
##  4 Afghanistan AFG    1963  751111191.     NA    NA   16.9     9.17    9533954           78.8
##  5 Afghanistan AFG    1964  800000044.     NA    NA   18.1     8.89    9731361           82.2
##  6 Afghanistan AFG    1965 1006666638.     NA    NA   21.4    11.3     9938414          101. 
##  7 Afghanistan AFG    1966 1399999967.     NA    NA   18.6     8.57   10152331          138. 
##  8 Afghanistan AFG    1967 1673333418.     NA    NA   14.2     6.77   10372630          161. 
##  9 Afghanistan AFG    1968 1373333367.     NA    NA   15.2     8.90   10604346          130. 
## 10 Afghanistan AFG    1969 1408888922.     NA    NA   15.0    10.1    10854428          130. 
## # ℹ 15,140 more rows</code></pre>
</div>
<div id="plot-the-data-visualise" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Plot the data (visualise)<a href="the-forecasters-toolbox.html#plot-the-data-visualise" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="the-forecasters-toolbox.html#cb488-1" tabindex="-1"></a>gdppc <span class="sc">|&gt;</span></span>
<span id="cb488-2"><a href="the-forecasters-toolbox.html#cb488-2" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">&#39;Sweden&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb488-3"><a href="the-forecasters-toolbox.html#cb488-3" tabindex="-1"></a>  <span class="fu">autoplot</span>(GDP_per_capita) <span class="sc">+</span></span>
<span id="cb488-4"><a href="the-forecasters-toolbox.html#cb488-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;$US&#39;</span>, <span class="at">title =</span> <span class="st">&#39;GDP per capita for Sweden&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-3-1.png" width="672" /></p>
</div>
<div id="define-a-model-specify" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> Define a model (specify)<a href="the-forecasters-toolbox.html#define-a-model-specify" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Such as the data has annual frequency, use linear trend model <code>TSLM(GDP_per_capita ~ trend())</code>.</p>
</div>
<div id="train-the-model-estimate" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Train the model (estimate)<a href="the-forecasters-toolbox.html#train-the-model-estimate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="the-forecasters-toolbox.html#cb489-1" tabindex="-1"></a>fit <span class="ot">&lt;-</span> gdppc <span class="sc">|&gt;</span></span>
<span id="cb489-2"><a href="the-forecasters-toolbox.html#cb489-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">trend_model =</span> <span class="fu">TSLM</span>(GDP_per_capita <span class="sc">~</span> <span class="fu">trend</span>()))</span></code></pre></div>
<pre><code>## Warning: 7 errors (1 unique) encountered for trend_model
## [7] 0 (non-NA) cases</code></pre>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="the-forecasters-toolbox.html#cb491-1" tabindex="-1"></a>fit</span></code></pre></div>
<pre><code>## # A mable: 263 x 2
## # Key:     Country [263]
##    Country             trend_model
##    &lt;fct&gt;                   &lt;model&gt;
##  1 Afghanistan              &lt;TSLM&gt;
##  2 Albania                  &lt;TSLM&gt;
##  3 Algeria                  &lt;TSLM&gt;
##  4 American Samoa           &lt;TSLM&gt;
##  5 Andorra                  &lt;TSLM&gt;
##  6 Angola                   &lt;TSLM&gt;
##  7 Antigua and Barbuda      &lt;TSLM&gt;
##  8 Arab World               &lt;TSLM&gt;
##  9 Argentina                &lt;TSLM&gt;
## 10 Armenia                  &lt;TSLM&gt;
## # ℹ 253 more rows</code></pre>
<p>This fits a linear trend model to the GDP per capita data for each combination of key variables in the tsibble.</p>
</div>
<div id="check-model-performance-evaluate" class="section level3 hasAnchor" number="5.1.5">
<h3><span class="header-section-number">5.1.5</span> Check model performance (evaluate)<a href="the-forecasters-toolbox.html#check-model-performance-evaluate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once a model has been fitted, it is important to check how well it has performed on the data.</p>
</div>
<div id="produce-forecasts-forecast" class="section level3 hasAnchor" number="5.1.6">
<h3><span class="header-section-number">5.1.6</span> Produce forecasts (forecast)<a href="the-forecasters-toolbox.html#produce-forecasts-forecast" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="the-forecasters-toolbox.html#cb493-1" tabindex="-1"></a>fit <span class="sc">|&gt;</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">&#39;3 years&#39;</span>)</span></code></pre></div>
<pre><code>## # A fable: 789 x 5 [1Y]
## # Key:     Country, .model [263]
##    Country        .model       Year   GDP_per_capita  .mean
##    &lt;fct&gt;          &lt;chr&gt;       &lt;dbl&gt;           &lt;dist&gt;  &lt;dbl&gt;
##  1 Afghanistan    trend_model  2018     N(526, 9653)   526.
##  2 Afghanistan    trend_model  2019     N(534, 9689)   534.
##  3 Afghanistan    trend_model  2020     N(542, 9727)   542.
##  4 Albania        trend_model  2018  N(4716, 476419)  4716.
##  5 Albania        trend_model  2019  N(4867, 481086)  4867.
##  6 Albania        trend_model  2020  N(5018, 486012)  5018.
##  7 Algeria        trend_model  2018  N(4410, 643094)  4410.
##  8 Algeria        trend_model  2019  N(4489, 645311)  4489.
##  9 Algeria        trend_model  2020  N(4568, 647602)  4568.
## 10 American Samoa trend_model  2018 N(12491, 652926) 12491.
## # ℹ 779 more rows</code></pre>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="the-forecasters-toolbox.html#cb495-1" tabindex="-1"></a>fit <span class="sc">|&gt;</span></span>
<span id="cb495-2"><a href="the-forecasters-toolbox.html#cb495-2" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">&#39;3 years&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb495-3"><a href="the-forecasters-toolbox.html#cb495-3" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">&#39;Sweden&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb495-4"><a href="the-forecasters-toolbox.html#cb495-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(gdppc) <span class="sc">+</span></span>
<span id="cb495-5"><a href="the-forecasters-toolbox.html#cb495-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;$US&#39;</span>, <span class="at">title =</span> <span class="st">&#39;GDP per capita for Sweden&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-6-1.png" width="672" /></p>
</div>
</div>
<div id="some-simple-forecasting-methods" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Some simple forecasting methods<a href="the-forecasters-toolbox.html#some-simple-forecasting-methods" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/simple-methods.html">The source of the section</a></p>
<p>Simple methods which could be used as benchmarks or sanity check more complex fancy forecasting.</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="the-forecasters-toolbox.html#cb496-1" tabindex="-1"></a>bricks <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb496-2"><a href="the-forecasters-toolbox.html#cb496-2" tabindex="-1"></a>  <span class="fu">filter_index</span>(<span class="st">&#39;1970 Q1&#39;</span> <span class="sc">~</span> <span class="st">&#39;2004 Q4&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb496-3"><a href="the-forecasters-toolbox.html#cb496-3" tabindex="-1"></a>  <span class="fu">select</span>(Bricks)</span>
<span id="cb496-4"><a href="the-forecasters-toolbox.html#cb496-4" tabindex="-1"></a></span>
<span id="cb496-5"><a href="the-forecasters-toolbox.html#cb496-5" tabindex="-1"></a>bricks</span></code></pre></div>
<pre><code>## # A tsibble: 140 x 2 [1Q]
##    Bricks Quarter
##     &lt;dbl&gt;   &lt;qtr&gt;
##  1    386 1970 Q1
##  2    428 1970 Q2
##  3    434 1970 Q3
##  4    417 1970 Q4
##  5    385 1971 Q1
##  6    433 1971 Q2
##  7    453 1971 Q3
##  8    436 1971 Q4
##  9    399 1972 Q1
## 10    461 1972 Q2
## # ℹ 130 more rows</code></pre>
<div id="mean-method" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Mean method<a href="the-forecasters-toolbox.html#mean-method" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>MEAN(y): Average method:</p>
<ul>
<li>Forecasts of all future values are <strong>equal</strong> to mean of historical data <span class="math inline">\(\{y_1, ..., y_T\}\)</span></li>
<li>Forecasts: <span class="math inline">\(\hat y_{T+h|T} = \bar y = (y_1 + ... + y_T)/T\)</span></li>
</ul>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="the-forecasters-toolbox.html#cb498-1" tabindex="-1"></a>bricks <span class="sc">|&gt;</span> </span>
<span id="cb498-2"><a href="the-forecasters-toolbox.html#cb498-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">MEAN</span>(Bricks)) <span class="sc">|&gt;</span></span>
<span id="cb498-3"><a href="the-forecasters-toolbox.html#cb498-3" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">24</span>) <span class="sc">|&gt;</span></span>
<span id="cb498-4"><a href="the-forecasters-toolbox.html#cb498-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(bricks, <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb498-5"><a href="the-forecasters-toolbox.html#cb498-5" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;rect&quot;</span>, <span class="at">xmin =</span> bricks[<span class="dv">1</span>, ]<span class="sc">$</span>Quarter, </span>
<span id="cb498-6"><a href="the-forecasters-toolbox.html#cb498-6" tabindex="-1"></a>                   <span class="at">ymin =</span> <span class="fu">mean</span>(bricks<span class="sc">$</span>Bricks),</span>
<span id="cb498-7"><a href="the-forecasters-toolbox.html#cb498-7" tabindex="-1"></a>                   <span class="at">xmax =</span> bricks[<span class="fu">nrow</span>(bricks), ]<span class="sc">$</span>Quarter, </span>
<span id="cb498-8"><a href="the-forecasters-toolbox.html#cb498-8" tabindex="-1"></a>                   <span class="at">ymax =</span> <span class="fu">mean</span>(bricks<span class="sc">$</span>Bricks), </span>
<span id="cb498-9"><a href="the-forecasters-toolbox.html#cb498-9" tabindex="-1"></a>                   <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb498-10"><a href="the-forecasters-toolbox.html#cb498-10" tabindex="-1"></a>                   <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb498-11"><a href="the-forecasters-toolbox.html#cb498-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&#39;Clay brick production in Australia&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-8-1.png" width="672" /></p>
</div>
<div id="naiïve-method" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Naiïve method<a href="the-forecasters-toolbox.html#naiïve-method" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>NAIVE(y):</p>
<ul>
<li>Forecasts equals to last observed value.</li>
<li>Forecasts: <span class="math inline">\(\hat y_{T+h|T} = y_T\)</span></li>
<li>Consequence of efficient market hypothesis</li>
</ul>
<blockquote>
<p>This method works remarkably well for many economic and financial time series.</p>
</blockquote>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="the-forecasters-toolbox.html#cb499-1" tabindex="-1"></a>bricks <span class="sc">|&gt;</span> </span>
<span id="cb499-2"><a href="the-forecasters-toolbox.html#cb499-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Bricks)) <span class="sc">|&gt;</span></span>
<span id="cb499-3"><a href="the-forecasters-toolbox.html#cb499-3" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">24</span>) <span class="sc">|&gt;</span></span>
<span id="cb499-4"><a href="the-forecasters-toolbox.html#cb499-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(bricks, <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb499-5"><a href="the-forecasters-toolbox.html#cb499-5" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;point&quot;</span>, <span class="at">x =</span> bricks[<span class="fu">nrow</span>(bricks), ]<span class="sc">$</span>Quarter, </span>
<span id="cb499-6"><a href="the-forecasters-toolbox.html#cb499-6" tabindex="-1"></a>                    <span class="at">y =</span> bricks[<span class="fu">nrow</span>(bricks), ]<span class="sc">$</span>Bricks, </span>
<span id="cb499-7"><a href="the-forecasters-toolbox.html#cb499-7" tabindex="-1"></a>                    <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb499-8"><a href="the-forecasters-toolbox.html#cb499-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&#39;Clay brick production in Australia&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-9-1.png" width="672" /></p>
<blockquote>
<p>Because a naïve forecast is optimal when data follow a random walk, these are also called random walk forecasts and the RW() function can be used instead of NAIVE.</p>
</blockquote>
</div>
<div id="seasonal-naïve-method" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Seasonal naïve method<a href="the-forecasters-toolbox.html#seasonal-naïve-method" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>SNAIVE(y ~ lag(m)):</p>
<ul>
<li>Forecasts equal to last value from same season</li>
<li>Forecasts: <span class="math inline">\(\hat y_{T+h|T} = y_{T+h-m(k+1)}\)</span>, where <span class="math inline">\(m\)</span> = seasonal period and <span class="math inline">\(k\)</span> is the intereg part of <span class="math inline">\((h - 1)/m\)</span></li>
</ul>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="the-forecasters-toolbox.html#cb500-1" tabindex="-1"></a>bricks <span class="sc">|&gt;</span></span>
<span id="cb500-2"><a href="the-forecasters-toolbox.html#cb500-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">SNAIVE</span>(Bricks <span class="sc">~</span> <span class="fu">lag</span>(<span class="dv">4</span>))) <span class="sc">|&gt;</span> <span class="co"># it is possible to use lag(&#39;year&#39;) - 4 Quarters</span></span>
<span id="cb500-3"><a href="the-forecasters-toolbox.html#cb500-3" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">24</span>) <span class="sc">|&gt;</span></span>
<span id="cb500-4"><a href="the-forecasters-toolbox.html#cb500-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(bricks, <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb500-5"><a href="the-forecasters-toolbox.html#cb500-5" tabindex="-1"></a>  <span class="co"># Q4</span></span>
<span id="cb500-6"><a href="the-forecasters-toolbox.html#cb500-6" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;point&quot;</span>, <span class="at">x =</span> bricks[<span class="fu">nrow</span>(bricks), ]<span class="sc">$</span>Quarter, </span>
<span id="cb500-7"><a href="the-forecasters-toolbox.html#cb500-7" tabindex="-1"></a>                    <span class="at">y =</span> bricks[<span class="fu">nrow</span>(bricks), ]<span class="sc">$</span>Bricks, </span>
<span id="cb500-8"><a href="the-forecasters-toolbox.html#cb500-8" tabindex="-1"></a>                    <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb500-9"><a href="the-forecasters-toolbox.html#cb500-9" tabindex="-1"></a>  <span class="co"># Q3</span></span>
<span id="cb500-10"><a href="the-forecasters-toolbox.html#cb500-10" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;point&quot;</span>, <span class="at">x =</span> bricks[<span class="fu">nrow</span>(bricks)<span class="sc">-</span><span class="dv">1</span>, ]<span class="sc">$</span>Quarter, </span>
<span id="cb500-11"><a href="the-forecasters-toolbox.html#cb500-11" tabindex="-1"></a>                    <span class="at">y =</span> bricks[<span class="fu">nrow</span>(bricks)<span class="sc">-</span><span class="dv">1</span>, ]<span class="sc">$</span>Bricks, </span>
<span id="cb500-12"><a href="the-forecasters-toolbox.html#cb500-12" tabindex="-1"></a>                    <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb500-13"><a href="the-forecasters-toolbox.html#cb500-13" tabindex="-1"></a>  <span class="co"># Q2</span></span>
<span id="cb500-14"><a href="the-forecasters-toolbox.html#cb500-14" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;point&quot;</span>, <span class="at">x =</span> bricks[<span class="fu">nrow</span>(bricks)<span class="sc">-</span><span class="dv">2</span>, ]<span class="sc">$</span>Quarter, </span>
<span id="cb500-15"><a href="the-forecasters-toolbox.html#cb500-15" tabindex="-1"></a>                    <span class="at">y =</span> bricks[<span class="fu">nrow</span>(bricks)<span class="sc">-</span><span class="dv">2</span>, ]<span class="sc">$</span>Bricks, </span>
<span id="cb500-16"><a href="the-forecasters-toolbox.html#cb500-16" tabindex="-1"></a>                    <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb500-17"><a href="the-forecasters-toolbox.html#cb500-17" tabindex="-1"></a>  <span class="co"># Q1</span></span>
<span id="cb500-18"><a href="the-forecasters-toolbox.html#cb500-18" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;point&quot;</span>, <span class="at">x =</span> bricks[<span class="fu">nrow</span>(bricks)<span class="sc">-</span><span class="dv">3</span>, ]<span class="sc">$</span>Quarter, </span>
<span id="cb500-19"><a href="the-forecasters-toolbox.html#cb500-19" tabindex="-1"></a>                    <span class="at">y =</span> bricks[<span class="fu">nrow</span>(bricks)<span class="sc">-</span><span class="dv">3</span>, ]<span class="sc">$</span>Bricks, </span>
<span id="cb500-20"><a href="the-forecasters-toolbox.html#cb500-20" tabindex="-1"></a>                    <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb500-21"><a href="the-forecasters-toolbox.html#cb500-21" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&#39;Clay brick production in Australia&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-10-1.png" width="672" /></p>
</div>
<div id="drift-method" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Drift method<a href="the-forecasters-toolbox.html#drift-method" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>RW(y ~ drift()):</p>
<ul>
<li>Forecasts equal to last value plus average change</li>
<li>Forecasts: <span class="math display">\[
\hat y_{T+h|T} = y_T + \frac {h} {T - 1} \sum_{t=2}^T(y_t - y_{t-1})
= y_T + \frac {h} {T - 1} (y_t - y_1)
\]</span></li>
<li>Equivalent to extrapolating a line drawn between first and last observations.</li>
</ul>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="the-forecasters-toolbox.html#cb501-1" tabindex="-1"></a>bricks <span class="sc">|&gt;</span> </span>
<span id="cb501-2"><a href="the-forecasters-toolbox.html#cb501-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(Bricks <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">|&gt;</span></span>
<span id="cb501-3"><a href="the-forecasters-toolbox.html#cb501-3" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">24</span>) <span class="sc">|&gt;</span></span>
<span id="cb501-4"><a href="the-forecasters-toolbox.html#cb501-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(bricks, <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb501-5"><a href="the-forecasters-toolbox.html#cb501-5" tabindex="-1"></a>  <span class="co"># first point</span></span>
<span id="cb501-6"><a href="the-forecasters-toolbox.html#cb501-6" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;point&quot;</span>, <span class="at">x =</span> bricks[<span class="dv">1</span>, ]<span class="sc">$</span>Quarter, </span>
<span id="cb501-7"><a href="the-forecasters-toolbox.html#cb501-7" tabindex="-1"></a>                    <span class="at">y =</span> bricks[<span class="dv">1</span>, ]<span class="sc">$</span>Bricks, </span>
<span id="cb501-8"><a href="the-forecasters-toolbox.html#cb501-8" tabindex="-1"></a>                    <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb501-9"><a href="the-forecasters-toolbox.html#cb501-9" tabindex="-1"></a>  <span class="co"># last point</span></span>
<span id="cb501-10"><a href="the-forecasters-toolbox.html#cb501-10" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;point&quot;</span>, <span class="at">x =</span> bricks[<span class="fu">nrow</span>(bricks), ]<span class="sc">$</span>Quarter, </span>
<span id="cb501-11"><a href="the-forecasters-toolbox.html#cb501-11" tabindex="-1"></a>                    <span class="at">y =</span> bricks[<span class="fu">nrow</span>(bricks), ]<span class="sc">$</span>Bricks, </span>
<span id="cb501-12"><a href="the-forecasters-toolbox.html#cb501-12" tabindex="-1"></a>                    <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb501-13"><a href="the-forecasters-toolbox.html#cb501-13" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;segment&quot;</span>, <span class="at">x =</span> bricks[<span class="dv">1</span>, ]<span class="sc">$</span>Quarter, </span>
<span id="cb501-14"><a href="the-forecasters-toolbox.html#cb501-14" tabindex="-1"></a>                      <span class="at">y =</span> bricks[<span class="dv">1</span>, ]<span class="sc">$</span>Bricks, </span>
<span id="cb501-15"><a href="the-forecasters-toolbox.html#cb501-15" tabindex="-1"></a>                      <span class="at">xend =</span> bricks[<span class="fu">nrow</span>(bricks), ]<span class="sc">$</span>Quarter, </span>
<span id="cb501-16"><a href="the-forecasters-toolbox.html#cb501-16" tabindex="-1"></a>                      <span class="at">yend =</span> bricks[<span class="fu">nrow</span>(bricks), ]<span class="sc">$</span>Bricks, </span>
<span id="cb501-17"><a href="the-forecasters-toolbox.html#cb501-17" tabindex="-1"></a>                      <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb501-18"><a href="the-forecasters-toolbox.html#cb501-18" tabindex="-1"></a>                      <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb501-19"><a href="the-forecasters-toolbox.html#cb501-19" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&#39;Clay brick production in Australia&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-11-1.png" width="672" /></p>
</div>
<div id="model-fitting" class="section level3 hasAnchor" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> Model fitting<a href="the-forecasters-toolbox.html#model-fitting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="the-forecasters-toolbox.html#cb502-1" tabindex="-1"></a>brick_fit <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb502-2"><a href="the-forecasters-toolbox.html#cb502-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Bricks)) <span class="sc">|&gt;</span></span>
<span id="cb502-3"><a href="the-forecasters-toolbox.html#cb502-3" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb502-4"><a href="the-forecasters-toolbox.html#cb502-4" tabindex="-1"></a>    <span class="at">Seasonal_naive =</span> <span class="fu">SNAIVE</span>(Bricks),</span>
<span id="cb502-5"><a href="the-forecasters-toolbox.html#cb502-5" tabindex="-1"></a>    <span class="at">Naive =</span> <span class="fu">NAIVE</span>(Bricks),</span>
<span id="cb502-6"><a href="the-forecasters-toolbox.html#cb502-6" tabindex="-1"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Bricks <span class="sc">~</span> <span class="fu">drift</span>()),</span>
<span id="cb502-7"><a href="the-forecasters-toolbox.html#cb502-7" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Bricks)</span>
<span id="cb502-8"><a href="the-forecasters-toolbox.html#cb502-8" tabindex="-1"></a>  )</span>
<span id="cb502-9"><a href="the-forecasters-toolbox.html#cb502-9" tabindex="-1"></a></span>
<span id="cb502-10"><a href="the-forecasters-toolbox.html#cb502-10" tabindex="-1"></a>brick_fit</span></code></pre></div>
<pre><code>## # A mable: 1 x 4
##   Seasonal_naive   Naive         Drift    Mean
##          &lt;model&gt; &lt;model&gt;       &lt;model&gt; &lt;model&gt;
## 1       &lt;SNAIVE&gt; &lt;NAIVE&gt; &lt;RW w/ drift&gt;  &lt;MEAN&gt;</code></pre>
</div>
<div id="producing-forecasts" class="section level3 hasAnchor" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> Producing forecasts<a href="the-forecasters-toolbox.html#producing-forecasts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="the-forecasters-toolbox.html#cb504-1" tabindex="-1"></a>brick_fc <span class="ot">&lt;-</span> brick_fit <span class="sc">|&gt;</span></span>
<span id="cb504-2"><a href="the-forecasters-toolbox.html#cb504-2" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">&#39;5 years&#39;</span>)</span>
<span id="cb504-3"><a href="the-forecasters-toolbox.html#cb504-3" tabindex="-1"></a></span>
<span id="cb504-4"><a href="the-forecasters-toolbox.html#cb504-4" tabindex="-1"></a>brick_fc</span></code></pre></div>
<pre><code>## # A fable: 80 x 4 [1Q]
## # Key:     .model [4]
##    .model         Quarter       Bricks .mean
##    &lt;chr&gt;            &lt;qtr&gt;       &lt;dist&gt; &lt;dbl&gt;
##  1 Seasonal_naive 2005 Q3 N(428, 2336)   428
##  2 Seasonal_naive 2005 Q4 N(397, 2336)   397
##  3 Seasonal_naive 2006 Q1 N(355, 2336)   355
##  4 Seasonal_naive 2006 Q2 N(435, 2336)   435
##  5 Seasonal_naive 2006 Q3 N(428, 4672)   428
##  6 Seasonal_naive 2006 Q4 N(397, 4672)   397
##  7 Seasonal_naive 2007 Q1 N(355, 4672)   355
##  8 Seasonal_naive 2007 Q2 N(435, 4672)   435
##  9 Seasonal_naive 2007 Q3 N(428, 7008)   428
## 10 Seasonal_naive 2007 Q4 N(397, 7008)   397
## # ℹ 70 more rows</code></pre>
</div>
<div id="visualising-forecasts" class="section level3 hasAnchor" number="5.2.7">
<h3><span class="header-section-number">5.2.7</span> Visualising forecasts<a href="the-forecasters-toolbox.html#visualising-forecasts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="the-forecasters-toolbox.html#cb506-1" tabindex="-1"></a>brick_fc <span class="sc">|&gt;</span></span>
<span id="cb506-2"><a href="the-forecasters-toolbox.html#cb506-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(aus_production, <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb506-3"><a href="the-forecasters-toolbox.html#cb506-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Clay brick production in Australia&#39;</span>,</span>
<span id="cb506-4"><a href="the-forecasters-toolbox.html#cb506-4" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Millions of bricks&#39;</span>) <span class="sc">+</span></span>
<span id="cb506-5"><a href="the-forecasters-toolbox.html#cb506-5" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&#39;Forecast&#39;</span>))</span></code></pre></div>
<pre><code>## Warning: Removed 20 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-14-1.png" width="672" /></p>
</div>
<div id="example-facebook-closing-stock-price" class="section level3 hasAnchor" number="5.2.8">
<h3><span class="header-section-number">5.2.8</span> Example: Facebook closing stock price<a href="the-forecasters-toolbox.html#example-facebook-closing-stock-price" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="the-forecasters-toolbox.html#cb508-1" tabindex="-1"></a>fb_stock <span class="ot">&lt;-</span> gafa_stock <span class="sc">|&gt;</span></span>
<span id="cb508-2"><a href="the-forecasters-toolbox.html#cb508-2" tabindex="-1"></a>  <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">&#39;FB&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb508-3"><a href="the-forecasters-toolbox.html#cb508-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">traiding_day =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb508-4"><a href="the-forecasters-toolbox.html#cb508-4" tabindex="-1"></a>  <span class="fu">update_tsibble</span>(<span class="at">index =</span> traiding_day, <span class="at">regular =</span> <span class="cn">TRUE</span>)</span>
<span id="cb508-5"><a href="the-forecasters-toolbox.html#cb508-5" tabindex="-1"></a></span>
<span id="cb508-6"><a href="the-forecasters-toolbox.html#cb508-6" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb508-7"><a href="the-forecasters-toolbox.html#cb508-7" tabindex="-1"></a>  <span class="fu">autoplot</span>(Close)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-15-1.png" width="672" /></p>
<p>There is no seasonality.</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="the-forecasters-toolbox.html#cb509-1" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb509-2"><a href="the-forecasters-toolbox.html#cb509-2" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb509-3"><a href="the-forecasters-toolbox.html#cb509-3" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Close),</span>
<span id="cb509-4"><a href="the-forecasters-toolbox.html#cb509-4" tabindex="-1"></a>    <span class="at">Naive =</span> <span class="fu">NAIVE</span>(Close),</span>
<span id="cb509-5"><a href="the-forecasters-toolbox.html#cb509-5" tabindex="-1"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb509-6"><a href="the-forecasters-toolbox.html#cb509-6" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb509-7"><a href="the-forecasters-toolbox.html#cb509-7" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">42</span>) <span class="sc">|&gt;</span> <span class="co"># forecast for 42 days</span></span>
<span id="cb509-8"><a href="the-forecasters-toolbox.html#cb509-8" tabindex="-1"></a>  <span class="fu">autoplot</span>(fb_stock, <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb509-9"><a href="the-forecasters-toolbox.html#cb509-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Facebook closing stock price&#39;</span>, <span class="at">y =</span> <span class="st">&#39;$US&#39;</span>) <span class="sc">+</span></span>
<span id="cb509-10"><a href="the-forecasters-toolbox.html#cb509-10" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&#39;Forecast&#39;</span>))</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-16-1.png" width="672" /></p>
</div>
<div id="example-australian-quarterly-beer-production" class="section level3 hasAnchor" number="5.2.9">
<h3><span class="header-section-number">5.2.9</span> Example: Australian quarterly beer production<a href="the-forecasters-toolbox.html#example-australian-quarterly-beer-production" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="the-forecasters-toolbox.html#cb510-1" tabindex="-1"></a>beer <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb510-2"><a href="the-forecasters-toolbox.html#cb510-2" tabindex="-1"></a>  <span class="fu">filter_index</span>(<span class="st">&quot;1992 Q1&quot;</span> <span class="sc">~</span> .)</span>
<span id="cb510-3"><a href="the-forecasters-toolbox.html#cb510-3" tabindex="-1"></a></span>
<span id="cb510-4"><a href="the-forecasters-toolbox.html#cb510-4" tabindex="-1"></a>beer <span class="sc">|&gt;</span> <span class="fu">gg_tsdisplay</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Beer`</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-17-1.png" width="672" /></p>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="the-forecasters-toolbox.html#cb512-1" tabindex="-1"></a><span class="co"># Set training data from 1992 to 2006</span></span>
<span id="cb512-2"><a href="the-forecasters-toolbox.html#cb512-2" tabindex="-1"></a>train <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb512-3"><a href="the-forecasters-toolbox.html#cb512-3" tabindex="-1"></a>  <span class="fu">filter_index</span>(<span class="st">&#39;1992 Q1&#39;</span> <span class="sc">~</span> <span class="st">&#39;2006 Q4&#39;</span>)</span>
<span id="cb512-4"><a href="the-forecasters-toolbox.html#cb512-4" tabindex="-1"></a></span>
<span id="cb512-5"><a href="the-forecasters-toolbox.html#cb512-5" tabindex="-1"></a><span class="co"># Fit the model</span></span>
<span id="cb512-6"><a href="the-forecasters-toolbox.html#cb512-6" tabindex="-1"></a>beer_fit <span class="ot">&lt;-</span> train <span class="sc">|&gt;</span></span>
<span id="cb512-7"><a href="the-forecasters-toolbox.html#cb512-7" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb512-8"><a href="the-forecasters-toolbox.html#cb512-8" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Beer),</span>
<span id="cb512-9"><a href="the-forecasters-toolbox.html#cb512-9" tabindex="-1"></a>    <span class="st">`</span><span class="at">Naïve</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">NAIVE</span>(Beer),</span>
<span id="cb512-10"><a href="the-forecasters-toolbox.html#cb512-10" tabindex="-1"></a>    <span class="st">`</span><span class="at">Seasonal Naïve</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">SNAIVE</span>(Beer),</span>
<span id="cb512-11"><a href="the-forecasters-toolbox.html#cb512-11" tabindex="-1"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Beer <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb512-12"><a href="the-forecasters-toolbox.html#cb512-12" tabindex="-1"></a>  )</span>
<span id="cb512-13"><a href="the-forecasters-toolbox.html#cb512-13" tabindex="-1"></a><span class="co"># Generate forecasts for 14 quarters</span></span>
<span id="cb512-14"><a href="the-forecasters-toolbox.html#cb512-14" tabindex="-1"></a>beer_fc <span class="ot">&lt;-</span> beer_fit <span class="sc">|&gt;</span></span>
<span id="cb512-15"><a href="the-forecasters-toolbox.html#cb512-15" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">14</span>)</span>
<span id="cb512-16"><a href="the-forecasters-toolbox.html#cb512-16" tabindex="-1"></a><span class="co"># Plot forecasts against actual values</span></span>
<span id="cb512-17"><a href="the-forecasters-toolbox.html#cb512-17" tabindex="-1"></a>beer_fc <span class="sc">|&gt;</span></span>
<span id="cb512-18"><a href="the-forecasters-toolbox.html#cb512-18" tabindex="-1"></a>  <span class="fu">autoplot</span>(train, <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb512-19"><a href="the-forecasters-toolbox.html#cb512-19" tabindex="-1"></a>  <span class="fu">autolayer</span>(</span>
<span id="cb512-20"><a href="the-forecasters-toolbox.html#cb512-20" tabindex="-1"></a>    <span class="fu">filter_index</span>(aus_production, <span class="st">&#39;2007 Q1&#39;</span> <span class="sc">~</span> .),</span>
<span id="cb512-21"><a href="the-forecasters-toolbox.html#cb512-21" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&#39;black&#39;</span></span>
<span id="cb512-22"><a href="the-forecasters-toolbox.html#cb512-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb512-23"><a href="the-forecasters-toolbox.html#cb512-23" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Megalitres&#39;</span>,</span>
<span id="cb512-24"><a href="the-forecasters-toolbox.html#cb512-24" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Forecasts for beer production&#39;</span>) <span class="sc">+</span></span>
<span id="cb512-25"><a href="the-forecasters-toolbox.html#cb512-25" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">coclor =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&#39;Forecast&#39;</span>))</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `.vars = Beer`</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-18-1.png" width="672" /></p>
</div>
<div id="example-googles-daily-closing-stock-price" class="section level3 hasAnchor" number="5.2.10">
<h3><span class="header-section-number">5.2.10</span> Example: Google’s daily closing stock price<a href="the-forecasters-toolbox.html#example-googles-daily-closing-stock-price" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>… first set up a new time index based on the trading days rather than calendar days</p>
</blockquote>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="the-forecasters-toolbox.html#cb514-1" tabindex="-1"></a><span class="co"># Re-index based on trading days</span></span>
<span id="cb514-2"><a href="the-forecasters-toolbox.html#cb514-2" tabindex="-1"></a>google_stock <span class="ot">&lt;-</span> gafa_stock <span class="sc">|&gt;</span></span>
<span id="cb514-3"><a href="the-forecasters-toolbox.html#cb514-3" tabindex="-1"></a>  <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">&quot;GOOG&quot;</span>, <span class="fu">year</span>(Date) <span class="sc">&gt;=</span> <span class="dv">2015</span>) <span class="sc">|&gt;</span></span>
<span id="cb514-4"><a href="the-forecasters-toolbox.html#cb514-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">day =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb514-5"><a href="the-forecasters-toolbox.html#cb514-5" tabindex="-1"></a>  <span class="fu">update_tsibble</span>(<span class="at">index =</span> day, <span class="at">regular =</span> <span class="cn">TRUE</span>)</span>
<span id="cb514-6"><a href="the-forecasters-toolbox.html#cb514-6" tabindex="-1"></a></span>
<span id="cb514-7"><a href="the-forecasters-toolbox.html#cb514-7" tabindex="-1"></a><span class="co"># Filter the year of interest</span></span>
<span id="cb514-8"><a href="the-forecasters-toolbox.html#cb514-8" tabindex="-1"></a>google_2015 <span class="ot">&lt;-</span> google_stock <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">year</span>(Date) <span class="sc">==</span> <span class="dv">2015</span>)</span>
<span id="cb514-9"><a href="the-forecasters-toolbox.html#cb514-9" tabindex="-1"></a><span class="co"># Fit the models</span></span>
<span id="cb514-10"><a href="the-forecasters-toolbox.html#cb514-10" tabindex="-1"></a>google_fit <span class="ot">&lt;-</span> google_2015 <span class="sc">|&gt;</span></span>
<span id="cb514-11"><a href="the-forecasters-toolbox.html#cb514-11" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb514-12"><a href="the-forecasters-toolbox.html#cb514-12" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Close),</span>
<span id="cb514-13"><a href="the-forecasters-toolbox.html#cb514-13" tabindex="-1"></a>    <span class="st">`</span><span class="at">Naïve</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">NAIVE</span>(Close),</span>
<span id="cb514-14"><a href="the-forecasters-toolbox.html#cb514-14" tabindex="-1"></a>    <span class="at">Drift =</span> <span class="fu">NAIVE</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb514-15"><a href="the-forecasters-toolbox.html#cb514-15" tabindex="-1"></a>  )</span>
<span id="cb514-16"><a href="the-forecasters-toolbox.html#cb514-16" tabindex="-1"></a><span class="co"># Produce forecasts for the trading days in January 2016</span></span>
<span id="cb514-17"><a href="the-forecasters-toolbox.html#cb514-17" tabindex="-1"></a>google_jan_2016 <span class="ot">&lt;-</span> google_stock <span class="sc">|&gt;</span></span>
<span id="cb514-18"><a href="the-forecasters-toolbox.html#cb514-18" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">yearmonth</span>(Date) <span class="sc">==</span> <span class="fu">yearmonth</span>(<span class="st">&quot;2016 Jan&quot;</span>))</span>
<span id="cb514-19"><a href="the-forecasters-toolbox.html#cb514-19" tabindex="-1"></a>google_fc <span class="ot">&lt;-</span> google_fit <span class="sc">|&gt;</span></span>
<span id="cb514-20"><a href="the-forecasters-toolbox.html#cb514-20" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">new_data =</span> google_jan_2016)</span>
<span id="cb514-21"><a href="the-forecasters-toolbox.html#cb514-21" tabindex="-1"></a><span class="co"># Plot the forecasts</span></span>
<span id="cb514-22"><a href="the-forecasters-toolbox.html#cb514-22" tabindex="-1"></a>google_fc <span class="sc">|&gt;</span></span>
<span id="cb514-23"><a href="the-forecasters-toolbox.html#cb514-23" tabindex="-1"></a>  <span class="fu">autoplot</span>(google_2015, <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb514-24"><a href="the-forecasters-toolbox.html#cb514-24" tabindex="-1"></a>  <span class="fu">autolayer</span>(google_jan_2016, Close, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb514-25"><a href="the-forecasters-toolbox.html#cb514-25" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;$US&quot;</span>,</span>
<span id="cb514-26"><a href="the-forecasters-toolbox.html#cb514-26" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Google daily closing stock prices&quot;</span>,</span>
<span id="cb514-27"><a href="the-forecasters-toolbox.html#cb514-27" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;(Jan 2015 - Jan 2016)&quot;</span>) <span class="sc">+</span></span>
<span id="cb514-28"><a href="the-forecasters-toolbox.html#cb514-28" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&quot;Forecast&quot;</span>))</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-19-1.png" width="672" /></p>
<blockquote>
<p>Sometimes one of these simple methods will be the best forecasting method available; but in many cases, these methods will serve as benchmarks rather than the method of choice. That is, any forecasting methods we develop will be compared to these simple methods to ensure that the new method is better than these simple alternatives. If not, the new method is not worth considering.</p>
</blockquote>
</div>
</div>
<div id="fitted-values-and-residuals" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Fitted values and residuals<a href="the-forecasters-toolbox.html#fitted-values-and-residuals" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/residuals.html">The source of the section</a></p>
<div id="fitted-values" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Fitted values<a href="the-forecasters-toolbox.html#fitted-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><span class="math inline">\(\hat y_{t|t-1}\)</span> is the forecast of <span class="math inline">\(y_t\)</span> based on observations <span class="math inline">\(y_1, ..., y_{t-1}\)</span></li>
<li>We call these <strong>fitted values</strong></li>
<li>Sometimes drop the subscript: <span class="math inline">\(\hat y_t \equiv \hat y_{t|t-1}\)</span></li>
<li>Fitted values are often not true forecasts because any parameters involved in the forecasting method are estimated using all available observations in the time series, including future observations.</li>
</ul>
</div>
<div id="residuals" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Residuals<a href="the-forecasters-toolbox.html#residuals" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Residuals in forecasting is difference between observed value and its fitted value: <span class="math inline">\(e_t = y_t - \hat y_{t|t-1}\)</span></li>
<li>If a transformation has been used in the model, then it is often useful to look at residuals on the transformed scale.</li>
</ul>
<p><strong>Assumptions:</strong></p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(\{e_t\}\)</span> uncorrelated. If they aren’t, then information left in residuals that should be used in computing forecasts.</li>
<li><span class="math inline">\(\{e_t\}\)</span> have mean zero. If they don’t, then forecast are biased and we need to adjust for this, which are called <strong>innovation residuals</strong>. If the residuals have mean <span class="math inline">\(m\)</span>, then simply add <span class="math inline">\(m\)</span> to all forecasts.</li>
</ol>
<p><strong>Useful properties:</strong> (for distributions &amp; prediction intervals)</p>
<ol start="3" style="list-style-type: decimal">
<li><span class="math inline">\(\{e_t\}\)</span> (innovation residuals) have constant variance <strong>“homoscedasticity”</strong></li>
<li><span class="math inline">\(\{e_t\}\)</span> are normally distributed</li>
</ol>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="the-forecasters-toolbox.html#cb515-1" tabindex="-1"></a><span class="co"># to get residuals</span></span>
<span id="cb515-2"><a href="the-forecasters-toolbox.html#cb515-2" tabindex="-1"></a><span class="fu">augment</span>(beer_fit)</span></code></pre></div>
<pre><code>## # A tsibble: 240 x 6 [1Q]
## # Key:       .model [4]
##    .model Quarter  Beer .fitted .resid .innov
##    &lt;chr&gt;    &lt;qtr&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 Mean   1992 Q1   443    436.   6.55   6.55
##  2 Mean   1992 Q2   410    436. -26.4  -26.4 
##  3 Mean   1992 Q3   420    436. -16.4  -16.4 
##  4 Mean   1992 Q4   532    436.  95.6   95.6 
##  5 Mean   1993 Q1   433    436.  -3.45  -3.45
##  6 Mean   1993 Q2   421    436. -15.4  -15.4 
##  7 Mean   1993 Q3   410    436. -26.4  -26.4 
##  8 Mean   1993 Q4   512    436.  75.6   75.6 
##  9 Mean   1994 Q1   449    436.  12.6   12.6 
## 10 Mean   1994 Q2   381    436. -55.4  -55.4 
## # ℹ 230 more rows</code></pre>
<ul>
<li><code>.fitted</code> contains the fitted values;</li>
<li><code>.resid</code> contains the residuals;</li>
<li><code>.innov</code> contains the “innovation residuals” which, in this case, are identical to the regular residuals.</li>
</ul>
<blockquote>
<p>Residuals are useful in checking whether a model has adequately captured the information in the data. For this purpose, we use innovation residuals. If patterns are observable in the innovation residuals, the model can probably be improved.</p>
</blockquote>
</div>
</div>
<div id="residual-diagnostics" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Residual diagnostics<a href="the-forecasters-toolbox.html#residual-diagnostics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/diagnostics.html">The source of the section</a></p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="the-forecasters-toolbox.html#cb517-1" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb517-2"><a href="the-forecasters-toolbox.html#cb517-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Close)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-21-1.png" width="672" /></p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="the-forecasters-toolbox.html#cb518-1" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb518-2"><a href="the-forecasters-toolbox.html#cb518-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb518-3"><a href="the-forecasters-toolbox.html#cb518-3" tabindex="-1"></a>  <span class="fu">augment</span>()</span></code></pre></div>
<pre><code>## # A tsibble: 1,258 x 7 [1]
## # Key:       Symbol, .model [1]
##    Symbol .model       traiding_day Close .fitted .resid .innov
##    &lt;chr&gt;  &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 FB     NAIVE(Close)            1  54.7    NA   NA     NA    
##  2 FB     NAIVE(Close)            2  54.6    54.7 -0.150 -0.150
##  3 FB     NAIVE(Close)            3  57.2    54.6  2.64   2.64 
##  4 FB     NAIVE(Close)            4  57.9    57.2  0.720  0.720
##  5 FB     NAIVE(Close)            5  58.2    57.9  0.310  0.310
##  6 FB     NAIVE(Close)            6  57.2    58.2 -1.01  -1.01 
##  7 FB     NAIVE(Close)            7  57.9    57.2  0.720  0.720
##  8 FB     NAIVE(Close)            8  55.9    57.9 -2.03  -2.03 
##  9 FB     NAIVE(Close)            9  57.7    55.9  1.83   1.83 
## 10 FB     NAIVE(Close)           10  57.6    57.7 -0.140 -0.140
## # ℹ 1,248 more rows</code></pre>
<ul>
<li><code>.fitted</code> = <span class="math inline">\(\hat y_{t|t-1}\)</span></li>
<li><code>.resid</code> = <span class="math inline">\(e_t\)</span></li>
</ul>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="the-forecasters-toolbox.html#cb520-1" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb520-2"><a href="the-forecasters-toolbox.html#cb520-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb520-3"><a href="the-forecasters-toolbox.html#cb520-3" tabindex="-1"></a>  <span class="fu">augment</span>() <span class="sc">|&gt;</span></span>
<span id="cb520-4"><a href="the-forecasters-toolbox.html#cb520-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> traiding_day)) <span class="sc">+</span></span>
<span id="cb520-5"><a href="the-forecasters-toolbox.html#cb520-5" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Close, <span class="at">color =</span> <span class="st">&#39;Actual Data&#39;</span>)) <span class="sc">+</span></span>
<span id="cb520-6"><a href="the-forecasters-toolbox.html#cb520-6" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .fitted, <span class="at">color =</span> <span class="st">&#39;Fitted&#39;</span>))</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-23-1.png" width="672" /></p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="the-forecasters-toolbox.html#cb522-1" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb522-2"><a href="the-forecasters-toolbox.html#cb522-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb522-3"><a href="the-forecasters-toolbox.html#cb522-3" tabindex="-1"></a>  <span class="fu">augment</span>() <span class="sc">|&gt;</span></span>
<span id="cb522-4"><a href="the-forecasters-toolbox.html#cb522-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Close, <span class="at">y =</span> .fitted)) <span class="sc">+</span></span>
<span id="cb522-5"><a href="the-forecasters-toolbox.html#cb522-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-24-1.png" width="672" /></p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="the-forecasters-toolbox.html#cb524-1" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb524-2"><a href="the-forecasters-toolbox.html#cb524-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb524-3"><a href="the-forecasters-toolbox.html#cb524-3" tabindex="-1"></a>  <span class="fu">augment</span>() <span class="sc">|&gt;</span></span>
<span id="cb524-4"><a href="the-forecasters-toolbox.html#cb524-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(.resid)</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-25-1.png" width="672" /></p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="the-forecasters-toolbox.html#cb526-1" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb526-2"><a href="the-forecasters-toolbox.html#cb526-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb526-3"><a href="the-forecasters-toolbox.html#cb526-3" tabindex="-1"></a>  <span class="fu">augment</span>() <span class="sc">|&gt;</span></span>
<span id="cb526-4"><a href="the-forecasters-toolbox.html#cb526-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .resid)) <span class="sc">+</span></span>
<span id="cb526-5"><a href="the-forecasters-toolbox.html#cb526-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">150</span>) <span class="sc">+</span></span>
<span id="cb526-6"><a href="the-forecasters-toolbox.html#cb526-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Histogram of residuals&#39;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-26-1.png" width="672" /></p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="the-forecasters-toolbox.html#cb528-1" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb528-2"><a href="the-forecasters-toolbox.html#cb528-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb528-3"><a href="the-forecasters-toolbox.html#cb528-3" tabindex="-1"></a>  <span class="fu">augment</span>() <span class="sc">|&gt;</span></span>
<span id="cb528-4"><a href="the-forecasters-toolbox.html#cb528-4" tabindex="-1"></a>  <span class="fu">ACF</span>(.resid) <span class="sc">|&gt;</span></span>
<span id="cb528-5"><a href="the-forecasters-toolbox.html#cb528-5" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span></span>
<span id="cb528-6"><a href="the-forecasters-toolbox.html#cb528-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;ACF of residuals&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-27-1.png" width="672" /></p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="the-forecasters-toolbox.html#cb529-1" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb529-2"><a href="the-forecasters-toolbox.html#cb529-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb529-3"><a href="the-forecasters-toolbox.html#cb529-3" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-28-1.png" width="672" /></p>
<div id="acf-of-residuals" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> ACF of residuals<a href="the-forecasters-toolbox.html#acf-of-residuals" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>We assume that the residuals are white noise (uncorrelated, mean zero, constant variance). If they aren’t, then there is information left in the residuals that should be used in computing forecasts.</li>
<li>So a standard residuals diagnostic is to check the ACF of the residuals of a forecasting method.</li>
<li>We expect these to look like white noise.</li>
</ul>
</div>
<div id="example-forecasting-google-daily-closing-stock-prices" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Example: Forecasting Google daily closing stock prices<a href="the-forecasters-toolbox.html#example-forecasting-google-daily-closing-stock-prices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>PLot the data.</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="the-forecasters-toolbox.html#cb533-1" tabindex="-1"></a>google_2015 <span class="sc">|&gt;</span></span>
<span id="cb533-2"><a href="the-forecasters-toolbox.html#cb533-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Close) <span class="sc">+</span></span>
<span id="cb533-3"><a href="the-forecasters-toolbox.html#cb533-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;$US&#39;</span>,</span>
<span id="cb533-4"><a href="the-forecasters-toolbox.html#cb533-4" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Google daily closing stock prices in 2015&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-29-1.png" width="672" /></p>
<p>Check the residuals from forecasting the series using the naive method.</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="the-forecasters-toolbox.html#cb534-1" tabindex="-1"></a><span class="co"># fit the model and get the residuals</span></span>
<span id="cb534-2"><a href="the-forecasters-toolbox.html#cb534-2" tabindex="-1"></a>aug <span class="ot">&lt;-</span> google_2015 <span class="sc">|&gt;</span></span>
<span id="cb534-3"><a href="the-forecasters-toolbox.html#cb534-3" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb534-4"><a href="the-forecasters-toolbox.html#cb534-4" tabindex="-1"></a>  <span class="fu">augment</span>() </span>
<span id="cb534-5"><a href="the-forecasters-toolbox.html#cb534-5" tabindex="-1"></a></span>
<span id="cb534-6"><a href="the-forecasters-toolbox.html#cb534-6" tabindex="-1"></a>aug</span></code></pre></div>
<pre><code>## # A tsibble: 252 x 7 [1]
## # Key:       Symbol, .model [1]
##    Symbol .model         day Close .fitted  .resid  .innov
##    &lt;chr&gt;  &lt;chr&gt;        &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 GOOG   NAIVE(Close)     1  522.     NA   NA      NA    
##  2 GOOG   NAIVE(Close)     2  511.    522. -10.9   -10.9  
##  3 GOOG   NAIVE(Close)     3  499.    511. -11.8   -11.8  
##  4 GOOG   NAIVE(Close)     4  498.    499.  -0.855  -0.855
##  5 GOOG   NAIVE(Close)     5  500.    498.   1.57    1.57 
##  6 GOOG   NAIVE(Close)     6  493.    500.  -6.47   -6.47 
##  7 GOOG   NAIVE(Close)     7  490.    493.  -3.60   -3.60 
##  8 GOOG   NAIVE(Close)     8  493.    490.   3.61    3.61 
##  9 GOOG   NAIVE(Close)     9  498.    493.   4.66    4.66 
## 10 GOOG   NAIVE(Close)    10  499.    498.   0.915   0.915
## # ℹ 242 more rows</code></pre>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="the-forecasters-toolbox.html#cb536-1" tabindex="-1"></a>aug<span class="sc">|&gt;</span></span>
<span id="cb536-2"><a href="the-forecasters-toolbox.html#cb536-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(.innov) <span class="sc">+</span></span>
<span id="cb536-3"><a href="the-forecasters-toolbox.html#cb536-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;$US&#39;</span>,</span>
<span id="cb536-4"><a href="the-forecasters-toolbox.html#cb536-4" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Residuals of the naive method&#39;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-31-1.png" width="672" /></p>
<p>Check the residuals distribution.</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="the-forecasters-toolbox.html#cb538-1" tabindex="-1"></a>aug <span class="sc">|&gt;</span></span>
<span id="cb538-2"><a href="the-forecasters-toolbox.html#cb538-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .innov)) <span class="sc">+</span></span>
<span id="cb538-3"><a href="the-forecasters-toolbox.html#cb538-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb538-4"><a href="the-forecasters-toolbox.html#cb538-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Histogram of residuals&#39;</span>)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-32-1.png" width="672" /></p>
<p>Check the ACF of residuals.</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="the-forecasters-toolbox.html#cb541-1" tabindex="-1"></a>aug <span class="sc">|&gt;</span></span>
<span id="cb541-2"><a href="the-forecasters-toolbox.html#cb541-2" tabindex="-1"></a>  <span class="fu">ACF</span>(.innov) <span class="sc">|&gt;</span></span>
<span id="cb541-3"><a href="the-forecasters-toolbox.html#cb541-3" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span></span>
<span id="cb541-4"><a href="the-forecasters-toolbox.html#cb541-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Residuals from the naive method&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-33-1.png" width="672" /></p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="the-forecasters-toolbox.html#cb542-1" tabindex="-1"></a><span class="fu">mean</span>(aug<span class="sc">$</span>.innov, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 0.9439931</code></pre>
<p>A convenient shortcut for producing these residuals diagnostic graphs is the <code>qq_tsresiduals()</code> function.</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="the-forecasters-toolbox.html#cb544-1" tabindex="-1"></a>google_2015 <span class="sc">|&gt;</span></span>
<span id="cb544-2"><a href="the-forecasters-toolbox.html#cb544-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb544-3"><a href="the-forecasters-toolbox.html#cb544-3" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-35-1.png" width="672" /></p>
</div>
<div id="portmanteau-tests-for-autocorrelation" class="section level3 hasAnchor" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Portmanteau tests for autocorrelation<a href="the-forecasters-toolbox.html#portmanteau-tests-for-autocorrelation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="math inline">\(r_k\)</span> = autocorrelation of residual at lag <span class="math inline">\(k\)</span></p>
<p><strong>Box-Pierce test</strong></p>
<p><span class="math display">\[
Q = T\sum_{k=1}^l r_k^2
\]</span> where <span class="math inline">\(l\)</span> is max lag being considered and <span class="math inline">\(T\)</span> is number of observations.</p>
<ul>
<li>If each <span class="math inline">\(r_k\)</span> close to zero, <span class="math inline">\(Q\)</span> will be <strong>small</strong></li>
<li>If each <span class="math inline">\(r_k\)</span> values large (positive or negative), <span class="math inline">\(Q\)</span> will be <strong>large</strong></li>
</ul>
<p><strong>Ljung-Box test</strong></p>
<p><span class="math display">\[
Q^* = T(T+2)\sum_{k=1}^l(T-k)^{-1}r_k^2
\]</span> where <span class="math inline">\(l\)</span> is max lag being considered and <span class="math inline">\(T\)</span> is number of observations.</p>
<ul>
<li><span class="math inline">\(l\)</span> = 10 for non-seasonal data, <span class="math inline">\(l = 2m\)</span> for seasonal data (where <span class="math inline">\(m\)</span> is seasonal period). However, the test is not good when <span class="math inline">\(l\)</span> is large, so if these values are larger than T/5, then use <span class="math inline">\(l = T/5\)</span></li>
<li>Better performance, especially in small sample</li>
</ul>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="the-forecasters-toolbox.html#cb548-1" tabindex="-1"></a><span class="co"># if data are WN, Q* has X^2 distribution with l degree of freedom</span></span>
<span id="cb548-2"><a href="the-forecasters-toolbox.html#cb548-2" tabindex="-1"></a><span class="co"># lag = l</span></span>
<span id="cb548-3"><a href="the-forecasters-toolbox.html#cb548-3" tabindex="-1"></a></span>
<span id="cb548-4"><a href="the-forecasters-toolbox.html#cb548-4" tabindex="-1"></a>fb_stock <span class="sc">|&gt;</span></span>
<span id="cb548-5"><a href="the-forecasters-toolbox.html#cb548-5" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb548-6"><a href="the-forecasters-toolbox.html#cb548-6" tabindex="-1"></a>  <span class="fu">augment</span>() <span class="sc">|&gt;</span></span>
<span id="cb548-7"><a href="the-forecasters-toolbox.html#cb548-7" tabindex="-1"></a>  <span class="fu">features</span>(.resid, ljung_box, <span class="at">lag=</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   Symbol .model       lb_stat lb_pvalue
##   &lt;chr&gt;  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;
## 1 FB     NAIVE(Close)    12.1     0.276</code></pre>
<p><code>lb_stat</code> = <span class="math inline">\(Q^*\)</span>, <code>lb_pvalue</code> &lt; 0.05 - reject <span class="math inline">\(H_0\)</span></p>
<p>Large values of <span class="math inline">\(Q^∗\)</span> suggest that the autocorrelations <strong>do not come</strong> from a white noise series.</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="the-forecasters-toolbox.html#cb550-1" tabindex="-1"></a>aug <span class="sc">|&gt;</span> <span class="fu">features</span>(.innov, box_pierce, <span class="at">lag =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   Symbol .model       bp_stat bp_pvalue
##   &lt;chr&gt;  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;
## 1 GOOG   NAIVE(Close)    7.74     0.654</code></pre>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="the-forecasters-toolbox.html#cb552-1" tabindex="-1"></a>aug <span class="sc">|&gt;</span> <span class="fu">features</span>(.innov, ljung_box, <span class="at">lag =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   Symbol .model       lb_stat lb_pvalue
##   &lt;chr&gt;  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;
## 1 GOOG   NAIVE(Close)    7.91     0.637</code></pre>
<ul>
<li><strong>H0</strong>: There are no autocorrelation of residuals</li>
<li><strong>H1</strong>: There are autocorrelation of residuals</li>
</ul>
<p>For both <span class="math inline">\(Q\)</span> and <span class="math inline">\(Q^∗\)</span>, the results are not significant (i.e., the p-values are relatively large). Thus, we can conclude that the residuals are not distinguishable from a white noise series.</p>
</div>
</div>
<div id="distributional-forecasts-and-prediction-intervals" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Distributional forecasts and prediction intervals<a href="the-forecasters-toolbox.html#distributional-forecasts-and-prediction-intervals" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/prediction-intervals.html">The source of the section</a></p>
<div id="forecast-distributions" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Forecast distributions<a href="the-forecasters-toolbox.html#forecast-distributions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>Most time series models produce normally distributed forecasts — that is, we assume that the distribution of possible future values follows a normal distribution.</p>
</blockquote>
</div>
<div id="prediction-intervals" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Prediction intervals<a href="the-forecasters-toolbox.html#prediction-intervals" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Predistion interval</strong> is an interval within which <span class="math inline">\(y_t\)</span> is expected to lie with a specified probability. Assuming that distribution of future observations is normal, a 95% prediction interval for <span class="math inline">\(h\)</span>-step forecast is <span class="math display">\[
\hat y_{T+h|T} \pm 1.96\hat \sigma_h
\]</span> where <span class="math inline">\(\hat \sigma_h\)</span> is an estimate of the standard deviation of the <span class="math inline">\(h\)</span>-step forecast distribution.</p>
<p><span class="math display">\[
\hat y_{T+h|T} \pm c\hat \sigma_h
\]</span> Usually 80% intervals and 95% intervals are used.</p>
<table>
<thead>
<tr class="header">
<th>Probability</th>
<th>Multiplier (<span class="math inline">\(c\)</span>)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>50%</td>
<td>0.67</td>
</tr>
<tr class="even">
<td>55%</td>
<td>0.76</td>
</tr>
<tr class="odd">
<td>60%</td>
<td>0.84</td>
</tr>
<tr class="even">
<td>65%</td>
<td>0.93</td>
</tr>
<tr class="odd">
<td>70%</td>
<td>1.04</td>
</tr>
<tr class="even">
<td>75%</td>
<td>1.15</td>
</tr>
<tr class="odd">
<td>80%</td>
<td>1.28</td>
</tr>
<tr class="even">
<td>85%</td>
<td>1.44</td>
</tr>
<tr class="odd">
<td>90%</td>
<td>1.64</td>
</tr>
<tr class="even">
<td>95%</td>
<td>1.96</td>
</tr>
<tr class="odd">
<td>96%</td>
<td>2.05</td>
</tr>
<tr class="even">
<td>97%</td>
<td>2.17</td>
</tr>
<tr class="odd">
<td>98%</td>
<td>2.33</td>
</tr>
<tr class="even">
<td>99%</td>
<td>2.58</td>
</tr>
</tbody>
</table>
<blockquote>
<p>The value of prediction intervals is that they express the uncertainty in the forecasts.</p>
</blockquote>
</div>
<div id="one-step-prediction-intervals" class="section level3 hasAnchor" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> One-step prediction intervals<a href="the-forecasters-toolbox.html#one-step-prediction-intervals" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One step forecasting:</p>
<p><span class="math display">\[
\hat \sigma = \sqrt {\frac 1 {T-K-M}\sum_{t=1}^T e_t^2}
\]</span> where</p>
<ul>
<li><span class="math inline">\(K\)</span> is the number of parameters estimated in the forecast method</li>
<li><span class="math inline">\(M\)</span> is the number of missing values in the residuals</li>
<li><span class="math inline">\(T\)</span> is the number of observations</li>
</ul>
</div>
<div id="multi-step-prediction-intervals" class="section level3 hasAnchor" number="5.5.4">
<h3><span class="header-section-number">5.5.4</span> Multi-step prediction intervals<a href="the-forecasters-toolbox.html#multi-step-prediction-intervals" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>The further ahead we forecast, the more uncertainty is associated with the forecast, and thus the wider the prediction intervals. Assuming that the residuals are uncorrelated.</p>
</blockquote>
</div>
<div id="benchmark-methods" class="section level3 hasAnchor" number="5.5.5">
<h3><span class="header-section-number">5.5.5</span> Benchmark methods<a href="the-forecasters-toolbox.html#benchmark-methods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Multi-step forecast standard deviation for the four benchmark methods, where <span class="math inline">\(\sigma\)</span> is the residual standard deviation, <span class="math inline">\(m\)</span> is the seasonal period, and $k% is the integer part of<br />
<span class="math inline">\((h−1)/m\)</span> (i.e., the number of complete years in the forecast period prior to time <span class="math inline">\(T + h\)</span>).</p>
<table>
<colgroup>
<col width="25%" />
<col width="74%" />
</colgroup>
<thead>
<tr class="header">
<th>Benchmark method</th>
<th><span class="math inline">\(h\)</span>-step forecast standard deviation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mean</td>
<td><span class="math inline">\(\hat \sigma_h = \hat \sigma \sqrt {1+1/T}\)</span></td>
</tr>
<tr class="even">
<td>Naïve</td>
<td><span class="math inline">\(\hat \sigma_h = \hat \sigma \sqrt h\)</span></td>
</tr>
<tr class="odd">
<td>Seasonal Naïve</td>
<td><span class="math inline">\(\hat \sigma_h = \hat \sigma \sqrt {k+1}\)</span></td>
</tr>
<tr class="even">
<td>Drift</td>
<td><span class="math inline">\(\hat \sigma_h = \hat \sigma \sqrt {h(1+h/(T-1)))}\)</span></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="the-forecasters-toolbox.html#cb554-1" tabindex="-1"></a>google_2015 <span class="sc">|&gt;</span></span>
<span id="cb554-2"><a href="the-forecasters-toolbox.html#cb554-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb554-3"><a href="the-forecasters-toolbox.html#cb554-3" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb554-4"><a href="the-forecasters-toolbox.html#cb554-4" tabindex="-1"></a>  <span class="fu">hilo</span>()</span></code></pre></div>
<pre><code>## # A tsibble: 10 x 7 [1]
## # Key:       Symbol, .model [1]
##    Symbol .model         day        Close .mean                  `80%`                  `95%`
##    &lt;chr&gt;  &lt;chr&gt;        &lt;dbl&gt;       &lt;dist&gt; &lt;dbl&gt;                 &lt;hilo&gt;                 &lt;hilo&gt;
##  1 GOOG   NAIVE(Close)   253  N(759, 125)  759. [744.5400, 773.2200]80 [736.9488, 780.8112]95
##  2 GOOG   NAIVE(Close)   254  N(759, 250)  759. [738.6001, 779.1599]80 [727.8646, 789.8954]95
##  3 GOOG   NAIVE(Close)   255  N(759, 376)  759. [734.0423, 783.7177]80 [720.8941, 796.8659]95
##  4 GOOG   NAIVE(Close)   256  N(759, 501)  759. [730.1999, 787.5601]80 [715.0176, 802.7424]95
##  5 GOOG   NAIVE(Close)   257  N(759, 626)  759. [726.8147, 790.9453]80 [709.8404, 807.9196]95
##  6 GOOG   NAIVE(Close)   258  N(759, 751)  759. [723.7543, 794.0058]80 [705.1598, 812.6002]95
##  7 GOOG   NAIVE(Close)   259  N(759, 876)  759. [720.9399, 796.8202]80 [700.8556, 816.9045]95
##  8 GOOG   NAIVE(Close)   260 N(759, 1002)  759. [718.3203, 799.4397]80 [696.8493, 820.9108]95
##  9 GOOG   NAIVE(Close)   261 N(759, 1127)  759. [715.8599, 801.9001]80 [693.0865, 824.6735]95
## 10 GOOG   NAIVE(Close)   262 N(759, 1252)  759. [713.5329, 804.2272]80 [689.5275, 828.2325]95</code></pre>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="the-forecasters-toolbox.html#cb556-1" tabindex="-1"></a>google_2015 <span class="sc">|&gt;</span></span>
<span id="cb556-2"><a href="the-forecasters-toolbox.html#cb556-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb556-3"><a href="the-forecasters-toolbox.html#cb556-3" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb556-4"><a href="the-forecasters-toolbox.html#cb556-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(google_2015) <span class="sc">+</span></span>
<span id="cb556-5"><a href="the-forecasters-toolbox.html#cb556-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Google daily closing stock price&quot;</span>, <span class="at">y=</span><span class="st">&quot;$US&quot;</span> )</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-40-1.png" width="672" /></p>
</div>
<div id="prediction-intervals-from-bootstrapped-residuals" class="section level3 hasAnchor" number="5.5.6">
<h3><span class="header-section-number">5.5.6</span> Prediction intervals from bootstrapped residuals<a href="the-forecasters-toolbox.html#prediction-intervals-from-bootstrapped-residuals" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="the-forecasters-toolbox.html#cb557-1" tabindex="-1"></a>fit <span class="ot">&lt;-</span> google_2015 <span class="sc">|&gt;</span></span>
<span id="cb557-2"><a href="the-forecasters-toolbox.html#cb557-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Close)) </span>
<span id="cb557-3"><a href="the-forecasters-toolbox.html#cb557-3" tabindex="-1"></a></span>
<span id="cb557-4"><a href="the-forecasters-toolbox.html#cb557-4" tabindex="-1"></a>sim <span class="ot">&lt;-</span> fit <span class="sc">|&gt;</span></span>
<span id="cb557-5"><a href="the-forecasters-toolbox.html#cb557-5" tabindex="-1"></a>  <span class="fu">generate</span>(<span class="at">h=</span><span class="dv">30</span>, <span class="at">times =</span> <span class="dv">5</span>, <span class="at">bootstrap =</span> <span class="cn">TRUE</span>)</span>
<span id="cb557-6"><a href="the-forecasters-toolbox.html#cb557-6" tabindex="-1"></a></span>
<span id="cb557-7"><a href="the-forecasters-toolbox.html#cb557-7" tabindex="-1"></a>sim</span></code></pre></div>
<pre><code>## # A tsibble: 150 x 6 [1]
## # Key:       Symbol, .model, .rep [5]
##    Symbol .model       .rep    day   .innov  .sim
##    &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 GOOG   NAIVE(Close) 1       253  0.00602  759.
##  2 GOOG   NAIVE(Close) 1       254 -9.60     749.
##  3 GOOG   NAIVE(Close) 1       255 -1.07     748.
##  4 GOOG   NAIVE(Close) 1       256  6.53     755.
##  5 GOOG   NAIVE(Close) 1       257 -7.92     747.
##  6 GOOG   NAIVE(Close) 1       258 -2.04     745.
##  7 GOOG   NAIVE(Close) 1       259  2.91     748.
##  8 GOOG   NAIVE(Close) 1       260  3.51     751.
##  9 GOOG   NAIVE(Close) 1       261 -4.31     747.
## 10 GOOG   NAIVE(Close) 1       262  2.50     749.
## # ℹ 140 more rows</code></pre>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="the-forecasters-toolbox.html#cb559-1" tabindex="-1"></a>google_2015 <span class="sc">|&gt;</span></span>
<span id="cb559-2"><a href="the-forecasters-toolbox.html#cb559-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> day)) <span class="sc">+</span></span>
<span id="cb559-3"><a href="the-forecasters-toolbox.html#cb559-3" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Close)) <span class="sc">+</span></span>
<span id="cb559-4"><a href="the-forecasters-toolbox.html#cb559-4" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .sim, <span class="at">colour =</span> <span class="fu">as.factor</span>(.rep)),</span>
<span id="cb559-5"><a href="the-forecasters-toolbox.html#cb559-5" tabindex="-1"></a>    <span class="at">data =</span> sim) <span class="sc">+</span></span>
<span id="cb559-6"><a href="the-forecasters-toolbox.html#cb559-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Google daily closing stock price&quot;</span>, <span class="at">y=</span><span class="st">&quot;$US&quot;</span> ) <span class="sc">+</span></span>
<span id="cb559-7"><a href="the-forecasters-toolbox.html#cb559-7" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-42-1.png" width="672" /></p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="the-forecasters-toolbox.html#cb560-1" tabindex="-1"></a><span class="co"># bootstrapped prediction intervals</span></span>
<span id="cb560-2"><a href="the-forecasters-toolbox.html#cb560-2" tabindex="-1"></a></span>
<span id="cb560-3"><a href="the-forecasters-toolbox.html#cb560-3" tabindex="-1"></a>fc <span class="ot">&lt;-</span> fit <span class="sc">|&gt;</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">30</span>, <span class="at">bootstrap =</span> <span class="cn">TRUE</span>, <span class="at">times =</span> <span class="dv">1000</span>)</span>
<span id="cb560-4"><a href="the-forecasters-toolbox.html#cb560-4" tabindex="-1"></a>fc</span></code></pre></div>
<pre><code>## # A fable: 30 x 5 [1]
## # Key:     Symbol, .model [1]
##    Symbol .model         day        Close .mean
##    &lt;chr&gt;  &lt;chr&gt;        &lt;dbl&gt;       &lt;dist&gt; &lt;dbl&gt;
##  1 GOOG   NAIVE(Close)   253 sample[1000]  759.
##  2 GOOG   NAIVE(Close)   254 sample[1000]  758.
##  3 GOOG   NAIVE(Close)   255 sample[1000]  759.
##  4 GOOG   NAIVE(Close)   256 sample[1000]  759.
##  5 GOOG   NAIVE(Close)   257 sample[1000]  759.
##  6 GOOG   NAIVE(Close)   258 sample[1000]  759.
##  7 GOOG   NAIVE(Close)   259 sample[1000]  759.
##  8 GOOG   NAIVE(Close)   260 sample[1000]  760.
##  9 GOOG   NAIVE(Close)   261 sample[1000]  760.
## 10 GOOG   NAIVE(Close)   262 sample[1000]  760.
## # ℹ 20 more rows</code></pre>
<p>The bootstrapped prediction intervals are not symmetric.</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="the-forecasters-toolbox.html#cb562-1" tabindex="-1"></a><span class="fu">autoplot</span>(fc, google_2015) <span class="sc">+</span></span>
<span id="cb562-2"><a href="the-forecasters-toolbox.html#cb562-2" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Google daily closing stock price&quot;</span>, <span class="at">y=</span><span class="st">&quot;$US&quot;</span> )</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-44-1.png" width="672" /></p>
</div>
</div>
<div id="forecasting-using-transformations" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Forecasting using transformations<a href="the-forecasters-toolbox.html#forecasting-using-transformations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/ftransformations.html">The source of the section</a></p>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="the-forecasters-toolbox.html#cb563-1" tabindex="-1"></a>fc <span class="ot">&lt;-</span> prices <span class="sc">|&gt;</span></span>
<span id="cb563-2"><a href="the-forecasters-toolbox.html#cb563-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(eggs)) <span class="sc">|&gt;</span></span>
<span id="cb563-3"><a href="the-forecasters-toolbox.html#cb563-3" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(<span class="fu">log</span>(eggs) <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">|&gt;</span></span>
<span id="cb563-4"><a href="the-forecasters-toolbox.html#cb563-4" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">50</span>) <span class="sc">|&gt;</span></span>
<span id="cb563-5"><a href="the-forecasters-toolbox.html#cb563-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">.median =</span> <span class="fu">median</span>(eggs))</span>
<span id="cb563-6"><a href="the-forecasters-toolbox.html#cb563-6" tabindex="-1"></a></span>
<span id="cb563-7"><a href="the-forecasters-toolbox.html#cb563-7" tabindex="-1"></a>fc <span class="sc">|&gt;</span></span>
<span id="cb563-8"><a href="the-forecasters-toolbox.html#cb563-8" tabindex="-1"></a>  <span class="fu">autoplot</span>(prices <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(eggs)), <span class="at">level =</span> <span class="dv">80</span>) <span class="sc">+</span></span>
<span id="cb563-9"><a href="the-forecasters-toolbox.html#cb563-9" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .median), <span class="at">data =</span> fc, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb563-10"><a href="the-forecasters-toolbox.html#cb563-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Annual egg prices&quot;</span>,</span>
<span id="cb563-11"><a href="the-forecasters-toolbox.html#cb563-11" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;$US (in cents adjusted for inflation) &quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-45-1.png" width="672" /></p>
</div>
<div id="forecasting-with-decomposition" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Forecasting with decomposition<a href="the-forecasters-toolbox.html#forecasting-with-decomposition" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/forecasting-decomposition.html">The source of the section</a></p>
<table>
<colgroup>
<col width="24%" />
<col width="38%" />
<col width="36%" />
</colgroup>
<thead>
<tr class="header">
<th>Decomposition</th>
<th>Formula</th>
<th>Seasonal adjusted component</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Additive</td>
<td><span class="math inline">\(y_t =\hat S_t + \hat A_t\)</span></td>
<td><span class="math inline">\(\hat A_t = \hat T_t + \hat R_t\)</span></td>
</tr>
<tr class="even">
<td>Multiplicative</td>
<td><span class="math inline">\(y_t =\hat S_t \hat A_t\)</span></td>
<td><span class="math inline">\(\hat A_t = \hat T_t\hat R_t\)</span></td>
</tr>
</tbody>
</table>
<blockquote>
<p>To forecast a decomposed time series, we forecast the seasonal component, and the seasonally adjusted component separately. It is usually assumed that the seasonal component is unchanging, or changing extremely slowly.</p>
</blockquote>
<div id="example-employment-in-the-us-retail-sector-1" class="section level3 hasAnchor" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> Example: Employment in the US retail sector<a href="the-forecasters-toolbox.html#example-employment-in-the-us-retail-sector-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Plot the data.</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="the-forecasters-toolbox.html#cb564-1" tabindex="-1"></a>us_retail_employment <span class="ot">&lt;-</span> us_employment <span class="sc">|&gt;</span></span>
<span id="cb564-2"><a href="the-forecasters-toolbox.html#cb564-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Month) <span class="sc">&gt;=</span> <span class="dv">1990</span>, Title <span class="sc">==</span> <span class="st">&#39;Retail Trade&#39;</span>) </span>
<span id="cb564-3"><a href="the-forecasters-toolbox.html#cb564-3" tabindex="-1"></a></span>
<span id="cb564-4"><a href="the-forecasters-toolbox.html#cb564-4" tabindex="-1"></a>us_retail_employment <span class="sc">|&gt;</span></span>
<span id="cb564-5"><a href="the-forecasters-toolbox.html#cb564-5" tabindex="-1"></a>  <span class="fu">autoplot</span>(Employed)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-46-1.png" width="672" /></p>
<p>Decompose the time series.</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="the-forecasters-toolbox.html#cb565-1" tabindex="-1"></a>dcmp <span class="ot">&lt;-</span> us_retail_employment <span class="sc">|&gt;</span></span>
<span id="cb565-2"><a href="the-forecasters-toolbox.html#cb565-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">STL</span>(Employed <span class="sc">~</span> <span class="fu">trend</span>(<span class="at">window =</span> <span class="dv">7</span>), <span class="at">robust =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb565-3"><a href="the-forecasters-toolbox.html#cb565-3" tabindex="-1"></a>  <span class="fu">components</span>()</span>
<span id="cb565-4"><a href="the-forecasters-toolbox.html#cb565-4" tabindex="-1"></a></span>
<span id="cb565-5"><a href="the-forecasters-toolbox.html#cb565-5" tabindex="-1"></a>dcmp <span class="sc">|&gt;</span></span>
<span id="cb565-6"><a href="the-forecasters-toolbox.html#cb565-6" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-47-1.png" width="672" /></p>
<p>Fit the model.</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="the-forecasters-toolbox.html#cb566-1" tabindex="-1"></a>dcmp <span class="sc">|&gt;</span></span>
<span id="cb566-2"><a href="the-forecasters-toolbox.html#cb566-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>.model) <span class="sc">|&gt;</span></span>
<span id="cb566-3"><a href="the-forecasters-toolbox.html#cb566-3" tabindex="-1"></a>  <span class="fu">autoplot</span>(season_adjust)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-48-1.png" width="672" /></p>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="the-forecasters-toolbox.html#cb567-1" tabindex="-1"></a>dcmp <span class="ot">&lt;-</span> dcmp <span class="sc">|&gt;</span></span>
<span id="cb567-2"><a href="the-forecasters-toolbox.html#cb567-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>.model)</span>
<span id="cb567-3"><a href="the-forecasters-toolbox.html#cb567-3" tabindex="-1"></a></span>
<span id="cb567-4"><a href="the-forecasters-toolbox.html#cb567-4" tabindex="-1"></a>dcmp <span class="sc">|&gt;</span></span>
<span id="cb567-5"><a href="the-forecasters-toolbox.html#cb567-5" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(season_adjust)) <span class="sc">|&gt;</span></span>
<span id="cb567-6"><a href="the-forecasters-toolbox.html#cb567-6" tabindex="-1"></a>  <span class="fu">forecast</span>() <span class="sc">|&gt;</span></span>
<span id="cb567-7"><a href="the-forecasters-toolbox.html#cb567-7" tabindex="-1"></a>  <span class="fu">autoplot</span>(dcmp) <span class="sc">+</span></span>
<span id="cb567-8"><a href="the-forecasters-toolbox.html#cb567-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Number of people&quot;</span>,</span>
<span id="cb567-9"><a href="the-forecasters-toolbox.html#cb567-9" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;US retail employment&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-49-1.png" width="672" /></p>
<p>The other way.</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="the-forecasters-toolbox.html#cb568-1" tabindex="-1"></a>fit_dcmp <span class="ot">&lt;-</span> us_retail_employment <span class="sc">|&gt;</span></span>
<span id="cb568-2"><a href="the-forecasters-toolbox.html#cb568-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">stlf =</span> <span class="fu">decomposition_model</span>(</span>
<span id="cb568-3"><a href="the-forecasters-toolbox.html#cb568-3" tabindex="-1"></a>    <span class="fu">STL</span>(Employed <span class="sc">~</span> <span class="fu">trend</span>(<span class="at">window =</span> <span class="dv">7</span>), <span class="at">robust =</span> <span class="cn">TRUE</span>),</span>
<span id="cb568-4"><a href="the-forecasters-toolbox.html#cb568-4" tabindex="-1"></a>    <span class="fu">NAIVE</span>(season_adjust)</span>
<span id="cb568-5"><a href="the-forecasters-toolbox.html#cb568-5" tabindex="-1"></a>  ))</span>
<span id="cb568-6"><a href="the-forecasters-toolbox.html#cb568-6" tabindex="-1"></a>fit_dcmp <span class="sc">|&gt;</span></span>
<span id="cb568-7"><a href="the-forecasters-toolbox.html#cb568-7" tabindex="-1"></a>  <span class="fu">forecast</span>() <span class="sc">|&gt;</span></span>
<span id="cb568-8"><a href="the-forecasters-toolbox.html#cb568-8" tabindex="-1"></a>  <span class="fu">autoplot</span>(us_retail_employment)<span class="sc">+</span></span>
<span id="cb568-9"><a href="the-forecasters-toolbox.html#cb568-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Number of people&quot;</span>,</span>
<span id="cb568-10"><a href="the-forecasters-toolbox.html#cb568-10" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;US retail employment&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-50-1.png" width="672" /></p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="the-forecasters-toolbox.html#cb569-1" tabindex="-1"></a>fit_dcmp <span class="sc">|&gt;</span> <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 12 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 12 rows containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 12 rows containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-51-1.png" width="672" /></p>
</div>
</div>
<div id="evaluating-point-forecast-accuracy" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Evaluating point forecast accuracy<a href="the-forecasters-toolbox.html#evaluating-point-forecast-accuracy" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/accuracy.html">The source of the section</a></p>
<div id="training-and-test-sets" class="section level3 hasAnchor" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Training and test sets<a href="the-forecasters-toolbox.html#training-and-test-sets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>!(alt text)[<a href="https://otexts.com/fpp3/fpp_files/figure-html/traintest-1.png" class="uri">https://otexts.com/fpp3/fpp_files/figure-html/traintest-1.png</a>]</p>
<p>Training set - 80% Test set - 20%</p>
<ul>
<li>The test set should ideally be at least as large as the maximum forecast horizon required</li>
<li>A model which fits the training data wel will not necessarily forecast well</li>
<li>A perfect fit can always be obtained by using a model with enough parameters</li>
<li>Over-fitting a model to data is just bad as falling to idetify a systematic patterns in the data</li>
<li>The test set must not be used for any aspect of model development of calculation of forecasts</li>
<li>Forecast accuracy is based only on the test data</li>
</ul>
</div>
<div id="functions-to-subset-a-time-series" class="section level3 hasAnchor" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> Functions to subset a time series<a href="the-forecasters-toolbox.html#functions-to-subset-a-time-series" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="the-forecasters-toolbox.html#cb573-1" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&gt;=</span> <span class="dv">1995</span>)</span></code></pre></div>
<pre><code>## # A tsibble: 62 x 7 [1Q]
##    Quarter  Beer Tobacco Bricks Cement Electricity   Gas
##      &lt;qtr&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 1995 Q1   426    4714    430   1626       41768   131
##  2 1995 Q2   408    3939    457   1703       43686   167
##  3 1995 Q3   416    6137    417   1733       46022   181
##  4 1995 Q4   520    4739    370   1545       42800   145
##  5 1996 Q1   409    4275    310   1526       43661   133
##  6 1996 Q2   398    5239    358   1593       44707   162
##  7 1996 Q3   398    6293    379   1706       46326   184
##  8 1996 Q4   507    5575    369   1699       43346   146
##  9 1997 Q1   432    4802    330   1511       43938   135
## 10 1997 Q2   398    5523    390   1785       45828   171
## # ℹ 52 more rows</code></pre>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="the-forecasters-toolbox.html#cb575-1" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span> <span class="fu">filter_index</span>(<span class="st">&#39;1995 Q1&#39;</span> <span class="sc">~</span> .)</span></code></pre></div>
<pre><code>## # A tsibble: 62 x 7 [1Q]
##    Quarter  Beer Tobacco Bricks Cement Electricity   Gas
##      &lt;qtr&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 1995 Q1   426    4714    430   1626       41768   131
##  2 1995 Q2   408    3939    457   1703       43686   167
##  3 1995 Q3   416    6137    417   1733       46022   181
##  4 1995 Q4   520    4739    370   1545       42800   145
##  5 1996 Q1   409    4275    310   1526       43661   133
##  6 1996 Q2   398    5239    358   1593       44707   162
##  7 1996 Q3   398    6293    379   1706       46326   184
##  8 1996 Q4   507    5575    369   1699       43346   146
##  9 1997 Q1   432    4802    330   1511       43938   135
## 10 1997 Q2   398    5523    390   1785       45828   171
## # ℹ 52 more rows</code></pre>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="the-forecasters-toolbox.html#cb577-1" tabindex="-1"></a><span class="co"># extract 5 years - 20 quarters</span></span>
<span id="cb577-2"><a href="the-forecasters-toolbox.html#cb577-2" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="fu">n</span>() <span class="sc">-</span> <span class="dv">19</span><span class="sc">:</span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tsibble: 20 x 7 [1Q]
##    Quarter  Beer Tobacco Bricks Cement Electricity   Gas
##      &lt;qtr&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 2005 Q3   408      NA     NA   2340       56043   221
##  2 2005 Q4   482      NA     NA   2265       54992   180
##  3 2006 Q1   438      NA     NA   2027       57112   171
##  4 2006 Q2   386      NA     NA   2278       57157   224
##  5 2006 Q3   405      NA     NA   2427       58400   233
##  6 2006 Q4   491      NA     NA   2451       56249   192
##  7 2007 Q1   427      NA     NA   2140       56244   187
##  8 2007 Q2   383      NA     NA   2362       55036   234
##  9 2007 Q3   394      NA     NA   2536       59806   245
## 10 2007 Q4   473      NA     NA   2562       56411   205
## 11 2008 Q1   420      NA     NA   2183       59118   194
## 12 2008 Q2   390      NA     NA   2558       56660   229
## 13 2008 Q3   410      NA     NA   2612       64067   249
## 14 2008 Q4   488      NA     NA   2373       59045   203
## 15 2009 Q1   415      NA     NA   1963       58368   196
## 16 2009 Q2   398      NA     NA   2160       57471   238
## 17 2009 Q3   419      NA     NA   2325       58394   252
## 18 2009 Q4   488      NA     NA   2273       57336   210
## 19 2010 Q1   414      NA     NA   1904       58309   205
## 20 2010 Q2   374      NA     NA   2401       58041   236</code></pre>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="the-forecasters-toolbox.html#cb579-1" tabindex="-1"></a><span class="co"># subset the first year of data from each time series in the data</span></span>
<span id="cb579-2"><a href="the-forecasters-toolbox.html#cb579-2" tabindex="-1"></a>aus_retail <span class="sc">|&gt;</span></span>
<span id="cb579-3"><a href="the-forecasters-toolbox.html#cb579-3" tabindex="-1"></a>  <span class="fu">group_by</span>(State, Industry) <span class="sc">|&gt;</span></span>
<span id="cb579-4"><a href="the-forecasters-toolbox.html#cb579-4" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>)</span></code></pre></div>
<pre><code>## # A tsibble: 1,824 x 5 [1M]
## # Key:       State, Industry [152]
## # Groups:    State, Industry [152]
##    State                        Industry                                 `Series ID`    Month Turnover
##    &lt;chr&gt;                        &lt;chr&gt;                                    &lt;chr&gt;          &lt;mth&gt;    &lt;dbl&gt;
##  1 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Apr      4.4
##  2 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 May      3.4
##  3 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Jun      3.6
##  4 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Jul      4  
##  5 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Aug      3.6
##  6 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Sep      4.2
##  7 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Oct      4.8
##  8 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Nov      5.4
##  9 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Dec      6.9
## 10 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1983 Jan      3.8
## # ℹ 1,814 more rows</code></pre>
</div>
<div id="forecast-errors" class="section level3 hasAnchor" number="5.8.3">
<h3><span class="header-section-number">5.8.3</span> Forecast errors<a href="the-forecasters-toolbox.html#forecast-errors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A forecast error is the difference between an observed value and its forecast.</p>
<p><span class="math display">\[
e_{T+h} = y_{T+h} - \hat y_{T+h|T}
\]</span> &gt; <strong>Note!</strong> The forecast errors are different from residuals in two ways. First, residuals are calculated on the training set while forecast errors are calculated on the test set. Second, residuals are based on one-step forecasts while forecast errors can involve multi-step forecasts.</p>
</div>
<div id="scale-dependent-errors" class="section level3 hasAnchor" number="5.8.4">
<h3><span class="header-section-number">5.8.4</span> Scale-dependent errors<a href="the-forecasters-toolbox.html#scale-dependent-errors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Scale-dependent measures:</p>
<ul>
<li>Mean absolute error: <span class="math inline">\(MAE = mean(|e_t|)\)</span></li>
<li>Root mean squared error: <span class="math inline">\(RMSE = \sqrt {mean(e_t^2)}\)</span></li>
</ul>
</div>
<div id="percentage-errors" class="section level3 hasAnchor" number="5.8.5">
<h3><span class="header-section-number">5.8.5</span> Percentage errors<a href="the-forecasters-toolbox.html#percentage-errors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Unit-free forecast perfirmance measure:</p>
<ul>
<li>Percentage error <span class="math inline">\(p_t = 100e_t/y_t\)</span></li>
<li>Mean absolute percentage error: <span class="math inline">\(MAPE = mean(|p_t|)\)</span></li>
</ul>
<blockquote>
<p><strong>Note!</strong> Measures based on percentage errors have the disadvantage of being infinite or undefined if <span class="math inline">\(y_t = 0\)</span> for any <span class="math inline">\(t\)</span> in the period of interest, and having extreme values if any <span class="math inline">\(y_t\)</span> is close to zero.</p>
</blockquote>
<p>Symmetric mean absolute percentage error: <span class="math inline">\(sMAPE = mean(200|y_t - \hat y_t|/(y_y + \hat y_t))\)</span></p>
</div>
<div id="scaled-errors" class="section level3 hasAnchor" number="5.8.6">
<h3><span class="header-section-number">5.8.6</span> Scaled errors<a href="the-forecasters-toolbox.html#scaled-errors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Scaled error (non-seasonal): <span class="math display">\[
q_j = \frac {e_j} {\frac {1} {T-1}\sum_{t=2}^T|y_t - y_{t-1}|}
\]</span></p>
<ul>
<li>A scaled error is <strong>less than one</strong> if it arises from a better forecast than the average one-step naïve forecast computed on the training data.</li>
<li>A scaled error is <strong>greater than one</strong> if the forecast is worse than the average one-step naïve forecast computed on the training data.</li>
</ul>
<p>Scaled error (seasonal): <span class="math display">\[
q_j = \frac {e_j} {\frac {1} {T-m}\sum_{t=m+1}^T|y_t - y_{t-m}|}
\]</span></p>
<p>Mean absolute squared error: <span class="math inline">\(MASE = mean(|q_j|)\)</span></p>
<p>Root mean squared scaled error: <span class="math inline">\(RMSSE = \sqrt{mean(q_t^2)}\)</span>,<br />
where <span class="math inline">\(q_j^2 = \frac {e_j^2} {\frac {1} {T-m}\sum_{t=m+1}^T(y_t - y_{t-m})^2}\)</span><br />
and <span class="math inline">\(m = 1\)</span> for non-seasonal data.</p>
</div>
<div id="examples" class="section level3 hasAnchor" number="5.8.7">
<h3><span class="header-section-number">5.8.7</span> Examples<a href="the-forecasters-toolbox.html#examples" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="the-forecasters-toolbox.html#cb581-1" tabindex="-1"></a>recent_production <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb581-2"><a href="the-forecasters-toolbox.html#cb581-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&gt;=</span> <span class="dv">1992</span>)</span>
<span id="cb581-3"><a href="the-forecasters-toolbox.html#cb581-3" tabindex="-1"></a></span>
<span id="cb581-4"><a href="the-forecasters-toolbox.html#cb581-4" tabindex="-1"></a>beer_train <span class="ot">&lt;-</span> recent_production <span class="sc">|&gt;</span></span>
<span id="cb581-5"><a href="the-forecasters-toolbox.html#cb581-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&lt;=</span> <span class="dv">2007</span>)</span>
<span id="cb581-6"><a href="the-forecasters-toolbox.html#cb581-6" tabindex="-1"></a></span>
<span id="cb581-7"><a href="the-forecasters-toolbox.html#cb581-7" tabindex="-1"></a>beer_fit <span class="ot">&lt;-</span> beer_train <span class="sc">|&gt;</span></span>
<span id="cb581-8"><a href="the-forecasters-toolbox.html#cb581-8" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb581-9"><a href="the-forecasters-toolbox.html#cb581-9" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Beer),</span>
<span id="cb581-10"><a href="the-forecasters-toolbox.html#cb581-10" tabindex="-1"></a>    <span class="st">`</span><span class="at">Naïve</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">NAIVE</span>(Beer),</span>
<span id="cb581-11"><a href="the-forecasters-toolbox.html#cb581-11" tabindex="-1"></a>    <span class="st">`</span><span class="at">Seasonal Naïve</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">SNAIVE</span>(Beer),</span>
<span id="cb581-12"><a href="the-forecasters-toolbox.html#cb581-12" tabindex="-1"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Beer <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb581-13"><a href="the-forecasters-toolbox.html#cb581-13" tabindex="-1"></a>  )</span>
<span id="cb581-14"><a href="the-forecasters-toolbox.html#cb581-14" tabindex="-1"></a></span>
<span id="cb581-15"><a href="the-forecasters-toolbox.html#cb581-15" tabindex="-1"></a>beer_fc <span class="ot">&lt;-</span> beer_fit <span class="sc">|&gt;</span></span>
<span id="cb581-16"><a href="the-forecasters-toolbox.html#cb581-16" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">10</span>)</span>
<span id="cb581-17"><a href="the-forecasters-toolbox.html#cb581-17" tabindex="-1"></a></span>
<span id="cb581-18"><a href="the-forecasters-toolbox.html#cb581-18" tabindex="-1"></a>beer_fc <span class="sc">|&gt;</span></span>
<span id="cb581-19"><a href="the-forecasters-toolbox.html#cb581-19" tabindex="-1"></a>  <span class="fu">autoplot</span>(</span>
<span id="cb581-20"><a href="the-forecasters-toolbox.html#cb581-20" tabindex="-1"></a>    aus_production <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&gt;=</span> <span class="dv">1992</span>),</span>
<span id="cb581-21"><a href="the-forecasters-toolbox.html#cb581-21" tabindex="-1"></a>    <span class="at">level =</span> <span class="cn">NULL</span></span>
<span id="cb581-22"><a href="the-forecasters-toolbox.html#cb581-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb581-23"><a href="the-forecasters-toolbox.html#cb581-23" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb581-24"><a href="the-forecasters-toolbox.html#cb581-24" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Megalitres&quot;</span>,</span>
<span id="cb581-25"><a href="the-forecasters-toolbox.html#cb581-25" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Forecasts for quarterly beer production&quot;</span></span>
<span id="cb581-26"><a href="the-forecasters-toolbox.html#cb581-26" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb581-27"><a href="the-forecasters-toolbox.html#cb581-27" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&quot;Forecast&quot;</span>))</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-56-1.png" width="672" /></p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="the-forecasters-toolbox.html#cb582-1" tabindex="-1"></a><span class="fu">accuracy</span>(beer_fc, recent_production)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 10
##   .model         .type    ME  RMSE   MAE    MPE  MAPE  MASE RMSSE    ACF1
##   &lt;chr&gt;          &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1 Drift          Test  -54.0  64.9  58.9 -13.6  14.6  4.12  3.87  -0.0741
## 2 Mean           Test  -13.8  38.4  34.8  -3.97  8.28 2.44  2.29  -0.0691
## 3 Naïve          Test  -51.4  62.7  57.4 -13.0  14.2  4.01  3.74  -0.0691
## 4 Seasonal Naïve Test    5.2  14.3  13.4   1.15  3.17 0.937 0.853  0.132</code></pre>
<p><strong>Non-seasonal example</strong></p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="the-forecasters-toolbox.html#cb584-1" tabindex="-1"></a>google_fit <span class="ot">&lt;-</span> google_2015 <span class="sc">|&gt;</span></span>
<span id="cb584-2"><a href="the-forecasters-toolbox.html#cb584-2" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb584-3"><a href="the-forecasters-toolbox.html#cb584-3" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Close),</span>
<span id="cb584-4"><a href="the-forecasters-toolbox.html#cb584-4" tabindex="-1"></a>    <span class="st">`</span><span class="at">Naïve</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">NAIVE</span>(Close),</span>
<span id="cb584-5"><a href="the-forecasters-toolbox.html#cb584-5" tabindex="-1"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb584-6"><a href="the-forecasters-toolbox.html#cb584-6" tabindex="-1"></a>  )</span>
<span id="cb584-7"><a href="the-forecasters-toolbox.html#cb584-7" tabindex="-1"></a></span>
<span id="cb584-8"><a href="the-forecasters-toolbox.html#cb584-8" tabindex="-1"></a>google_fc <span class="ot">&lt;-</span> google_fit <span class="sc">|&gt;</span></span>
<span id="cb584-9"><a href="the-forecasters-toolbox.html#cb584-9" tabindex="-1"></a>  <span class="fu">forecast</span>(google_jan_2016)</span></code></pre></div>
<div class="sourceCode" id="cb585"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb585-1"><a href="the-forecasters-toolbox.html#cb585-1" tabindex="-1"></a>google_fc <span class="sc">|&gt;</span></span>
<span id="cb585-2"><a href="the-forecasters-toolbox.html#cb585-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(<span class="fu">bind_rows</span>(google_2015, google_jan_2016),</span>
<span id="cb585-3"><a href="the-forecasters-toolbox.html#cb585-3" tabindex="-1"></a>    <span class="at">level =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb585-4"><a href="the-forecasters-toolbox.html#cb585-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;$US&quot;</span>,</span>
<span id="cb585-5"><a href="the-forecasters-toolbox.html#cb585-5" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Google closing stock prices from Jan 2015&quot;</span>) <span class="sc">+</span></span>
<span id="cb585-6"><a href="the-forecasters-toolbox.html#cb585-6" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">&quot;Forecast&quot;</span>))</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-59-1.png" width="672" /></p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="the-forecasters-toolbox.html#cb586-1" tabindex="-1"></a><span class="fu">accuracy</span>(google_fc, google_stock)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 11
##   .model Symbol .type    ME  RMSE   MAE   MPE  MAPE  MASE RMSSE  ACF1
##   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Drift  GOOG   Test  -49.8  53.1  49.8 -6.99  6.99  6.99  4.74 0.604
## 2 Mean   GOOG   Test  117.  118.  117.  16.2  16.2  16.4  10.5  0.496
## 3 Naïve  GOOG   Test  -40.4  43.4  40.4 -5.67  5.67  5.67  3.88 0.496</code></pre>
</div>
</div>
<div id="evaluating-distributional-forecast-accuracy" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> Evaluating distributional forecast accuracy<a href="the-forecasters-toolbox.html#evaluating-distributional-forecast-accuracy" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/distaccuracy.html">The source of the section</a></p>
<div id="quantile-scores" class="section level3 hasAnchor" number="5.9.1">
<h3><span class="header-section-number">5.9.1</span> Quantile scores<a href="the-forecasters-toolbox.html#quantile-scores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Get the full time series.</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="the-forecasters-toolbox.html#cb588-1" tabindex="-1"></a><span class="co"># time series</span></span>
<span id="cb588-2"><a href="the-forecasters-toolbox.html#cb588-2" tabindex="-1"></a>google_stock <span class="ot">&lt;-</span> gafa_stock <span class="sc">|&gt;</span></span>
<span id="cb588-3"><a href="the-forecasters-toolbox.html#cb588-3" tabindex="-1"></a>  <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">&#39;GOOG&#39;</span>, <span class="fu">year</span>(Date) <span class="sc">&gt;=</span> <span class="dv">2015</span>) <span class="sc">|&gt;</span></span>
<span id="cb588-4"><a href="the-forecasters-toolbox.html#cb588-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">day =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb588-5"><a href="the-forecasters-toolbox.html#cb588-5" tabindex="-1"></a>  <span class="fu">update_tsibble</span>(<span class="at">index =</span> day, <span class="at">regular =</span> <span class="cn">TRUE</span>)</span>
<span id="cb588-6"><a href="the-forecasters-toolbox.html#cb588-6" tabindex="-1"></a></span>
<span id="cb588-7"><a href="the-forecasters-toolbox.html#cb588-7" tabindex="-1"></a>google_stock</span></code></pre></div>
<pre><code>## # A tsibble: 1,006 x 9 [1]
## # Key:       Symbol [1]
##    Symbol Date        Open  High   Low Close Adj_Close  Volume   day
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
##  1 GOOG   2015-01-02  526.  528.  521.  522.      522. 1447600     1
##  2 GOOG   2015-01-05  520.  521.  510.  511.      511. 2059800     2
##  3 GOOG   2015-01-06  512.  513.  498.  499.      499. 2899900     3
##  4 GOOG   2015-01-07  504.  504.  497.  498.      498. 2065100     4
##  5 GOOG   2015-01-08  495.  501.  488.  500.      500. 3353600     5
##  6 GOOG   2015-01-09  502.  502.  492.  493.      493. 2069400     6
##  7 GOOG   2015-01-12  492.  493.  485.  490.      490. 2322400     7
##  8 GOOG   2015-01-13  496.  500.  490.  493.      493. 2370500     8
##  9 GOOG   2015-01-14  492.  500.  490.  498.      498. 2235700     9
## 10 GOOG   2015-01-15  503.  503.  495.  499.      499. 2715800    10
## # ℹ 996 more rows</code></pre>
<p>SPlit the data into the training set and test set.</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="the-forecasters-toolbox.html#cb590-1" tabindex="-1"></a><span class="co"># training set</span></span>
<span id="cb590-2"><a href="the-forecasters-toolbox.html#cb590-2" tabindex="-1"></a>google_2015 <span class="ot">&lt;-</span> google_stock <span class="sc">|&gt;</span></span>
<span id="cb590-3"><a href="the-forecasters-toolbox.html#cb590-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Date) <span class="sc">==</span> <span class="dv">2015</span>)</span>
<span id="cb590-4"><a href="the-forecasters-toolbox.html#cb590-4" tabindex="-1"></a></span>
<span id="cb590-5"><a href="the-forecasters-toolbox.html#cb590-5" tabindex="-1"></a>google_2015</span></code></pre></div>
<pre><code>## # A tsibble: 252 x 9 [1]
## # Key:       Symbol [1]
##    Symbol Date        Open  High   Low Close Adj_Close  Volume   day
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
##  1 GOOG   2015-01-02  526.  528.  521.  522.      522. 1447600     1
##  2 GOOG   2015-01-05  520.  521.  510.  511.      511. 2059800     2
##  3 GOOG   2015-01-06  512.  513.  498.  499.      499. 2899900     3
##  4 GOOG   2015-01-07  504.  504.  497.  498.      498. 2065100     4
##  5 GOOG   2015-01-08  495.  501.  488.  500.      500. 3353600     5
##  6 GOOG   2015-01-09  502.  502.  492.  493.      493. 2069400     6
##  7 GOOG   2015-01-12  492.  493.  485.  490.      490. 2322400     7
##  8 GOOG   2015-01-13  496.  500.  490.  493.      493. 2370500     8
##  9 GOOG   2015-01-14  492.  500.  490.  498.      498. 2235700     9
## 10 GOOG   2015-01-15  503.  503.  495.  499.      499. 2715800    10
## # ℹ 242 more rows</code></pre>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="the-forecasters-toolbox.html#cb592-1" tabindex="-1"></a><span class="co">#test set</span></span>
<span id="cb592-2"><a href="the-forecasters-toolbox.html#cb592-2" tabindex="-1"></a>google_jan_2016 <span class="ot">&lt;-</span> google_stock <span class="sc">|&gt;</span></span>
<span id="cb592-3"><a href="the-forecasters-toolbox.html#cb592-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">yearmonth</span>(Date) <span class="sc">==</span> <span class="fu">yearmonth</span>(<span class="st">&#39;2016 Jan&#39;</span>))</span>
<span id="cb592-4"><a href="the-forecasters-toolbox.html#cb592-4" tabindex="-1"></a></span>
<span id="cb592-5"><a href="the-forecasters-toolbox.html#cb592-5" tabindex="-1"></a>google_jan_2016</span></code></pre></div>
<pre><code>## # A tsibble: 19 x 9 [1]
## # Key:       Symbol [1]
##    Symbol Date        Open  High   Low Close Adj_Close  Volume   day
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
##  1 GOOG   2016-01-04  743   744.  731.  742.      742. 3272800   253
##  2 GOOG   2016-01-05  746.  752   739.  743.      743. 1950700   254
##  3 GOOG   2016-01-06  730   747.  729.  744.      744. 1947000   255
##  4 GOOG   2016-01-07  730.  738.  719.  726.      726. 2963700   256
##  5 GOOG   2016-01-08  731.  733.  713   714.      714. 2450900   257
##  6 GOOG   2016-01-11  717.  719.  704.  716.      716. 2089300   258
##  7 GOOG   2016-01-12  722.  729.  717.  726.      726. 2024500   259
##  8 GOOG   2016-01-13  731.  735.  699.  701.      701. 2501700   260
##  9 GOOG   2016-01-14  705.  722.  689.  715.      715. 2225800   261
## 10 GOOG   2016-01-15  692.  707.  685.  694.      694. 3608100   262
## 11 GOOG   2016-01-19  703.  710.  693.  702.      702. 2268100   263
## 12 GOOG   2016-01-20  689.  707.  673.  698.      698. 3445000   264
## 13 GOOG   2016-01-21  702.  719.  694.  707.      707. 2412200   265
## 14 GOOG   2016-01-22  724.  728.  720.  725.      725. 2011800   266
## 15 GOOG   2016-01-25  724.  730.  710.  712.      712. 1711700   267
## 16 GOOG   2016-01-26  714.  718.  706.  713.      713. 1324300   268
## 17 GOOG   2016-01-27  714.  718.  694.  700.      700. 2194200   269
## 18 GOOG   2016-01-28  722.  734.  712.  731.      731. 2676400   270
## 19 GOOG   2016-01-29  732.  745.  727.  743.      743. 3474300   271</code></pre>
<p>Fit the benchmark models.</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb594-1"><a href="the-forecasters-toolbox.html#cb594-1" tabindex="-1"></a><span class="co"># fit the models on trainig set</span></span>
<span id="cb594-2"><a href="the-forecasters-toolbox.html#cb594-2" tabindex="-1"></a>google_fit <span class="ot">&lt;-</span> google_2015 <span class="sc">|&gt;</span></span>
<span id="cb594-3"><a href="the-forecasters-toolbox.html#cb594-3" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb594-4"><a href="the-forecasters-toolbox.html#cb594-4" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Close),</span>
<span id="cb594-5"><a href="the-forecasters-toolbox.html#cb594-5" tabindex="-1"></a>    <span class="at">Naive =</span> <span class="fu">NAIVE</span>(Close),</span>
<span id="cb594-6"><a href="the-forecasters-toolbox.html#cb594-6" tabindex="-1"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb594-7"><a href="the-forecasters-toolbox.html#cb594-7" tabindex="-1"></a>  )</span>
<span id="cb594-8"><a href="the-forecasters-toolbox.html#cb594-8" tabindex="-1"></a></span>
<span id="cb594-9"><a href="the-forecasters-toolbox.html#cb594-9" tabindex="-1"></a>google_fit</span></code></pre></div>
<pre><code>## # A mable: 1 x 4
## # Key:     Symbol [1]
##   Symbol    Mean   Naive         Drift
##   &lt;chr&gt;  &lt;model&gt; &lt;model&gt;       &lt;model&gt;
## 1 GOOG    &lt;MEAN&gt; &lt;NAIVE&gt; &lt;RW w/ drift&gt;</code></pre>
<p>Make the forecasts on the test set.</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb596-1"><a href="the-forecasters-toolbox.html#cb596-1" tabindex="-1"></a>google_fc <span class="ot">&lt;-</span> google_fit <span class="sc">|&gt;</span></span>
<span id="cb596-2"><a href="the-forecasters-toolbox.html#cb596-2" tabindex="-1"></a>  <span class="fu">forecast</span>(google_jan_2016)</span>
<span id="cb596-3"><a href="the-forecasters-toolbox.html#cb596-3" tabindex="-1"></a></span>
<span id="cb596-4"><a href="the-forecasters-toolbox.html#cb596-4" tabindex="-1"></a>google_fc</span></code></pre></div>
<pre><code>## # A fable: 57 x 11 [1]
## # Key:     Symbol, .model [3]
##    Symbol .model   day        Close .mean Date        Open  High   Low Adj_Close  Volume
##    &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt;       &lt;dist&gt; &lt;dbl&gt; &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
##  1 GOOG   Mean     253 N(602, 6766)  602. 2016-01-04  743   744.  731.      742. 3272800
##  2 GOOG   Mean     254 N(602, 6766)  602. 2016-01-05  746.  752   739.      743. 1950700
##  3 GOOG   Mean     255 N(602, 6766)  602. 2016-01-06  730   747.  729.      744. 1947000
##  4 GOOG   Mean     256 N(602, 6766)  602. 2016-01-07  730.  738.  719.      726. 2963700
##  5 GOOG   Mean     257 N(602, 6766)  602. 2016-01-08  731.  733.  713       714. 2450900
##  6 GOOG   Mean     258 N(602, 6766)  602. 2016-01-11  717.  719.  704.      716. 2089300
##  7 GOOG   Mean     259 N(602, 6766)  602. 2016-01-12  722.  729.  717.      726. 2024500
##  8 GOOG   Mean     260 N(602, 6766)  602. 2016-01-13  731.  735.  699.      701. 2501700
##  9 GOOG   Mean     261 N(602, 6766)  602. 2016-01-14  705.  722.  689.      715. 2225800
## 10 GOOG   Mean     262 N(602, 6766)  602. 2016-01-15  692.  707.  685.      694. 3608100
## # ℹ 47 more rows</code></pre>
<p>Plot the forecasts.</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="the-forecasters-toolbox.html#cb598-1" tabindex="-1"></a>google_fc <span class="sc">|&gt;</span></span>
<span id="cb598-2"><a href="the-forecasters-toolbox.html#cb598-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(<span class="fu">bind_rows</span>(google_2015, google_jan_2016)) <span class="sc">+</span></span>
<span id="cb598-3"><a href="the-forecasters-toolbox.html#cb598-3" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(.model)) <span class="sc">+</span></span>
<span id="cb598-4"><a href="the-forecasters-toolbox.html#cb598-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;$US&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Google closing stock prices&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-66-1.png" width="672" /></p>
<div class="sourceCode" id="cb599"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb599-1"><a href="the-forecasters-toolbox.html#cb599-1" tabindex="-1"></a>google_fc <span class="sc">|&gt;</span></span>
<span id="cb599-2"><a href="the-forecasters-toolbox.html#cb599-2" tabindex="-1"></a>  <span class="fu">filter</span>(.model <span class="sc">==</span> <span class="st">&quot;Naive&quot;</span>, Date <span class="sc">==</span> <span class="st">&quot;2016-01-04&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb599-3"><a href="the-forecasters-toolbox.html#cb599-3" tabindex="-1"></a>  <span class="fu">accuracy</span>(google_stock, <span class="fu">list</span>(<span class="at">qs=</span>quantile_score), <span class="at">probs=</span><span class="fl">0.10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   .model Symbol .type    qs
##   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
## 1 Naive  GOOG   Test   4.86</code></pre>
</div>
<div id="winkler-score" class="section level3 hasAnchor" number="5.9.2">
<h3><span class="header-section-number">5.9.2</span> Winkler Score<a href="the-forecasters-toolbox.html#winkler-score" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="the-forecasters-toolbox.html#cb601-1" tabindex="-1"></a>google_fc <span class="sc">|&gt;</span></span>
<span id="cb601-2"><a href="the-forecasters-toolbox.html#cb601-2" tabindex="-1"></a>  <span class="fu">filter</span>(.model <span class="sc">==</span> <span class="st">&quot;Naive&quot;</span>, Date <span class="sc">==</span> <span class="st">&quot;2016-01-04&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb601-3"><a href="the-forecasters-toolbox.html#cb601-3" tabindex="-1"></a>  <span class="fu">accuracy</span>(google_stock,</span>
<span id="cb601-4"><a href="the-forecasters-toolbox.html#cb601-4" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">winkler =</span> winkler_score), <span class="at">level =</span> <span class="dv">80</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   .model Symbol .type winkler
##   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;dbl&gt;
## 1 Naive  GOOG   Test     55.7</code></pre>
</div>
<div id="continuous-ranked-probability-score" class="section level3 hasAnchor" number="5.9.3">
<h3><span class="header-section-number">5.9.3</span> Continuous Ranked Probability Score<a href="the-forecasters-toolbox.html#continuous-ranked-probability-score" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb603"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb603-1"><a href="the-forecasters-toolbox.html#cb603-1" tabindex="-1"></a>google_fc <span class="sc">|&gt;</span></span>
<span id="cb603-2"><a href="the-forecasters-toolbox.html#cb603-2" tabindex="-1"></a>  <span class="fu">accuracy</span>(google_stock, <span class="fu">list</span>(<span class="at">crps =</span> CRPS))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   .model Symbol .type  crps
##   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;
## 1 Drift  GOOG   Test   33.5
## 2 Mean   GOOG   Test   76.7
## 3 Naive  GOOG   Test   26.5</code></pre>
</div>
<div id="scale-free-comparisons-using-skill-scores" class="section level3 hasAnchor" number="5.9.4">
<h3><span class="header-section-number">5.9.4</span> Scale-free comparisons using skill scores<a href="the-forecasters-toolbox.html#scale-free-comparisons-using-skill-scores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb605"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb605-1"><a href="the-forecasters-toolbox.html#cb605-1" tabindex="-1"></a>google_fc <span class="sc">|&gt;</span></span>
<span id="cb605-2"><a href="the-forecasters-toolbox.html#cb605-2" tabindex="-1"></a>  <span class="fu">accuracy</span>(google_stock, <span class="fu">list</span>(<span class="at">skill =</span> <span class="fu">skill_score</span>(CRPS)))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   .model Symbol .type  skill
##   &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt;
## 1 Drift  GOOG   Test  -0.266
## 2 Mean   GOOG   Test  -1.90 
## 3 Naive  GOOG   Test   0</code></pre>
</div>
</div>
<div id="time-series-cross-validation" class="section level2 hasAnchor" number="5.10">
<h2><span class="header-section-number">5.10</span> Time series cross-validation<a href="the-forecasters-toolbox.html#time-series-cross-validation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/tscv.html">The source of the section</a></p>
<div class="sourceCode" id="cb607"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb607-1"><a href="the-forecasters-toolbox.html#cb607-1" tabindex="-1"></a><span class="co"># Time series cross-validation accuracy</span></span>
<span id="cb607-2"><a href="the-forecasters-toolbox.html#cb607-2" tabindex="-1"></a>google_2015_tr <span class="ot">&lt;-</span> google_2015 <span class="sc">|&gt;</span></span>
<span id="cb607-3"><a href="the-forecasters-toolbox.html#cb607-3" tabindex="-1"></a>  <span class="fu">stretch_tsibble</span>(<span class="at">.init =</span> <span class="dv">3</span>, <span class="at">.step =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb607-4"><a href="the-forecasters-toolbox.html#cb607-4" tabindex="-1"></a>  <span class="fu">relocate</span>(Date, Symbol, .id)</span>
<span id="cb607-5"><a href="the-forecasters-toolbox.html#cb607-5" tabindex="-1"></a>google_2015_tr</span></code></pre></div>
<pre><code>## # A tsibble: 31,875 x 10 [1]
## # Key:       Symbol, .id [250]
##    Date       Symbol   .id  Open  High   Low Close Adj_Close  Volume   day
##    &lt;date&gt;     &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;
##  1 2015-01-02 GOOG       1  526.  528.  521.  522.      522. 1447600     1
##  2 2015-01-05 GOOG       1  520.  521.  510.  511.      511. 2059800     2
##  3 2015-01-06 GOOG       1  512.  513.  498.  499.      499. 2899900     3
##  4 2015-01-02 GOOG       2  526.  528.  521.  522.      522. 1447600     1
##  5 2015-01-05 GOOG       2  520.  521.  510.  511.      511. 2059800     2
##  6 2015-01-06 GOOG       2  512.  513.  498.  499.      499. 2899900     3
##  7 2015-01-07 GOOG       2  504.  504.  497.  498.      498. 2065100     4
##  8 2015-01-02 GOOG       3  526.  528.  521.  522.      522. 1447600     1
##  9 2015-01-05 GOOG       3  520.  521.  510.  511.      511. 2059800     2
## 10 2015-01-06 GOOG       3  512.  513.  498.  499.      499. 2899900     3
## # ℹ 31,865 more rows</code></pre>
<div class="sourceCode" id="cb609"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb609-1"><a href="the-forecasters-toolbox.html#cb609-1" tabindex="-1"></a><span class="co"># TSCV accuracy</span></span>
<span id="cb609-2"><a href="the-forecasters-toolbox.html#cb609-2" tabindex="-1"></a>google_2015_tr <span class="sc">|&gt;</span></span>
<span id="cb609-3"><a href="the-forecasters-toolbox.html#cb609-3" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">|&gt;</span></span>
<span id="cb609-4"><a href="the-forecasters-toolbox.html#cb609-4" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb609-5"><a href="the-forecasters-toolbox.html#cb609-5" tabindex="-1"></a>  <span class="fu">accuracy</span>(google_2015)</span></code></pre></div>
<pre><code>## Warning: The future dataset is incomplete, incomplete out-of-sample data will be treated as missing. 
## 1 observation is missing at 253</code></pre>
<pre><code>## # A tibble: 1 × 11
##   .model              Symbol .type    ME  RMSE   MAE   MPE  MAPE  MASE RMSSE   ACF1
##   &lt;chr&gt;               &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 RW(Close ~ drift()) GOOG   Test  0.726  11.3  7.26 0.112  1.19  1.02  1.01 0.0985</code></pre>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="the-forecasters-toolbox.html#cb612-1" tabindex="-1"></a><span class="co"># Training set accuracy</span></span>
<span id="cb612-2"><a href="the-forecasters-toolbox.html#cb612-2" tabindex="-1"></a>google_2015 <span class="sc">|&gt;</span></span>
<span id="cb612-3"><a href="the-forecasters-toolbox.html#cb612-3" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">|&gt;</span></span>
<span id="cb612-4"><a href="the-forecasters-toolbox.html#cb612-4" tabindex="-1"></a>  <span class="fu">accuracy</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 11
##   Symbol .model              .type           ME  RMSE   MAE     MPE  MAPE  MASE RMSSE   ACF1
##   &lt;chr&gt;  &lt;chr&gt;               &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 GOOG   RW(Close ~ drift()) Training -2.97e-14  11.1  7.16 -0.0267  1.18  1.00 0.996 0.0976</code></pre>
<div id="example-forecast-horizon-accuracy-with-cross-validation" class="section level3 hasAnchor" number="5.10.1">
<h3><span class="header-section-number">5.10.1</span> Example: Forecast horizon accuracy with cross-validation<a href="the-forecasters-toolbox.html#example-forecast-horizon-accuracy-with-cross-validation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb614-1"><a href="the-forecasters-toolbox.html#cb614-1" tabindex="-1"></a>google_2015_tr <span class="ot">&lt;-</span> google_2015 <span class="sc">|&gt;</span></span>
<span id="cb614-2"><a href="the-forecasters-toolbox.html#cb614-2" tabindex="-1"></a>  <span class="fu">stretch_tsibble</span>(<span class="at">.init =</span> <span class="dv">3</span>, <span class="at">.step =</span> <span class="dv">1</span>)</span>
<span id="cb614-3"><a href="the-forecasters-toolbox.html#cb614-3" tabindex="-1"></a>fc <span class="ot">&lt;-</span> google_2015_tr <span class="sc">|&gt;</span></span>
<span id="cb614-4"><a href="the-forecasters-toolbox.html#cb614-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">|&gt;</span></span>
<span id="cb614-5"><a href="the-forecasters-toolbox.html#cb614-5" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">8</span>) <span class="sc">|&gt;</span></span>
<span id="cb614-6"><a href="the-forecasters-toolbox.html#cb614-6" tabindex="-1"></a>  <span class="fu">group_by</span>(.id) <span class="sc">|&gt;</span></span>
<span id="cb614-7"><a href="the-forecasters-toolbox.html#cb614-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">h =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb614-8"><a href="the-forecasters-toolbox.html#cb614-8" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb614-9"><a href="the-forecasters-toolbox.html#cb614-9" tabindex="-1"></a>  <span class="fu">as_fable</span>(<span class="at">response =</span> <span class="st">&quot;Close&quot;</span>, <span class="at">distribution =</span> Close)</span>
<span id="cb614-10"><a href="the-forecasters-toolbox.html#cb614-10" tabindex="-1"></a>fc <span class="sc">|&gt;</span></span>
<span id="cb614-11"><a href="the-forecasters-toolbox.html#cb614-11" tabindex="-1"></a>  <span class="fu">accuracy</span>(google_2015, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;h&quot;</span>, <span class="st">&quot;.model&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb614-12"><a href="the-forecasters-toolbox.html#cb614-12" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> h, <span class="at">y =</span> RMSE)) <span class="sc">+</span></span>
<span id="cb614-13"><a href="the-forecasters-toolbox.html#cb614-13" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<pre><code>## Warning: The future dataset is incomplete, incomplete out-of-sample data will be treated as missing. 
## 8 observations are missing between 253 and 260</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-73-1.png" width="672" /></p>
</div>
</div>
<div id="exercises-1" class="section level2 hasAnchor" number="5.11">
<h2><span class="header-section-number">5.11</span> Exercises<a href="the-forecasters-toolbox.html#exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li></li>
</ol>
<ul>
<li>NAIVE(Y) - non-seasonal and non-trended data</li>
<li>SNAIVE(y) - strong seasonal component in the data</li>
<li>RW(y ~ drift()) - explicit trend in the data</li>
</ul>
<div class="sourceCode" id="cb616"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb616-1"><a href="the-forecasters-toolbox.html#cb616-1" tabindex="-1"></a><span class="co"># Australian Population (global_economy)</span></span>
<span id="cb616-2"><a href="the-forecasters-toolbox.html#cb616-2" tabindex="-1"></a>aus_population <span class="ot">&lt;-</span> global_economy <span class="sc">|&gt;</span></span>
<span id="cb616-3"><a href="the-forecasters-toolbox.html#cb616-3" tabindex="-1"></a>  <span class="fu">filter</span>(Code <span class="sc">==</span> <span class="st">&#39;AUS&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb616-4"><a href="the-forecasters-toolbox.html#cb616-4" tabindex="-1"></a>  <span class="fu">select</span>(Population)</span>
<span id="cb616-5"><a href="the-forecasters-toolbox.html#cb616-5" tabindex="-1"></a></span>
<span id="cb616-6"><a href="the-forecasters-toolbox.html#cb616-6" tabindex="-1"></a>aus_population <span class="sc">|&gt;</span></span>
<span id="cb616-7"><a href="the-forecasters-toolbox.html#cb616-7" tabindex="-1"></a>  <span class="fu">gg_tsdisplay</span>(<span class="at">plot_type =</span> <span class="st">&#39;scatter&#39;</span>)</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Population`</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-74-1.png" width="672" /></p>
<div class="sourceCode" id="cb618"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb618-1"><a href="the-forecasters-toolbox.html#cb618-1" tabindex="-1"></a><span class="co"># =&gt; There is annual data with strong trend and no seasonality =&gt; use drift method</span></span>
<span id="cb618-2"><a href="the-forecasters-toolbox.html#cb618-2" tabindex="-1"></a></span>
<span id="cb618-3"><a href="the-forecasters-toolbox.html#cb618-3" tabindex="-1"></a>aus_population <span class="sc">|&gt;</span></span>
<span id="cb618-4"><a href="the-forecasters-toolbox.html#cb618-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(Population <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">|&gt;</span></span>
<span id="cb618-5"><a href="the-forecasters-toolbox.html#cb618-5" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h=</span><span class="dv">4</span>) <span class="sc">|&gt;</span></span>
<span id="cb618-6"><a href="the-forecasters-toolbox.html#cb618-6" tabindex="-1"></a><span class="fu">autoplot</span>(aus_population) <span class="sc">+</span></span>
<span id="cb618-7"><a href="the-forecasters-toolbox.html#cb618-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Forecasts Australian population&#39;</span>,</span>
<span id="cb618-8"><a href="the-forecasters-toolbox.html#cb618-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Drift Method&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-74-2.png" width="672" /></p>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="the-forecasters-toolbox.html#cb619-1" tabindex="-1"></a><span class="co"># Bricks (aus_production)</span></span>
<span id="cb619-2"><a href="the-forecasters-toolbox.html#cb619-2" tabindex="-1"></a>bricks <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb619-3"><a href="the-forecasters-toolbox.html#cb619-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Bricks)) <span class="sc">|&gt;</span></span>
<span id="cb619-4"><a href="the-forecasters-toolbox.html#cb619-4" tabindex="-1"></a>  <span class="fu">select</span>(Bricks)</span>
<span id="cb619-5"><a href="the-forecasters-toolbox.html#cb619-5" tabindex="-1"></a></span>
<span id="cb619-6"><a href="the-forecasters-toolbox.html#cb619-6" tabindex="-1"></a>bricks <span class="sc">|&gt;</span></span>
<span id="cb619-7"><a href="the-forecasters-toolbox.html#cb619-7" tabindex="-1"></a>  <span class="fu">gg_tsdisplay</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Bricks`</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-75-1.png" width="672" /></p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="the-forecasters-toolbox.html#cb621-1" tabindex="-1"></a><span class="co"># =&gt; There is quarterly data with trend and seasonality =&gt; use seasonal naive method</span></span>
<span id="cb621-2"><a href="the-forecasters-toolbox.html#cb621-2" tabindex="-1"></a></span>
<span id="cb621-3"><a href="the-forecasters-toolbox.html#cb621-3" tabindex="-1"></a>bricks <span class="sc">|&gt;</span></span>
<span id="cb621-4"><a href="the-forecasters-toolbox.html#cb621-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">SNAIVE</span>(Bricks)) <span class="sc">|&gt;</span></span>
<span id="cb621-5"><a href="the-forecasters-toolbox.html#cb621-5" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">8</span>) <span class="sc">|&gt;</span></span>
<span id="cb621-6"><a href="the-forecasters-toolbox.html#cb621-6" tabindex="-1"></a>  <span class="fu">autoplot</span>(bricks) <span class="sc">+</span></span>
<span id="cb621-7"><a href="the-forecasters-toolbox.html#cb621-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Forecasts Australian bricks production&#39;</span>, </span>
<span id="cb621-8"><a href="the-forecasters-toolbox.html#cb621-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Seasonal Naïve method&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-75-2.png" width="672" /></p>
<div class="sourceCode" id="cb622"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb622-1"><a href="the-forecasters-toolbox.html#cb622-1" tabindex="-1"></a><span class="co"># NSW Lambs (aus_livestock)</span></span>
<span id="cb622-2"><a href="the-forecasters-toolbox.html#cb622-2" tabindex="-1"></a>nsw_lambs <span class="ot">&lt;-</span> aus_livestock <span class="sc">|&gt;</span></span>
<span id="cb622-3"><a href="the-forecasters-toolbox.html#cb622-3" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;New South Wales&#39;</span>, Animal <span class="sc">==</span> <span class="st">&#39;Lambs&#39;</span>)</span>
<span id="cb622-4"><a href="the-forecasters-toolbox.html#cb622-4" tabindex="-1"></a></span>
<span id="cb622-5"><a href="the-forecasters-toolbox.html#cb622-5" tabindex="-1"></a>nsw_lambs <span class="sc">|&gt;</span></span>
<span id="cb622-6"><a href="the-forecasters-toolbox.html#cb622-6" tabindex="-1"></a>  <span class="fu">gg_tsdisplay</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Count`</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-76-1.png" width="672" /></p>
<div class="sourceCode" id="cb624"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb624-1"><a href="the-forecasters-toolbox.html#cb624-1" tabindex="-1"></a><span class="co"># =&gt; There is monthly data with trend and seasonality =&gt; use seasonal naive method</span></span>
<span id="cb624-2"><a href="the-forecasters-toolbox.html#cb624-2" tabindex="-1"></a></span>
<span id="cb624-3"><a href="the-forecasters-toolbox.html#cb624-3" tabindex="-1"></a>nsw_lambs <span class="sc">|&gt;</span></span>
<span id="cb624-4"><a href="the-forecasters-toolbox.html#cb624-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">SNAIVE</span>(Count)) <span class="sc">|&gt;</span></span>
<span id="cb624-5"><a href="the-forecasters-toolbox.html#cb624-5" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">24</span>) <span class="sc">|&gt;</span></span>
<span id="cb624-6"><a href="the-forecasters-toolbox.html#cb624-6" tabindex="-1"></a>  <span class="fu">autoplot</span>(nsw_lambs) <span class="sc">+</span>  </span>
<span id="cb624-7"><a href="the-forecasters-toolbox.html#cb624-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Forecasts New South Wales lambs production&#39;</span>,</span>
<span id="cb624-8"><a href="the-forecasters-toolbox.html#cb624-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Seasonal Naïve method&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-76-2.png" width="672" /></p>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="the-forecasters-toolbox.html#cb625-1" tabindex="-1"></a><span class="co"># Household wealth (hh_budget)</span></span>
<span id="cb625-2"><a href="the-forecasters-toolbox.html#cb625-2" tabindex="-1"></a></span>
<span id="cb625-3"><a href="the-forecasters-toolbox.html#cb625-3" tabindex="-1"></a>hh_budget <span class="sc">|&gt;</span></span>
<span id="cb625-4"><a href="the-forecasters-toolbox.html#cb625-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(Wealth) <span class="sc">+</span></span>
<span id="cb625-5"><a href="the-forecasters-toolbox.html#cb625-5" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(Country))</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-77-1.png" width="672" /></p>
<div class="sourceCode" id="cb626"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb626-1"><a href="the-forecasters-toolbox.html#cb626-1" tabindex="-1"></a><span class="co"># =&gt; There is no seasonality, but there is trend =&gt; use drift method</span></span>
<span id="cb626-2"><a href="the-forecasters-toolbox.html#cb626-2" tabindex="-1"></a></span>
<span id="cb626-3"><a href="the-forecasters-toolbox.html#cb626-3" tabindex="-1"></a>hh_budget <span class="sc">|&gt;</span></span>
<span id="cb626-4"><a href="the-forecasters-toolbox.html#cb626-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(Wealth <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">|&gt;</span></span>
<span id="cb626-5"><a href="the-forecasters-toolbox.html#cb626-5" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span></span>
<span id="cb626-6"><a href="the-forecasters-toolbox.html#cb626-6" tabindex="-1"></a>  <span class="fu">autoplot</span>(hh_budget) <span class="sc">+</span></span>
<span id="cb626-7"><a href="the-forecasters-toolbox.html#cb626-7" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Forecasts household wealth&#39;</span>,</span>
<span id="cb626-8"><a href="the-forecasters-toolbox.html#cb626-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Drift Method&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-77-2.png" width="672" /></p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="the-forecasters-toolbox.html#cb627-1" tabindex="-1"></a><span class="co"># Australian takeaway food turnover (aus_retail)</span></span>
<span id="cb627-2"><a href="the-forecasters-toolbox.html#cb627-2" tabindex="-1"></a>aus_retail <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Industry)</span></code></pre></div>
<pre><code>## # A tibble: 20 × 1
##    Industry                                                         
##    &lt;chr&gt;                                                            
##  1 Cafes, restaurants and catering services                         
##  2 Cafes, restaurants and takeaway food services                    
##  3 Clothing retailing                                               
##  4 Clothing, footwear and personal accessory retailing              
##  5 Department stores                                                
##  6 Electrical and electronic goods retailing                        
##  7 Food retailing                                                   
##  8 Footwear and other personal accessory retailing                  
##  9 Furniture, floor coverings, houseware and textile goods retailing
## 10 Hardware, building and garden supplies retailing                 
## 11 Household goods retailing                                        
## 12 Liquor retailing                                                 
## 13 Newspaper and book retailing                                     
## 14 Other recreational goods retailing                               
## 15 Other retailing                                                  
## 16 Other retailing n.e.c.                                           
## 17 Other specialised food retailing                                 
## 18 Pharmaceutical, cosmetic and toiletry goods retailing            
## 19 Supermarket and grocery stores                                   
## 20 Takeaway food services</code></pre>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="the-forecasters-toolbox.html#cb629-1" tabindex="-1"></a>aus_retail <span class="sc">|&gt;</span> <span class="fu">distinct</span>(State)</span></code></pre></div>
<pre><code>## # A tibble: 8 × 1
##   State                       
##   &lt;chr&gt;                       
## 1 Australian Capital Territory
## 2 New South Wales             
## 3 Northern Territory          
## 4 Queensland                  
## 5 South Australia             
## 6 Tasmania                    
## 7 Victoria                    
## 8 Western Australia</code></pre>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="the-forecasters-toolbox.html#cb631-1" tabindex="-1"></a>takeaway_food <span class="ot">&lt;-</span> aus_retail <span class="sc">|&gt;</span></span>
<span id="cb631-2"><a href="the-forecasters-toolbox.html#cb631-2" tabindex="-1"></a>  <span class="fu">filter</span>(Industry <span class="sc">==</span> <span class="st">&#39;Cafes, restaurants and takeaway food services&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb631-3"><a href="the-forecasters-toolbox.html#cb631-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Industry)</span>
<span id="cb631-4"><a href="the-forecasters-toolbox.html#cb631-4" tabindex="-1"></a></span>
<span id="cb631-5"><a href="the-forecasters-toolbox.html#cb631-5" tabindex="-1"></a>takeaway_food <span class="sc">|&gt;</span></span>
<span id="cb631-6"><a href="the-forecasters-toolbox.html#cb631-6" tabindex="-1"></a>  <span class="fu">autoplot</span>(Turnover) <span class="sc">+</span></span>
<span id="cb631-7"><a href="the-forecasters-toolbox.html#cb631-7" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(State)) <span class="sc">+</span></span>
<span id="cb631-8"><a href="the-forecasters-toolbox.html#cb631-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-78-1.png" width="672" /></p>
<div class="sourceCode" id="cb632"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb632-1"><a href="the-forecasters-toolbox.html#cb632-1" tabindex="-1"></a><span class="co"># =&gt; There are trend and seasonality =&gt; seasonal naive method</span></span>
<span id="cb632-2"><a href="the-forecasters-toolbox.html#cb632-2" tabindex="-1"></a></span>
<span id="cb632-3"><a href="the-forecasters-toolbox.html#cb632-3" tabindex="-1"></a>takeaway_food <span class="sc">|&gt;</span></span>
<span id="cb632-4"><a href="the-forecasters-toolbox.html#cb632-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">SNAIVE</span>(Turnover)) <span class="sc">|&gt;</span></span>
<span id="cb632-5"><a href="the-forecasters-toolbox.html#cb632-5" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">24</span>) <span class="sc">|&gt;</span></span>
<span id="cb632-6"><a href="the-forecasters-toolbox.html#cb632-6" tabindex="-1"></a>  <span class="fu">autoplot</span>(takeaway_food) <span class="sc">+</span></span>
<span id="cb632-7"><a href="the-forecasters-toolbox.html#cb632-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Forecasts of Australian takeaway food turnover&#39;</span>,</span>
<span id="cb632-8"><a href="the-forecasters-toolbox.html#cb632-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Seasonal Naive Method&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-78-2.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="the-forecasters-toolbox.html#cb633-1" tabindex="-1"></a>fb <span class="ot">&lt;-</span> gafa_stock <span class="sc">|&gt;</span></span>
<span id="cb633-2"><a href="the-forecasters-toolbox.html#cb633-2" tabindex="-1"></a>        <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">&#39;FB&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb633-3"><a href="the-forecasters-toolbox.html#cb633-3" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">day =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb633-4"><a href="the-forecasters-toolbox.html#cb633-4" tabindex="-1"></a>        <span class="fu">update_tsibble</span>(<span class="at">index =</span> day, <span class="at">regular =</span> <span class="cn">TRUE</span>)</span>
<span id="cb633-5"><a href="the-forecasters-toolbox.html#cb633-5" tabindex="-1"></a></span>
<span id="cb633-6"><a href="the-forecasters-toolbox.html#cb633-6" tabindex="-1"></a><span class="co"># a. Produce a time plot of the series.</span></span>
<span id="cb633-7"><a href="the-forecasters-toolbox.html#cb633-7" tabindex="-1"></a>fb <span class="sc">|&gt;</span></span>
<span id="cb633-8"><a href="the-forecasters-toolbox.html#cb633-8" tabindex="-1"></a>  <span class="fu">autoplot</span>(Close)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-79-1.png" width="672" /></p>
<div class="sourceCode" id="cb634"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb634-1"><a href="the-forecasters-toolbox.html#cb634-1" tabindex="-1"></a><span class="co"># b. Produce forecasts using the drift method and plot them.</span></span>
<span id="cb634-2"><a href="the-forecasters-toolbox.html#cb634-2" tabindex="-1"></a>fb <span class="sc">|&gt;</span></span>
<span id="cb634-3"><a href="the-forecasters-toolbox.html#cb634-3" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">|&gt;</span></span>
<span id="cb634-4"><a href="the-forecasters-toolbox.html#cb634-4" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">45</span>) <span class="sc">|&gt;</span></span>
<span id="cb634-5"><a href="the-forecasters-toolbox.html#cb634-5" tabindex="-1"></a>  <span class="fu">autoplot</span>(fb) <span class="sc">+</span></span>
<span id="cb634-6"><a href="the-forecasters-toolbox.html#cb634-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&#39;Facebook stock price forecasts&#39;</span>,</span>
<span id="cb634-7"><a href="the-forecasters-toolbox.html#cb634-7" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Drift Method&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-79-2.png" width="672" /></p>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="the-forecasters-toolbox.html#cb635-1" tabindex="-1"></a><span class="co"># c. Show that the forecasts are identical to extending the line</span></span>
<span id="cb635-2"><a href="the-forecasters-toolbox.html#cb635-2" tabindex="-1"></a><span class="co">#    drawn between the first and last observations.</span></span>
<span id="cb635-3"><a href="the-forecasters-toolbox.html#cb635-3" tabindex="-1"></a></span>
<span id="cb635-4"><a href="the-forecasters-toolbox.html#cb635-4" tabindex="-1"></a>fb <span class="sc">|&gt;</span></span>
<span id="cb635-5"><a href="the-forecasters-toolbox.html#cb635-5" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">|&gt;</span></span>
<span id="cb635-6"><a href="the-forecasters-toolbox.html#cb635-6" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">45</span>) <span class="sc">|&gt;</span></span>
<span id="cb635-7"><a href="the-forecasters-toolbox.html#cb635-7" tabindex="-1"></a>  <span class="fu">autoplot</span>(fb) <span class="sc">+</span></span>
<span id="cb635-8"><a href="the-forecasters-toolbox.html#cb635-8" tabindex="-1"></a>  <span class="co"># first point</span></span>
<span id="cb635-9"><a href="the-forecasters-toolbox.html#cb635-9" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;point&quot;</span>, <span class="at">x =</span> fb[<span class="dv">1</span>, ]<span class="sc">$</span>day, </span>
<span id="cb635-10"><a href="the-forecasters-toolbox.html#cb635-10" tabindex="-1"></a>                    <span class="at">y =</span> fb[<span class="dv">1</span>, ]<span class="sc">$</span>Close, </span>
<span id="cb635-11"><a href="the-forecasters-toolbox.html#cb635-11" tabindex="-1"></a>                    <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb635-12"><a href="the-forecasters-toolbox.html#cb635-12" tabindex="-1"></a>  <span class="co"># last point</span></span>
<span id="cb635-13"><a href="the-forecasters-toolbox.html#cb635-13" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;point&quot;</span>, <span class="at">x =</span> fb[<span class="fu">nrow</span>(fb), ]<span class="sc">$</span>day, </span>
<span id="cb635-14"><a href="the-forecasters-toolbox.html#cb635-14" tabindex="-1"></a>                    <span class="at">y =</span> fb[<span class="fu">nrow</span>(fb), ]<span class="sc">$</span>Close, </span>
<span id="cb635-15"><a href="the-forecasters-toolbox.html#cb635-15" tabindex="-1"></a>                    <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb635-16"><a href="the-forecasters-toolbox.html#cb635-16" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">&quot;segment&quot;</span>, <span class="at">x =</span> fb[<span class="dv">1</span>, ]<span class="sc">$</span>day, </span>
<span id="cb635-17"><a href="the-forecasters-toolbox.html#cb635-17" tabindex="-1"></a>                      <span class="at">y =</span> fb[<span class="dv">1</span>, ]<span class="sc">$</span>Close, </span>
<span id="cb635-18"><a href="the-forecasters-toolbox.html#cb635-18" tabindex="-1"></a>                      <span class="at">xend =</span> fb[<span class="fu">nrow</span>(fb), ]<span class="sc">$</span>day, </span>
<span id="cb635-19"><a href="the-forecasters-toolbox.html#cb635-19" tabindex="-1"></a>                      <span class="at">yend =</span> fb[<span class="fu">nrow</span>(fb), ]<span class="sc">$</span>Close, </span>
<span id="cb635-20"><a href="the-forecasters-toolbox.html#cb635-20" tabindex="-1"></a>                      <span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb635-21"><a href="the-forecasters-toolbox.html#cb635-21" tabindex="-1"></a>                      <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb635-22"><a href="the-forecasters-toolbox.html#cb635-22" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&#39;Facebook stock price forecasts&#39;</span>,</span>
<span id="cb635-23"><a href="the-forecasters-toolbox.html#cb635-23" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Drift Method&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-79-3.png" width="672" /></p>
<div class="sourceCode" id="cb636"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb636-1"><a href="the-forecasters-toolbox.html#cb636-1" tabindex="-1"></a><span class="co"># d. Try using some of the other benchmark functions to forecast </span></span>
<span id="cb636-2"><a href="the-forecasters-toolbox.html#cb636-2" tabindex="-1"></a><span class="co">#    the same data set. Which do you think is best? Why?</span></span>
<span id="cb636-3"><a href="the-forecasters-toolbox.html#cb636-3" tabindex="-1"></a>fb <span class="sc">|&gt;</span></span>
<span id="cb636-4"><a href="the-forecasters-toolbox.html#cb636-4" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb636-5"><a href="the-forecasters-toolbox.html#cb636-5" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Close),</span>
<span id="cb636-6"><a href="the-forecasters-toolbox.html#cb636-6" tabindex="-1"></a>    <span class="at">Naive =</span> <span class="fu">NAIVE</span>(Close),</span>
<span id="cb636-7"><a href="the-forecasters-toolbox.html#cb636-7" tabindex="-1"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Close <span class="sc">~</span> <span class="fu">drift</span>())) <span class="sc">|&gt;</span></span>
<span id="cb636-8"><a href="the-forecasters-toolbox.html#cb636-8" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">45</span>) <span class="sc">|&gt;</span></span>
<span id="cb636-9"><a href="the-forecasters-toolbox.html#cb636-9" tabindex="-1"></a>  <span class="fu">autoplot</span>(fb) <span class="sc">+</span></span>
<span id="cb636-10"><a href="the-forecasters-toolbox.html#cb636-10" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(.model)) <span class="sc">+</span></span>
<span id="cb636-11"><a href="the-forecasters-toolbox.html#cb636-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&#39;none&#39;</span>) <span class="sc">+</span></span>
<span id="cb636-12"><a href="the-forecasters-toolbox.html#cb636-12" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&#39;Facebook stock price forecasts&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-79-4.png" width="672" /></p>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="the-forecasters-toolbox.html#cb637-1" tabindex="-1"></a><span class="co"># =&gt; Drift method is the best because of drift method shows the linear trend</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb638"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb638-1"><a href="the-forecasters-toolbox.html#cb638-1" tabindex="-1"></a>beer_production <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb638-2"><a href="the-forecasters-toolbox.html#cb638-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&gt;=</span> <span class="dv">1992</span>)</span>
<span id="cb638-3"><a href="the-forecasters-toolbox.html#cb638-3" tabindex="-1"></a></span>
<span id="cb638-4"><a href="the-forecasters-toolbox.html#cb638-4" tabindex="-1"></a>beer_production</span></code></pre></div>
<pre><code>## # A tsibble: 74 x 7 [1Q]
##    Quarter  Beer Tobacco Bricks Cement Electricity   Gas
##      &lt;qtr&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 1992 Q1   443    5777    383   1289       38332   117
##  2 1992 Q2   410    5853    404   1501       39774   151
##  3 1992 Q3   420    6416    446   1539       42246   175
##  4 1992 Q4   532    5825    420   1568       38498   129
##  5 1993 Q1   433    5724    394   1450       39460   116
##  6 1993 Q2   421    6036    462   1668       41356   149
##  7 1993 Q3   410    6570    475   1648       42949   163
##  8 1993 Q4   512    5675    443   1863       40974   138
##  9 1994 Q1   449    5311    421   1468       40162   127
## 10 1994 Q2   381    5717    475   1755       41199   159
## # ℹ 64 more rows</code></pre>
<div class="sourceCode" id="cb640"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb640-1"><a href="the-forecasters-toolbox.html#cb640-1" tabindex="-1"></a>beer_fit <span class="ot">&lt;-</span> beer_production <span class="sc">|&gt;</span></span>
<span id="cb640-2"><a href="the-forecasters-toolbox.html#cb640-2" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">SNAIVE</span>(Beer))</span>
<span id="cb640-3"><a href="the-forecasters-toolbox.html#cb640-3" tabindex="-1"></a></span>
<span id="cb640-4"><a href="the-forecasters-toolbox.html#cb640-4" tabindex="-1"></a>beer_fit <span class="sc">|&gt;</span></span>
<span id="cb640-5"><a href="the-forecasters-toolbox.html#cb640-5" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 4 rows containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 4 rows containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-81-1.png" width="672" /></p>
<div class="sourceCode" id="cb644"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb644-1"><a href="the-forecasters-toolbox.html#cb644-1" tabindex="-1"></a>beer_fit <span class="sc">|&gt;</span></span>
<span id="cb644-2"><a href="the-forecasters-toolbox.html#cb644-2" tabindex="-1"></a>  <span class="fu">forecast</span>() <span class="sc">|&gt;</span></span>
<span id="cb644-3"><a href="the-forecasters-toolbox.html#cb644-3" tabindex="-1"></a>  <span class="fu">autoplot</span>(beer_production)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-82-1.png" width="672" /></p>
<p><strong>Conclusion:</strong></p>
<ul>
<li>There is autocorrelation in the residuals</li>
<li>Bimodal distribution of the residuals</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="the-forecasters-toolbox.html#cb645-1" tabindex="-1"></a><span class="co"># Australian Exports</span></span>
<span id="cb645-2"><a href="the-forecasters-toolbox.html#cb645-2" tabindex="-1"></a></span>
<span id="cb645-3"><a href="the-forecasters-toolbox.html#cb645-3" tabindex="-1"></a>aus_exports <span class="ot">&lt;-</span> global_economy <span class="sc">|&gt;</span></span>
<span id="cb645-4"><a href="the-forecasters-toolbox.html#cb645-4" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">&#39;Australia&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb645-5"><a href="the-forecasters-toolbox.html#cb645-5" tabindex="-1"></a>  <span class="fu">select</span>(Exports)</span>
<span id="cb645-6"><a href="the-forecasters-toolbox.html#cb645-6" tabindex="-1"></a></span>
<span id="cb645-7"><a href="the-forecasters-toolbox.html#cb645-7" tabindex="-1"></a>aus_exports <span class="sc">|&gt;</span></span>
<span id="cb645-8"><a href="the-forecasters-toolbox.html#cb645-8" tabindex="-1"></a>  <span class="fu">gg_tsdisplay</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Exports`</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-83-1.png" width="672" /></p>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="the-forecasters-toolbox.html#cb647-1" tabindex="-1"></a><span class="co"># =&gt; there is no seasonality, so use NAIVE method</span></span>
<span id="cb647-2"><a href="the-forecasters-toolbox.html#cb647-2" tabindex="-1"></a></span>
<span id="cb647-3"><a href="the-forecasters-toolbox.html#cb647-3" tabindex="-1"></a>aus_fit <span class="ot">&lt;-</span> aus_exports <span class="sc">|&gt;</span></span>
<span id="cb647-4"><a href="the-forecasters-toolbox.html#cb647-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(Exports))</span>
<span id="cb647-5"><a href="the-forecasters-toolbox.html#cb647-5" tabindex="-1"></a></span>
<span id="cb647-6"><a href="the-forecasters-toolbox.html#cb647-6" tabindex="-1"></a>aus_fit <span class="sc">|&gt;</span></span>
<span id="cb647-7"><a href="the-forecasters-toolbox.html#cb647-7" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-83-2.png" width="672" /></p>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="the-forecasters-toolbox.html#cb651-1" tabindex="-1"></a><span class="co"># =&gt; there is no autocorrelation in the residuals and a normal distribution</span></span>
<span id="cb651-2"><a href="the-forecasters-toolbox.html#cb651-2" tabindex="-1"></a></span>
<span id="cb651-3"><a href="the-forecasters-toolbox.html#cb651-3" tabindex="-1"></a>aus_fit <span class="sc">|&gt;</span></span>
<span id="cb651-4"><a href="the-forecasters-toolbox.html#cb651-4" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span></span>
<span id="cb651-5"><a href="the-forecasters-toolbox.html#cb651-5" tabindex="-1"></a>  <span class="fu">autoplot</span>(aus_exports) <span class="sc">+</span></span>
<span id="cb651-6"><a href="the-forecasters-toolbox.html#cb651-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Australian export forecasts&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-83-3.png" width="672" /></p>
<div class="sourceCode" id="cb652"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb652-1"><a href="the-forecasters-toolbox.html#cb652-1" tabindex="-1"></a><span class="co"># Bricks series from aus_production</span></span>
<span id="cb652-2"><a href="the-forecasters-toolbox.html#cb652-2" tabindex="-1"></a></span>
<span id="cb652-3"><a href="the-forecasters-toolbox.html#cb652-3" tabindex="-1"></a>aus_bricks <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb652-4"><a href="the-forecasters-toolbox.html#cb652-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&gt;=</span> <span class="dv">1992</span>) <span class="sc">|&gt;</span></span>
<span id="cb652-5"><a href="the-forecasters-toolbox.html#cb652-5" tabindex="-1"></a>  <span class="fu">select</span>(Bricks) <span class="sc">|&gt;</span></span>
<span id="cb652-6"><a href="the-forecasters-toolbox.html#cb652-6" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Bricks))</span>
<span id="cb652-7"><a href="the-forecasters-toolbox.html#cb652-7" tabindex="-1"></a></span>
<span id="cb652-8"><a href="the-forecasters-toolbox.html#cb652-8" tabindex="-1"></a>aus_bricks <span class="sc">|&gt;</span> <span class="fu">autoplot</span>(Bricks)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-84-1.png" width="672" /></p>
<div class="sourceCode" id="cb653"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb653-1"><a href="the-forecasters-toolbox.html#cb653-1" tabindex="-1"></a><span class="co"># there is seasonality in the data</span></span>
<span id="cb653-2"><a href="the-forecasters-toolbox.html#cb653-2" tabindex="-1"></a></span>
<span id="cb653-3"><a href="the-forecasters-toolbox.html#cb653-3" tabindex="-1"></a>fit <span class="ot">&lt;-</span> aus_bricks <span class="sc">|&gt;</span></span>
<span id="cb653-4"><a href="the-forecasters-toolbox.html#cb653-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">SNAIVE</span>(Bricks))</span>
<span id="cb653-5"><a href="the-forecasters-toolbox.html#cb653-5" tabindex="-1"></a></span>
<span id="cb653-6"><a href="the-forecasters-toolbox.html#cb653-6" tabindex="-1"></a>fit <span class="sc">|&gt;</span> <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 4 rows containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 4 rows containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-84-2.png" width="672" /></p>
<div class="sourceCode" id="cb657"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb657-1"><a href="the-forecasters-toolbox.html#cb657-1" tabindex="-1"></a><span class="co"># there is autocorrelation in the residuals and left-skewed distribution</span></span>
<span id="cb657-2"><a href="the-forecasters-toolbox.html#cb657-2" tabindex="-1"></a></span>
<span id="cb657-3"><a href="the-forecasters-toolbox.html#cb657-3" tabindex="-1"></a>fit <span class="sc">|&gt;</span></span>
<span id="cb657-4"><a href="the-forecasters-toolbox.html#cb657-4" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">8</span>) <span class="sc">|&gt;</span></span>
<span id="cb657-5"><a href="the-forecasters-toolbox.html#cb657-5" tabindex="-1"></a>  <span class="fu">autoplot</span>(aus_bricks) <span class="sc">+</span></span>
<span id="cb657-6"><a href="the-forecasters-toolbox.html#cb657-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Australian bricks production forecasts&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Millions of brick&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-84-3.png" width="672" /></p>
<ol start="5" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb658"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb658-1"><a href="the-forecasters-toolbox.html#cb658-1" tabindex="-1"></a>vic <span class="ot">&lt;-</span> aus_livestock <span class="sc">|&gt;</span></span>
<span id="cb658-2"><a href="the-forecasters-toolbox.html#cb658-2" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;Victoria&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb658-3"><a href="the-forecasters-toolbox.html#cb658-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>State)</span>
<span id="cb658-4"><a href="the-forecasters-toolbox.html#cb658-4" tabindex="-1"></a></span>
<span id="cb658-5"><a href="the-forecasters-toolbox.html#cb658-5" tabindex="-1"></a>vic <span class="sc">|&gt;</span> </span>
<span id="cb658-6"><a href="the-forecasters-toolbox.html#cb658-6" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">SNAIVE</span>(Count)) <span class="sc">|&gt;</span></span>
<span id="cb658-7"><a href="the-forecasters-toolbox.html#cb658-7" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">8</span>) <span class="sc">|&gt;</span></span>
<span id="cb658-8"><a href="the-forecasters-toolbox.html#cb658-8" tabindex="-1"></a>  <span class="fu">autoplot</span>(vic)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-85-1.png" width="672" /></p>
<p>The SNAIVE method forecasts future values by repeating the seasonal pattern observed in the previous 12 months. This can be a good benchmark for time series data with clear and stable seasonal patterns, but it may not perform well if the series also exhibit strong trends or irregular patterns beyond seasonality.</p>
<ol start="6" style="list-style-type: decimal">
<li></li>
</ol>
<!-- -->
<ol style="list-style-type: lower-alpha">
<li>Good forecast methods should have normally distributed residuals.</li>
</ol>
<p><strong>Partly TRUE</strong> Normality is a useful diagnostic but is less crucial than the absence of autocorrelation or structural patterns in the residuals.</p>
<ol start="2" style="list-style-type: lower-alpha">
<li>A model with small residuals will give good forecasts.</li>
</ol>
<p><strong>FALSE</strong> Small residuals copuld indicates over-fitting.</p>
<ol start="3" style="list-style-type: lower-alpha">
<li>The best measure of forecast accuracy is MAPE.</li>
</ol>
<p><strong>FALSE</strong> MAPE could be infinite if the residuals too close to zero.</p>
<ol start="4" style="list-style-type: lower-alpha">
<li>If your model doesn’t forecast well, you should make it more complicated.</li>
</ol>
<p><strong>Partly TRUE</strong> I should analyse the data and residuals and stepwise improve the model avoiding overfitting.</p>
<ol start="5" style="list-style-type: lower-alpha">
<li>Always choose the model with the best forecast accuracy as measured on the test set.</li>
</ol>
<p><strong>Partly TRUE</strong> The test set is for evaluating the model on unseen data. Needs to keep balance between accuracy and other factors such as simplicity, interpretability and computational cost.</p>
<ol start="7" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb659"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb659-1"><a href="the-forecasters-toolbox.html#cb659-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb659-2"><a href="the-forecasters-toolbox.html#cb659-2" tabindex="-1"></a>myseries <span class="ot">&lt;-</span> aus_retail <span class="sc">|&gt;</span></span>
<span id="cb659-3"><a href="the-forecasters-toolbox.html#cb659-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Series ID</span><span class="st">`</span> <span class="sc">==</span> <span class="fu">sample</span>(aus_retail<span class="sc">$</span><span class="st">`</span><span class="at">Series ID</span><span class="st">`</span>,<span class="dv">1</span>))</span>
<span id="cb659-4"><a href="the-forecasters-toolbox.html#cb659-4" tabindex="-1"></a></span>
<span id="cb659-5"><a href="the-forecasters-toolbox.html#cb659-5" tabindex="-1"></a>myseries <span class="sc">|&gt;</span></span>
<span id="cb659-6"><a href="the-forecasters-toolbox.html#cb659-6" tabindex="-1"></a>  <span class="fu">gg_tsdisplay</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Turnover`</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-86-1.png" width="672" /></p>
<div class="sourceCode" id="cb661"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb661-1"><a href="the-forecasters-toolbox.html#cb661-1" tabindex="-1"></a><span class="co"># a. </span></span>
<span id="cb661-2"><a href="the-forecasters-toolbox.html#cb661-2" tabindex="-1"></a></span>
<span id="cb661-3"><a href="the-forecasters-toolbox.html#cb661-3" tabindex="-1"></a>myseries_train <span class="ot">&lt;-</span> myseries <span class="sc">|&gt;</span></span>
<span id="cb661-4"><a href="the-forecasters-toolbox.html#cb661-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Month) <span class="sc">&lt;</span> <span class="dv">2011</span>)</span>
<span id="cb661-5"><a href="the-forecasters-toolbox.html#cb661-5" tabindex="-1"></a></span>
<span id="cb661-6"><a href="the-forecasters-toolbox.html#cb661-6" tabindex="-1"></a>myseries_train</span></code></pre></div>
<pre><code>## # A tsibble: 345 x 5 [1M]
## # Key:       State, Industry [1]
##    State    Industry                  `Series ID`    Month Turnover
##    &lt;chr&gt;    &lt;chr&gt;                     &lt;chr&gt;          &lt;mth&gt;    &lt;dbl&gt;
##  1 Victoria Household goods retailing A3349643V   1982 Apr     173.
##  2 Victoria Household goods retailing A3349643V   1982 May     180.
##  3 Victoria Household goods retailing A3349643V   1982 Jun     167.
##  4 Victoria Household goods retailing A3349643V   1982 Jul     174.
##  5 Victoria Household goods retailing A3349643V   1982 Aug     178.
##  6 Victoria Household goods retailing A3349643V   1982 Sep     180.
##  7 Victoria Household goods retailing A3349643V   1982 Oct     190.
##  8 Victoria Household goods retailing A3349643V   1982 Nov     224.
##  9 Victoria Household goods retailing A3349643V   1982 Dec     321.
## 10 Victoria Household goods retailing A3349643V   1983 Jan     179.
## # ℹ 335 more rows</code></pre>
<div class="sourceCode" id="cb663"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb663-1"><a href="the-forecasters-toolbox.html#cb663-1" tabindex="-1"></a><span class="co"># b.</span></span>
<span id="cb663-2"><a href="the-forecasters-toolbox.html#cb663-2" tabindex="-1"></a></span>
<span id="cb663-3"><a href="the-forecasters-toolbox.html#cb663-3" tabindex="-1"></a><span class="fu">autoplot</span>(myseries, Turnover) <span class="sc">+</span></span>
<span id="cb663-4"><a href="the-forecasters-toolbox.html#cb663-4" tabindex="-1"></a>  <span class="fu">autolayer</span>(myseries_train, Turnover, <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-88-1.png" width="672" /></p>
<div class="sourceCode" id="cb664"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb664-1"><a href="the-forecasters-toolbox.html#cb664-1" tabindex="-1"></a><span class="co"># c.</span></span>
<span id="cb664-2"><a href="the-forecasters-toolbox.html#cb664-2" tabindex="-1"></a></span>
<span id="cb664-3"><a href="the-forecasters-toolbox.html#cb664-3" tabindex="-1"></a>fit <span class="ot">&lt;-</span> myseries_train <span class="sc">|&gt;</span></span>
<span id="cb664-4"><a href="the-forecasters-toolbox.html#cb664-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">SNAIVE</span>(Turnover))</span>
<span id="cb664-5"><a href="the-forecasters-toolbox.html#cb664-5" tabindex="-1"></a></span>
<span id="cb664-6"><a href="the-forecasters-toolbox.html#cb664-6" tabindex="-1"></a><span class="co"># d.</span></span>
<span id="cb664-7"><a href="the-forecasters-toolbox.html#cb664-7" tabindex="-1"></a></span>
<span id="cb664-8"><a href="the-forecasters-toolbox.html#cb664-8" tabindex="-1"></a>fit <span class="sc">|&gt;</span></span>
<span id="cb664-9"><a href="the-forecasters-toolbox.html#cb664-9" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 12 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 12 rows containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 12 rows containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-89-1.png" width="672" /></p>
<blockquote>
<p>Do the residuals appear to be uncorrelated and normally distributed?</p>
</blockquote>
<p>No, the residuals are autocorrelated and have bimodal distribution.</p>
<div class="sourceCode" id="cb668"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb668-1"><a href="the-forecasters-toolbox.html#cb668-1" tabindex="-1"></a><span class="co"># e.</span></span>
<span id="cb668-2"><a href="the-forecasters-toolbox.html#cb668-2" tabindex="-1"></a></span>
<span id="cb668-3"><a href="the-forecasters-toolbox.html#cb668-3" tabindex="-1"></a>fc <span class="ot">&lt;-</span> fit <span class="sc">|&gt;</span></span>
<span id="cb668-4"><a href="the-forecasters-toolbox.html#cb668-4" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">new_data =</span> <span class="fu">anti_join</span>(myseries, myseries_train))</span></code></pre></div>
<pre><code>## Joining with `by = join_by(State, Industry, `Series ID`, Month, Turnover)`</code></pre>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="the-forecasters-toolbox.html#cb670-1" tabindex="-1"></a>fc <span class="sc">|&gt;</span></span>
<span id="cb670-2"><a href="the-forecasters-toolbox.html#cb670-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(myseries)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-90-1.png" width="672" /></p>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb671-1"><a href="the-forecasters-toolbox.html#cb671-1" tabindex="-1"></a><span class="co"># f.</span></span>
<span id="cb671-2"><a href="the-forecasters-toolbox.html#cb671-2" tabindex="-1"></a></span>
<span id="cb671-3"><a href="the-forecasters-toolbox.html#cb671-3" tabindex="-1"></a><span class="fu">bind_rows</span>(fit <span class="sc">|&gt;</span> <span class="fu">accuracy</span>(), fc <span class="sc">|&gt;</span> <span class="fu">accuracy</span>(myseries)) <span class="sc">|&gt;</span></span>
<span id="cb671-4"><a href="the-forecasters-toolbox.html#cb671-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 9
##   .type       ME  RMSE   MAE   MPE  MAPE  MASE RMSSE  ACF1
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Training  25.1  45.6  35.4  5.05  7.29  1     1    0.695
## 2 Test     172.  213.  174.  15.1  15.2   4.90  4.68 0.947</code></pre>
<ol start="8" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb673"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb673-1"><a href="the-forecasters-toolbox.html#cb673-1" tabindex="-1"></a>pigs <span class="ot">&lt;-</span> aus_livestock <span class="sc">|&gt;</span></span>
<span id="cb673-2"><a href="the-forecasters-toolbox.html#cb673-2" tabindex="-1"></a>    <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;New South Wales&#39;</span>, Animal <span class="sc">==</span> <span class="st">&#39;Pigs&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb673-3"><a href="the-forecasters-toolbox.html#cb673-3" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Animal, <span class="sc">-</span>State)</span>
<span id="cb673-4"><a href="the-forecasters-toolbox.html#cb673-4" tabindex="-1"></a></span>
<span id="cb673-5"><a href="the-forecasters-toolbox.html#cb673-5" tabindex="-1"></a><span class="co"># a. Produce some plots of the data in order to become familiar with it.</span></span>
<span id="cb673-6"><a href="the-forecasters-toolbox.html#cb673-6" tabindex="-1"></a></span>
<span id="cb673-7"><a href="the-forecasters-toolbox.html#cb673-7" tabindex="-1"></a>pigs <span class="sc">|&gt;</span></span>
<span id="cb673-8"><a href="the-forecasters-toolbox.html#cb673-8" tabindex="-1"></a>  <span class="fu">autoplot</span>(Count)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-92-1.png" width="672" /></p>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="the-forecasters-toolbox.html#cb674-1" tabindex="-1"></a>pigs <span class="sc">|&gt;</span></span>
<span id="cb674-2"><a href="the-forecasters-toolbox.html#cb674-2" tabindex="-1"></a>  <span class="fu">gg_tsdisplay</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Count`</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-93-1.png" width="672" /></p>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="the-forecasters-toolbox.html#cb676-1" tabindex="-1"></a><span class="co"># b. Create a training set of 486 observations, </span></span>
<span id="cb676-2"><a href="the-forecasters-toolbox.html#cb676-2" tabindex="-1"></a><span class="co">#    withholding a test set of 72 observations (6 years).</span></span>
<span id="cb676-3"><a href="the-forecasters-toolbox.html#cb676-3" tabindex="-1"></a></span>
<span id="cb676-4"><a href="the-forecasters-toolbox.html#cb676-4" tabindex="-1"></a>pigs_train <span class="ot">&lt;-</span> pigs <span class="sc">|&gt;</span></span>
<span id="cb676-5"><a href="the-forecasters-toolbox.html#cb676-5" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">486</span>)</span>
<span id="cb676-6"><a href="the-forecasters-toolbox.html#cb676-6" tabindex="-1"></a></span>
<span id="cb676-7"><a href="the-forecasters-toolbox.html#cb676-7" tabindex="-1"></a>pigs_train</span></code></pre></div>
<pre><code>## # A tsibble: 486 x 2 [1M]
##       Month  Count
##       &lt;mth&gt;  &lt;dbl&gt;
##  1 1972 Jul  97400
##  2 1972 Aug 114700
##  3 1972 Sep 109900
##  4 1972 Oct 108300
##  5 1972 Nov 122200
##  6 1972 Dec 106900
##  7 1973 Jan  96600
##  8 1973 Feb  96700
##  9 1973 Mar 121200
## 10 1973 Apr  99300
## # ℹ 476 more rows</code></pre>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="the-forecasters-toolbox.html#cb678-1" tabindex="-1"></a>pigs_test <span class="ot">&lt;-</span> pigs <span class="sc">|&gt;</span></span>
<span id="cb678-2"><a href="the-forecasters-toolbox.html#cb678-2" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">487</span><span class="sc">:</span><span class="fu">nrow</span>(pigs))</span>
<span id="cb678-3"><a href="the-forecasters-toolbox.html#cb678-3" tabindex="-1"></a></span>
<span id="cb678-4"><a href="the-forecasters-toolbox.html#cb678-4" tabindex="-1"></a>pigs_test</span></code></pre></div>
<pre><code>## # A tsibble: 72 x 2 [1M]
##       Month Count
##       &lt;mth&gt; &lt;dbl&gt;
##  1 2013 Jan 71300
##  2 2013 Feb 69700
##  3 2013 Mar 79900
##  4 2013 Apr 74300
##  5 2013 May 87200
##  6 2013 Jun 71200
##  7 2013 Jul 86200
##  8 2013 Aug 78000
##  9 2013 Sep 71200
## 10 2013 Oct 78200
## # ℹ 62 more rows</code></pre>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb680-1"><a href="the-forecasters-toolbox.html#cb680-1" tabindex="-1"></a>bench_fit <span class="ot">&lt;-</span> pigs_train <span class="sc">|&gt;</span></span>
<span id="cb680-2"><a href="the-forecasters-toolbox.html#cb680-2" tabindex="-1"></a>              <span class="fu">model</span>(</span>
<span id="cb680-3"><a href="the-forecasters-toolbox.html#cb680-3" tabindex="-1"></a>                <span class="at">Mean =</span> <span class="fu">MEAN</span>(Count),</span>
<span id="cb680-4"><a href="the-forecasters-toolbox.html#cb680-4" tabindex="-1"></a>                <span class="at">Naive =</span> <span class="fu">NAIVE</span>(Count),</span>
<span id="cb680-5"><a href="the-forecasters-toolbox.html#cb680-5" tabindex="-1"></a>                <span class="st">`</span><span class="at">Seasonal Naive</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">SNAIVE</span>(Count),</span>
<span id="cb680-6"><a href="the-forecasters-toolbox.html#cb680-6" tabindex="-1"></a>                <span class="at">Drift =</span> <span class="fu">RW</span>(Count <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb680-7"><a href="the-forecasters-toolbox.html#cb680-7" tabindex="-1"></a>              )</span>
<span id="cb680-8"><a href="the-forecasters-toolbox.html#cb680-8" tabindex="-1"></a></span>
<span id="cb680-9"><a href="the-forecasters-toolbox.html#cb680-9" tabindex="-1"></a>bench_fit</span></code></pre></div>
<pre><code>## # A mable: 1 x 4
##      Mean   Naive `Seasonal Naive`         Drift
##   &lt;model&gt; &lt;model&gt;          &lt;model&gt;       &lt;model&gt;
## 1  &lt;MEAN&gt; &lt;NAIVE&gt;         &lt;SNAIVE&gt; &lt;RW w/ drift&gt;</code></pre>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="the-forecasters-toolbox.html#cb682-1" tabindex="-1"></a>bench_fit <span class="sc">|&gt;</span></span>
<span id="cb682-2"><a href="the-forecasters-toolbox.html#cb682-2" tabindex="-1"></a>  <span class="fu">accuracy</span>()</span></code></pre></div>
<pre><code>## # A tibble: 4 × 10
##   .model         .type           ME   RMSE    MAE    MPE  MAPE  MASE RMSSE   ACF1
##   &lt;chr&gt;          &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 Mean           Training  2.42e-12 25389. 21496. -5.59   20.8  2.03  1.75  0.816
## 2 Naive          Training -3.98e+ 1 15324. 12171. -1.02   11.2  1.15  1.05 -0.485
## 3 Seasonal Naive Training -8.23e+ 2 14530. 10600  -1.83   10.1  1     1     0.610
## 4 Drift          Training  3.01e-12 15324. 12173. -0.985  11.2  1.15  1.05 -0.485</code></pre>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="the-forecasters-toolbox.html#cb684-1" tabindex="-1"></a>pigs_test_fc <span class="ot">&lt;-</span> bench_fit <span class="sc">|&gt;</span></span>
<span id="cb684-2"><a href="the-forecasters-toolbox.html#cb684-2" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">new_data =</span> pigs_test)</span>
<span id="cb684-3"><a href="the-forecasters-toolbox.html#cb684-3" tabindex="-1"></a></span>
<span id="cb684-4"><a href="the-forecasters-toolbox.html#cb684-4" tabindex="-1"></a>pigs_test_fc <span class="sc">|&gt;</span></span>
<span id="cb684-5"><a href="the-forecasters-toolbox.html#cb684-5" tabindex="-1"></a>  <span class="fu">accuracy</span>(pigs)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 10
##   .model         .type      ME   RMSE    MAE    MPE  MAPE  MASE RMSSE    ACF1
##   &lt;chr&gt;          &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1 Drift          Test   -4685.  8091.  6967.  -7.36  10.1 0.657 0.557  0.0785
## 2 Mean           Test  -39360. 39894. 39360. -55.9   55.9 3.71  2.75   0.0545
## 3 Naive          Test   -6138.  8941.  7840.  -9.39  11.4 0.740 0.615  0.0545
## 4 Seasonal Naive Test   -5838. 10111.  8174.  -8.81  11.9 0.771 0.696 -0.0773</code></pre>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="the-forecasters-toolbox.html#cb686-1" tabindex="-1"></a><span class="fu">bind_rows</span>(bench_fit <span class="sc">|&gt;</span> <span class="fu">accuracy</span>(),</span>
<span id="cb686-2"><a href="the-forecasters-toolbox.html#cb686-2" tabindex="-1"></a>          pigs_test_fc <span class="sc">|&gt;</span> <span class="fu">accuracy</span>(pigs))</span></code></pre></div>
<pre><code>## # A tibble: 8 × 10
##   .model         .type           ME   RMSE    MAE     MPE  MAPE  MASE RMSSE    ACF1
##   &lt;chr&gt;          &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1 Mean           Training  2.42e-12 25389. 21496.  -5.59   20.8 2.03  1.75   0.816 
## 2 Naive          Training -3.98e+ 1 15324. 12171.  -1.02   11.2 1.15  1.05  -0.485 
## 3 Seasonal Naive Training -8.23e+ 2 14530. 10600   -1.83   10.1 1     1      0.610 
## 4 Drift          Training  3.01e-12 15324. 12173.  -0.985  11.2 1.15  1.05  -0.485 
## 5 Drift          Test     -4.69e+ 3  8091.  6967.  -7.36   10.1 0.657 0.557  0.0785
## 6 Mean           Test     -3.94e+ 4 39894. 39360. -55.9    55.9 3.71  2.75   0.0545
## 7 Naive          Test     -6.14e+ 3  8941.  7840.  -9.39   11.4 0.740 0.615  0.0545
## 8 Seasonal Naive Test     -5.84e+ 3 10111.  8174.  -8.81   11.9 0.771 0.696 -0.0773</code></pre>
<p>Seasonal Naive method is more preferred on the training set, but on the test set the Drift method shown less MAPE and represents the common trend.</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb688-1"><a href="the-forecasters-toolbox.html#cb688-1" tabindex="-1"></a>pigs_test_fc <span class="sc">|&gt;</span></span>
<span id="cb688-2"><a href="the-forecasters-toolbox.html#cb688-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(pigs) <span class="sc">+</span></span>
<span id="cb688-3"><a href="the-forecasters-toolbox.html#cb688-3" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(.model))</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-100-1.png" width="672" /></p>
<div class="sourceCode" id="cb689"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb689-1"><a href="the-forecasters-toolbox.html#cb689-1" tabindex="-1"></a><span class="co"># d. Check the residuals of your preferred method. Do they resemble white noise?</span></span>
<span id="cb689-2"><a href="the-forecasters-toolbox.html#cb689-2" tabindex="-1"></a></span>
<span id="cb689-3"><a href="the-forecasters-toolbox.html#cb689-3" tabindex="-1"></a>bench_fit <span class="sc">|&gt;</span></span>
<span id="cb689-4"><a href="the-forecasters-toolbox.html#cb689-4" tabindex="-1"></a>  <span class="fu">select</span>(Drift) <span class="sc">|&gt;</span></span>
<span id="cb689-5"><a href="the-forecasters-toolbox.html#cb689-5" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-101-1.png" width="672" /></p>
<div class="sourceCode" id="cb693"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb693-1"><a href="the-forecasters-toolbox.html#cb693-1" tabindex="-1"></a><span class="co"># =&gt; No, there is information in hte residuals about seasonality</span></span></code></pre></div>
<ol start="9" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb694"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb694-1"><a href="the-forecasters-toolbox.html#cb694-1" tabindex="-1"></a><span class="co"># a.</span></span>
<span id="cb694-2"><a href="the-forecasters-toolbox.html#cb694-2" tabindex="-1"></a></span>
<span id="cb694-3"><a href="the-forecasters-toolbox.html#cb694-3" tabindex="-1"></a>hh_train <span class="ot">&lt;-</span> hh_budget <span class="sc">|&gt;</span></span>
<span id="cb694-4"><a href="the-forecasters-toolbox.html#cb694-4" tabindex="-1"></a>  <span class="fu">select</span>(Wealth) <span class="sc">|&gt;</span></span>
<span id="cb694-5"><a href="the-forecasters-toolbox.html#cb694-5" tabindex="-1"></a>  <span class="fu">group_by</span>(Country) <span class="sc">|&gt;</span></span>
<span id="cb694-6"><a href="the-forecasters-toolbox.html#cb694-6" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span>(<span class="fu">n</span>()<span class="sc">-</span><span class="dv">4</span>))</span>
<span id="cb694-7"><a href="the-forecasters-toolbox.html#cb694-7" tabindex="-1"></a>  </span>
<span id="cb694-8"><a href="the-forecasters-toolbox.html#cb694-8" tabindex="-1"></a>hh_train</span></code></pre></div>
<pre><code>## # A tsibble: 72 x 3 [1Y]
## # Key:       Country [4]
## # Groups:    Country [4]
##    Wealth  Year Country  
##     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    
##  1   315.  1995 Australia
##  2   315.  1996 Australia
##  3   323.  1997 Australia
##  4   339.  1998 Australia
##  5   354.  1999 Australia
##  6   350.  2000 Australia
##  7   348.  2001 Australia
##  8   349.  2002 Australia
##  9   360.  2003 Australia
## 10   379.  2004 Australia
## # ℹ 62 more rows</code></pre>
<div class="sourceCode" id="cb696"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb696-1"><a href="the-forecasters-toolbox.html#cb696-1" tabindex="-1"></a><span class="co"># b. fit on the training set</span></span>
<span id="cb696-2"><a href="the-forecasters-toolbox.html#cb696-2" tabindex="-1"></a></span>
<span id="cb696-3"><a href="the-forecasters-toolbox.html#cb696-3" tabindex="-1"></a>hh_fit <span class="ot">&lt;-</span> hh_train <span class="sc">|&gt;</span></span>
<span id="cb696-4"><a href="the-forecasters-toolbox.html#cb696-4" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb696-5"><a href="the-forecasters-toolbox.html#cb696-5" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Wealth),</span>
<span id="cb696-6"><a href="the-forecasters-toolbox.html#cb696-6" tabindex="-1"></a>    <span class="at">Naive =</span> <span class="fu">NAIVE</span>(Wealth),</span>
<span id="cb696-7"><a href="the-forecasters-toolbox.html#cb696-7" tabindex="-1"></a>    <span class="st">`</span><span class="at">Seasonal Naive</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">SNAIVE</span>(Wealth),</span>
<span id="cb696-8"><a href="the-forecasters-toolbox.html#cb696-8" tabindex="-1"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Wealth <span class="sc">~</span> <span class="fu">drift</span>())</span>
<span id="cb696-9"><a href="the-forecasters-toolbox.html#cb696-9" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Warning: 4 errors (1 unique) encountered for Seasonal Naive
## [4] Non-seasonal model specification provided, use RW() or provide a different lag specification.</code></pre>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb698-1"><a href="the-forecasters-toolbox.html#cb698-1" tabindex="-1"></a>hh_fit</span></code></pre></div>
<pre><code>## # A mable: 4 x 5
## # Key:     Country [4]
##   Country      Mean   Naive `Seasonal Naive`         Drift
##   &lt;chr&gt;     &lt;model&gt; &lt;model&gt;          &lt;model&gt;       &lt;model&gt;
## 1 Australia  &lt;MEAN&gt; &lt;NAIVE&gt;     &lt;NULL model&gt; &lt;RW w/ drift&gt;
## 2 Canada     &lt;MEAN&gt; &lt;NAIVE&gt;     &lt;NULL model&gt; &lt;RW w/ drift&gt;
## 3 Japan      &lt;MEAN&gt; &lt;NAIVE&gt;     &lt;NULL model&gt; &lt;RW w/ drift&gt;
## 4 USA        &lt;MEAN&gt; &lt;NAIVE&gt;     &lt;NULL model&gt; &lt;RW w/ drift&gt;</code></pre>
<div class="sourceCode" id="cb700"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb700-1"><a href="the-forecasters-toolbox.html#cb700-1" tabindex="-1"></a><span class="co"># forecast on test set</span></span>
<span id="cb700-2"><a href="the-forecasters-toolbox.html#cb700-2" tabindex="-1"></a>hh_fc <span class="ot">&lt;-</span> hh_fit <span class="sc">|&gt;</span></span>
<span id="cb700-3"><a href="the-forecasters-toolbox.html#cb700-3" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">new_data =</span> <span class="fu">anti_join</span>(hh_budget, hh_train, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&#39;Country&#39;</span>, <span class="st">&#39;Year&#39;</span>)))</span>
<span id="cb700-4"><a href="the-forecasters-toolbox.html#cb700-4" tabindex="-1"></a></span>
<span id="cb700-5"><a href="the-forecasters-toolbox.html#cb700-5" tabindex="-1"></a>hh_fc</span></code></pre></div>
<pre><code>## # A fable: 64 x 10 [1Y]
## # Key:     Country, .model [16]
##    Country   .model          Year       Wealth .mean  Debt    DI Expenditure Savings Unemployment
##    &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt;       &lt;dist&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;   &lt;dbl&gt;        &lt;dbl&gt;
##  1 Australia Mean            2013  N(352, 882)  352.  190.  2.64        2.44    7.26         5.66
##  2 Australia Mean            2014  N(352, 882)  352.  193.  2.61        2.39    7.47         6.08
##  3 Australia Mean            2015  N(352, 882)  352.  202.  1.34        2.79    5.64         6.06
##  4 Australia Mean            2016  N(352, 882)  352.  209.  1.90        2.14    4.62         5.71
##  5 Australia Naive           2013  N(353, 578)  353.  190.  2.64        2.44    7.26         5.66
##  6 Australia Naive           2014 N(353, 1156)  353.  193.  2.61        2.39    7.47         6.08
##  7 Australia Naive           2015 N(353, 1733)  353.  202.  1.34        2.79    5.64         6.06
##  8 Australia Naive           2016 N(353, 2311)  353.  209.  1.90        2.14    4.62         5.71
##  9 Australia Seasonal Naive  2013           NA   NA   190.  2.64        2.44    7.26         5.66
## 10 Australia Seasonal Naive  2014           NA   NA   193.  2.61        2.39    7.47         6.08
## # ℹ 54 more rows</code></pre>
<div class="sourceCode" id="cb702"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb702-1"><a href="the-forecasters-toolbox.html#cb702-1" tabindex="-1"></a><span class="co"># c. forecast accuracy</span></span>
<span id="cb702-2"><a href="the-forecasters-toolbox.html#cb702-2" tabindex="-1"></a></span>
<span id="cb702-3"><a href="the-forecasters-toolbox.html#cb702-3" tabindex="-1"></a>hh_fc <span class="sc">|&gt;</span></span>
<span id="cb702-4"><a href="the-forecasters-toolbox.html#cb702-4" tabindex="-1"></a>  <span class="fu">accuracy</span>(hh_budget) <span class="sc">|&gt;</span></span>
<span id="cb702-5"><a href="the-forecasters-toolbox.html#cb702-5" tabindex="-1"></a>  <span class="fu">arrange</span>(Country)</span></code></pre></div>
<pre><code>## # A tibble: 16 × 11
##    .model         Country   .type    ME  RMSE   MAE    MPE   MAPE    MASE   RMSSE    ACF1
##    &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 Drift          Australia Test   29.1  35.5  29.1   7.23   7.23   1.73    1.48   0.210 
##  2 Mean           Australia Test   35.7  42.3  35.7   8.89   8.89   2.12    1.76   0.216 
##  3 Naive          Australia Test   34.7  41.5  34.7   8.64   8.64   2.06    1.73   0.216 
##  4 Seasonal Naive Australia Test  NaN   NaN   NaN   NaN    NaN    NaN     NaN     NA     
##  5 Drift          Canada    Test   33.3  37.2  33.3   6.09   6.09   1.73    1.57  -0.229 
##  6 Mean           Canada    Test   90.4  92.9  90.4  16.7   16.7    4.69    3.92  -0.0799
##  7 Naive          Canada    Test   46.2  51.0  46.2   8.46   8.46   2.40    2.15  -0.0799
##  8 Seasonal Naive Canada    Test  NaN   NaN   NaN   NaN    NaN    NaN     NaN     NA     
##  9 Drift          Japan     Test   14.7  17.9  14.7   2.44   2.44   0.943   0.967 -0.229 
## 10 Mean           Japan     Test  100.  101.  100.   16.8   16.8    6.45    5.46  -0.534 
## 11 Naive          Japan     Test   36.3  37.8  36.3   6.06   6.06   2.34    2.04  -0.534 
## 12 Seasonal Naive Japan     Test  NaN   NaN   NaN   NaN    NaN    NaN     NaN     NA     
## 13 Drift          USA       Test   75.9  76.2  75.9  12.7   12.7    2.88    2.43  -0.561 
## 14 Mean           USA       Test   82.9  83.3  82.9  13.9   13.9    3.15    2.65  -0.423 
## 15 Naive          USA       Test   82.1  82.5  82.1  13.8   13.8    3.12    2.63  -0.423 
## 16 Seasonal Naive USA       Test  NaN   NaN   NaN   NaN    NaN    NaN     NaN     NA</code></pre>
<p>Which method does best?</p>
<p>Best method:</p>
<ul>
<li>Australia: Drift</li>
<li>Canada: Drift</li>
<li>Japan: Drift</li>
<li>USA: Drift</li>
</ul>
<div class="sourceCode" id="cb704"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb704-1"><a href="the-forecasters-toolbox.html#cb704-1" tabindex="-1"></a><span class="co"># d.</span></span>
<span id="cb704-2"><a href="the-forecasters-toolbox.html#cb704-2" tabindex="-1"></a></span>
<span id="cb704-3"><a href="the-forecasters-toolbox.html#cb704-3" tabindex="-1"></a>hh_fit <span class="sc">|&gt;</span></span>
<span id="cb704-4"><a href="the-forecasters-toolbox.html#cb704-4" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">&#39;Australia&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb704-5"><a href="the-forecasters-toolbox.html#cb704-5" tabindex="-1"></a>  <span class="fu">select</span>(Drift) <span class="sc">|&gt;</span></span>
<span id="cb704-6"><a href="the-forecasters-toolbox.html#cb704-6" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-106-1.png" width="672" /></p>
<div class="sourceCode" id="cb708"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb708-1"><a href="the-forecasters-toolbox.html#cb708-1" tabindex="-1"></a><span class="co"># =&gt; Yes, the residuals from Drift method resemble white noise</span></span></code></pre></div>
<div class="sourceCode" id="cb709"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb709-1"><a href="the-forecasters-toolbox.html#cb709-1" tabindex="-1"></a>hh_fit <span class="sc">|&gt;</span></span>
<span id="cb709-2"><a href="the-forecasters-toolbox.html#cb709-2" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">&#39;Japan&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb709-3"><a href="the-forecasters-toolbox.html#cb709-3" tabindex="-1"></a>  <span class="fu">select</span>(Drift) <span class="sc">|&gt;</span></span>
<span id="cb709-4"><a href="the-forecasters-toolbox.html#cb709-4" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-107-1.png" width="672" /></p>
<div class="sourceCode" id="cb713"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb713-1"><a href="the-forecasters-toolbox.html#cb713-1" tabindex="-1"></a><span class="co"># =&gt; Yes, the residuals from Drift method resemble white noise</span></span></code></pre></div>
<div class="sourceCode" id="cb714"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb714-1"><a href="the-forecasters-toolbox.html#cb714-1" tabindex="-1"></a>hh_fit <span class="sc">|&gt;</span></span>
<span id="cb714-2"><a href="the-forecasters-toolbox.html#cb714-2" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">&#39;Canada&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb714-3"><a href="the-forecasters-toolbox.html#cb714-3" tabindex="-1"></a>  <span class="fu">select</span>(Drift) <span class="sc">|&gt;</span></span>
<span id="cb714-4"><a href="the-forecasters-toolbox.html#cb714-4" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-108-1.png" width="672" /></p>
<div class="sourceCode" id="cb718"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb718-1"><a href="the-forecasters-toolbox.html#cb718-1" tabindex="-1"></a><span class="co"># =&gt; Yes, the residuals from Drift method resemble white noise</span></span></code></pre></div>
<div class="sourceCode" id="cb719"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb719-1"><a href="the-forecasters-toolbox.html#cb719-1" tabindex="-1"></a>hh_fit <span class="sc">|&gt;</span></span>
<span id="cb719-2"><a href="the-forecasters-toolbox.html#cb719-2" tabindex="-1"></a>  <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">&#39;USA&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb719-3"><a href="the-forecasters-toolbox.html#cb719-3" tabindex="-1"></a>  <span class="fu">select</span>(Drift) <span class="sc">|&gt;</span></span>
<span id="cb719-4"><a href="the-forecasters-toolbox.html#cb719-4" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-109-1.png" width="672" /></p>
<div class="sourceCode" id="cb723"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb723-1"><a href="the-forecasters-toolbox.html#cb723-1" tabindex="-1"></a><span class="co"># =&gt; Yes, the residuals from Drift method resemble white noise</span></span></code></pre></div>
<ol start="10" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb724"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb724-1"><a href="the-forecasters-toolbox.html#cb724-1" tabindex="-1"></a>takeaway_food <span class="ot">&lt;-</span> aus_retail <span class="sc">|&gt;</span></span>
<span id="cb724-2"><a href="the-forecasters-toolbox.html#cb724-2" tabindex="-1"></a>  <span class="fu">filter</span>(Industry <span class="sc">==</span> <span class="st">&#39;Cafes, restaurants and takeaway food services&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb724-3"><a href="the-forecasters-toolbox.html#cb724-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Industry)</span>
<span id="cb724-4"><a href="the-forecasters-toolbox.html#cb724-4" tabindex="-1"></a></span>
<span id="cb724-5"><a href="the-forecasters-toolbox.html#cb724-5" tabindex="-1"></a>takeaway_food <span class="sc">|&gt;</span></span>
<span id="cb724-6"><a href="the-forecasters-toolbox.html#cb724-6" tabindex="-1"></a>  <span class="fu">autoplot</span>(Turnover) <span class="sc">+</span></span>
<span id="cb724-7"><a href="the-forecasters-toolbox.html#cb724-7" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(State)) <span class="sc">+</span></span>
<span id="cb724-8"><a href="the-forecasters-toolbox.html#cb724-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-110-1.png" width="672" /></p>
<div class="sourceCode" id="cb725"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb725-1"><a href="the-forecasters-toolbox.html#cb725-1" tabindex="-1"></a><span class="co"># Best method assumptions:</span></span>
<span id="cb725-2"><a href="the-forecasters-toolbox.html#cb725-2" tabindex="-1"></a><span class="co"># Australian Capital Territory - Drift</span></span>
<span id="cb725-3"><a href="the-forecasters-toolbox.html#cb725-3" tabindex="-1"></a><span class="co"># New South Wales - Seasonal Naive</span></span>
<span id="cb725-4"><a href="the-forecasters-toolbox.html#cb725-4" tabindex="-1"></a><span class="co"># Northern Territory - Naive</span></span>
<span id="cb725-5"><a href="the-forecasters-toolbox.html#cb725-5" tabindex="-1"></a><span class="co"># Queensland - Seasonal Naive</span></span>
<span id="cb725-6"><a href="the-forecasters-toolbox.html#cb725-6" tabindex="-1"></a><span class="co"># South Australia - Drift</span></span>
<span id="cb725-7"><a href="the-forecasters-toolbox.html#cb725-7" tabindex="-1"></a><span class="co"># Tasmania - Naive</span></span>
<span id="cb725-8"><a href="the-forecasters-toolbox.html#cb725-8" tabindex="-1"></a><span class="co"># Victoria - Seasonal Naive</span></span>
<span id="cb725-9"><a href="the-forecasters-toolbox.html#cb725-9" tabindex="-1"></a><span class="co"># Western Australia - Seasonal Naive</span></span></code></pre></div>
<div class="sourceCode" id="cb726"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb726-1"><a href="the-forecasters-toolbox.html#cb726-1" tabindex="-1"></a><span class="co"># a.</span></span>
<span id="cb726-2"><a href="the-forecasters-toolbox.html#cb726-2" tabindex="-1"></a></span>
<span id="cb726-3"><a href="the-forecasters-toolbox.html#cb726-3" tabindex="-1"></a>takeaway_train <span class="ot">&lt;-</span> takeaway_food <span class="sc">|&gt;</span></span>
<span id="cb726-4"><a href="the-forecasters-toolbox.html#cb726-4" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">|&gt;</span></span>
<span id="cb726-5"><a href="the-forecasters-toolbox.html#cb726-5" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span>(<span class="fu">n</span>()<span class="sc">-</span><span class="dv">4</span><span class="sc">*</span><span class="dv">12</span>))</span>
<span id="cb726-6"><a href="the-forecasters-toolbox.html#cb726-6" tabindex="-1"></a></span>
<span id="cb726-7"><a href="the-forecasters-toolbox.html#cb726-7" tabindex="-1"></a>takeaway_train</span></code></pre></div>
<pre><code>## # A tsibble: 3,072 x 4 [1M]
## # Key:       State [8]
## # Groups:    State [8]
##    State                        `Series ID`    Month Turnover
##    &lt;chr&gt;                        &lt;chr&gt;          &lt;mth&gt;    &lt;dbl&gt;
##  1 Australian Capital Territory A3349606J   1982 Apr      7.6
##  2 Australian Capital Territory A3349606J   1982 May      6.7
##  3 Australian Capital Territory A3349606J   1982 Jun      7.1
##  4 Australian Capital Territory A3349606J   1982 Jul      7.5
##  5 Australian Capital Territory A3349606J   1982 Aug      7.3
##  6 Australian Capital Territory A3349606J   1982 Sep      8.1
##  7 Australian Capital Territory A3349606J   1982 Oct      8.9
##  8 Australian Capital Territory A3349606J   1982 Nov      9.6
##  9 Australian Capital Territory A3349606J   1982 Dec     11.2
## 10 Australian Capital Territory A3349606J   1983 Jan      7.7
## # ℹ 3,062 more rows</code></pre>
<div class="sourceCode" id="cb728"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb728-1"><a href="the-forecasters-toolbox.html#cb728-1" tabindex="-1"></a><span class="co"># check train-test splitting</span></span>
<span id="cb728-2"><a href="the-forecasters-toolbox.html#cb728-2" tabindex="-1"></a>takeaway_train <span class="sc">|&gt;</span></span>
<span id="cb728-3"><a href="the-forecasters-toolbox.html#cb728-3" tabindex="-1"></a>  <span class="co"># Train</span></span>
<span id="cb728-4"><a href="the-forecasters-toolbox.html#cb728-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(Turnover, <span class="at">color =</span> <span class="st">&#39;black&#39;</span>) <span class="sc">+</span></span>
<span id="cb728-5"><a href="the-forecasters-toolbox.html#cb728-5" tabindex="-1"></a>  <span class="co"># test</span></span>
<span id="cb728-6"><a href="the-forecasters-toolbox.html#cb728-6" tabindex="-1"></a>  <span class="fu">autolayer</span>(<span class="fu">anti_join</span>(takeaway_food, takeaway_train), <span class="at">color =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb728-7"><a href="the-forecasters-toolbox.html#cb728-7" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(State)) <span class="sc">+</span></span>
<span id="cb728-8"><a href="the-forecasters-toolbox.html#cb728-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&#39;none&#39;</span>)</span></code></pre></div>
<pre><code>## `mutate_if()` ignored the following grouping variables:
## Joining with `by = join_by(State, `Series ID`, Month, Turnover)`
## Plot variable not specified, automatically selected `.vars = Turnover`
## • Column `State`</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-112-1.png" width="672" /></p>
<div class="sourceCode" id="cb730"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb730-1"><a href="the-forecasters-toolbox.html#cb730-1" tabindex="-1"></a><span class="co"># b.</span></span>
<span id="cb730-2"><a href="the-forecasters-toolbox.html#cb730-2" tabindex="-1"></a></span>
<span id="cb730-3"><a href="the-forecasters-toolbox.html#cb730-3" tabindex="-1"></a><span class="co"># fit the mopdel on the training set</span></span>
<span id="cb730-4"><a href="the-forecasters-toolbox.html#cb730-4" tabindex="-1"></a></span>
<span id="cb730-5"><a href="the-forecasters-toolbox.html#cb730-5" tabindex="-1"></a>takeaway_fit <span class="ot">&lt;-</span> takeaway_train <span class="sc">|&gt;</span></span>
<span id="cb730-6"><a href="the-forecasters-toolbox.html#cb730-6" tabindex="-1"></a>  <span class="fu">model</span>(</span>
<span id="cb730-7"><a href="the-forecasters-toolbox.html#cb730-7" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">MEAN</span>(Turnover),</span>
<span id="cb730-8"><a href="the-forecasters-toolbox.html#cb730-8" tabindex="-1"></a>    <span class="at">Naive =</span> <span class="fu">NAIVE</span>(Turnover),</span>
<span id="cb730-9"><a href="the-forecasters-toolbox.html#cb730-9" tabindex="-1"></a>    <span class="st">`</span><span class="at">Seasonal Naive</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">SNAIVE</span>(Turnover),</span>
<span id="cb730-10"><a href="the-forecasters-toolbox.html#cb730-10" tabindex="-1"></a>    <span class="at">Drift =</span> <span class="fu">RW</span>(Turnover <span class="sc">~</span> <span class="fu">drift</span>()))</span>
<span id="cb730-11"><a href="the-forecasters-toolbox.html#cb730-11" tabindex="-1"></a></span>
<span id="cb730-12"><a href="the-forecasters-toolbox.html#cb730-12" tabindex="-1"></a>takeaway_fc <span class="ot">&lt;-</span> takeaway_fit <span class="sc">|&gt;</span></span>
<span id="cb730-13"><a href="the-forecasters-toolbox.html#cb730-13" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">new_data =</span> <span class="fu">anti_join</span>(takeaway_food, takeaway_train)) </span></code></pre></div>
<pre><code>## Joining with `by = join_by(State, `Series ID`, Month, Turnover)`</code></pre>
<div class="sourceCode" id="cb732"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb732-1"><a href="the-forecasters-toolbox.html#cb732-1" tabindex="-1"></a>takeaway_fc <span class="sc">|&gt;</span></span>
<span id="cb732-2"><a href="the-forecasters-toolbox.html#cb732-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(takeaway_food) <span class="sc">+</span></span>
<span id="cb732-3"><a href="the-forecasters-toolbox.html#cb732-3" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows=</span><span class="fu">vars</span>(.model), <span class="at">cols=</span><span class="fu">vars</span>(State)) <span class="sc">+</span></span>
<span id="cb732-4"><a href="the-forecasters-toolbox.html#cb732-4" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&#39;none&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-113-1.png" width="672" /></p>
<div class="sourceCode" id="cb733"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb733-1"><a href="the-forecasters-toolbox.html#cb733-1" tabindex="-1"></a><span class="co"># c.</span></span>
<span id="cb733-2"><a href="the-forecasters-toolbox.html#cb733-2" tabindex="-1"></a></span>
<span id="cb733-3"><a href="the-forecasters-toolbox.html#cb733-3" tabindex="-1"></a>takeaway_fc <span class="sc">|&gt;</span></span>
<span id="cb733-4"><a href="the-forecasters-toolbox.html#cb733-4" tabindex="-1"></a>  <span class="fu">accuracy</span>(takeaway_food) <span class="sc">|&gt;</span></span>
<span id="cb733-5"><a href="the-forecasters-toolbox.html#cb733-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .model, <span class="at">y =</span> MAPE, <span class="at">fill =</span> State)) <span class="sc">+</span></span>
<span id="cb733-6"><a href="the-forecasters-toolbox.html#cb733-6" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb733-7"><a href="the-forecasters-toolbox.html#cb733-7" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span><span class="fu">round</span>(MAPE, <span class="dv">2</span>)), <span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.9</span>), <span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb733-8"><a href="the-forecasters-toolbox.html#cb733-8" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(State)) <span class="sc">+</span></span>
<span id="cb733-9"><a href="the-forecasters-toolbox.html#cb733-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&#39;none&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-114-1.png" width="672" /></p>
<div class="sourceCode" id="cb734"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb734-1"><a href="the-forecasters-toolbox.html#cb734-1" tabindex="-1"></a><span class="co"># Best method:</span></span>
<span id="cb734-2"><a href="the-forecasters-toolbox.html#cb734-2" tabindex="-1"></a><span class="co"># Australian Capital Territory - Drift</span></span>
<span id="cb734-3"><a href="the-forecasters-toolbox.html#cb734-3" tabindex="-1"></a><span class="co"># New South Wales - Naive</span></span>
<span id="cb734-4"><a href="the-forecasters-toolbox.html#cb734-4" tabindex="-1"></a><span class="co"># Northern Territory - Naive</span></span>
<span id="cb734-5"><a href="the-forecasters-toolbox.html#cb734-5" tabindex="-1"></a><span class="co"># Queensland - Seasonal Naive</span></span>
<span id="cb734-6"><a href="the-forecasters-toolbox.html#cb734-6" tabindex="-1"></a><span class="co"># South Australia - Drift</span></span>
<span id="cb734-7"><a href="the-forecasters-toolbox.html#cb734-7" tabindex="-1"></a><span class="co"># Tasmania - Naive</span></span>
<span id="cb734-8"><a href="the-forecasters-toolbox.html#cb734-8" tabindex="-1"></a><span class="co"># Victoria - Drift</span></span>
<span id="cb734-9"><a href="the-forecasters-toolbox.html#cb734-9" tabindex="-1"></a><span class="co"># Western Australia - Naive</span></span></code></pre></div>
<div class="sourceCode" id="cb735"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb735-1"><a href="the-forecasters-toolbox.html#cb735-1" tabindex="-1"></a><span class="co"># d.</span></span>
<span id="cb735-2"><a href="the-forecasters-toolbox.html#cb735-2" tabindex="-1"></a></span>
<span id="cb735-3"><a href="the-forecasters-toolbox.html#cb735-3" tabindex="-1"></a><span class="co"># Australian Capital Territory - Drift</span></span>
<span id="cb735-4"><a href="the-forecasters-toolbox.html#cb735-4" tabindex="-1"></a>takeaway_fit <span class="sc">|&gt;</span></span>
<span id="cb735-5"><a href="the-forecasters-toolbox.html#cb735-5" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;Australian Capital Territory&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb735-6"><a href="the-forecasters-toolbox.html#cb735-6" tabindex="-1"></a>  <span class="fu">select</span>(Drift) <span class="sc">|&gt;</span></span>
<span id="cb735-7"><a href="the-forecasters-toolbox.html#cb735-7" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-115-1.png" width="672" /></p>
<div class="sourceCode" id="cb739"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb739-1"><a href="the-forecasters-toolbox.html#cb739-1" tabindex="-1"></a><span class="co"># =&gt; No, the residuals from Drift method do not resemble white noise, there are autocorrelation in the residuals and non constant variance of the residuals</span></span></code></pre></div>
<div class="sourceCode" id="cb740"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb740-1"><a href="the-forecasters-toolbox.html#cb740-1" tabindex="-1"></a><span class="co"># New South Wales - Naive</span></span>
<span id="cb740-2"><a href="the-forecasters-toolbox.html#cb740-2" tabindex="-1"></a></span>
<span id="cb740-3"><a href="the-forecasters-toolbox.html#cb740-3" tabindex="-1"></a>takeaway_fit <span class="sc">|&gt;</span></span>
<span id="cb740-4"><a href="the-forecasters-toolbox.html#cb740-4" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;New South Wales&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb740-5"><a href="the-forecasters-toolbox.html#cb740-5" tabindex="-1"></a>  <span class="fu">select</span>(Naive) <span class="sc">|&gt;</span></span>
<span id="cb740-6"><a href="the-forecasters-toolbox.html#cb740-6" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-116-1.png" width="672" /></p>
<div class="sourceCode" id="cb744"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb744-1"><a href="the-forecasters-toolbox.html#cb744-1" tabindex="-1"></a><span class="co"># =&gt; No, the residuals from Naive method do not resemble white noise, there are autocorrelation in the residuals and non constant variance of the residuals</span></span></code></pre></div>
<div class="sourceCode" id="cb745"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb745-1"><a href="the-forecasters-toolbox.html#cb745-1" tabindex="-1"></a><span class="co"># Northern Territory - Naive</span></span>
<span id="cb745-2"><a href="the-forecasters-toolbox.html#cb745-2" tabindex="-1"></a></span>
<span id="cb745-3"><a href="the-forecasters-toolbox.html#cb745-3" tabindex="-1"></a>takeaway_fit <span class="sc">|&gt;</span></span>
<span id="cb745-4"><a href="the-forecasters-toolbox.html#cb745-4" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;Northern Territory&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb745-5"><a href="the-forecasters-toolbox.html#cb745-5" tabindex="-1"></a>  <span class="fu">select</span>(Naive) <span class="sc">|&gt;</span></span>
<span id="cb745-6"><a href="the-forecasters-toolbox.html#cb745-6" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-117-1.png" width="672" /></p>
<div class="sourceCode" id="cb749"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb749-1"><a href="the-forecasters-toolbox.html#cb749-1" tabindex="-1"></a><span class="co"># =&gt; No, the residuals from Naive method do not resemble white noise, there are autocorrelation in the residuals and non constant variance of the residuals</span></span></code></pre></div>
<div class="sourceCode" id="cb750"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb750-1"><a href="the-forecasters-toolbox.html#cb750-1" tabindex="-1"></a><span class="co"># Queensland - Seasonal Naive</span></span>
<span id="cb750-2"><a href="the-forecasters-toolbox.html#cb750-2" tabindex="-1"></a></span>
<span id="cb750-3"><a href="the-forecasters-toolbox.html#cb750-3" tabindex="-1"></a>takeaway_fit <span class="sc">|&gt;</span></span>
<span id="cb750-4"><a href="the-forecasters-toolbox.html#cb750-4" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;Queensland&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb750-5"><a href="the-forecasters-toolbox.html#cb750-5" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">Seasonal Naive</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb750-6"><a href="the-forecasters-toolbox.html#cb750-6" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 12 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 12 rows containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 12 rows containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-118-1.png" width="672" /></p>
<div class="sourceCode" id="cb754"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb754-1"><a href="the-forecasters-toolbox.html#cb754-1" tabindex="-1"></a><span class="co"># =&gt; No, the residuals from Naive method do not resemble white noise, there are autocorrelation in the residuals and non constant variance of the residuals</span></span></code></pre></div>
<div class="sourceCode" id="cb755"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb755-1"><a href="the-forecasters-toolbox.html#cb755-1" tabindex="-1"></a><span class="co"># South Australia - Drift</span></span>
<span id="cb755-2"><a href="the-forecasters-toolbox.html#cb755-2" tabindex="-1"></a></span>
<span id="cb755-3"><a href="the-forecasters-toolbox.html#cb755-3" tabindex="-1"></a>takeaway_fit <span class="sc">|&gt;</span></span>
<span id="cb755-4"><a href="the-forecasters-toolbox.html#cb755-4" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;South Australia&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb755-5"><a href="the-forecasters-toolbox.html#cb755-5" tabindex="-1"></a>  <span class="fu">select</span>(Drift) <span class="sc">|&gt;</span></span>
<span id="cb755-6"><a href="the-forecasters-toolbox.html#cb755-6" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-119-1.png" width="672" /></p>
<div class="sourceCode" id="cb759"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb759-1"><a href="the-forecasters-toolbox.html#cb759-1" tabindex="-1"></a><span class="co"># =&gt; No, the residuals from Naive method do not resemble white noise, there are autocorrelation in the residuals and non constant variance of the residuals</span></span></code></pre></div>
<div class="sourceCode" id="cb760"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb760-1"><a href="the-forecasters-toolbox.html#cb760-1" tabindex="-1"></a><span class="co"># Tasmania - Naive</span></span>
<span id="cb760-2"><a href="the-forecasters-toolbox.html#cb760-2" tabindex="-1"></a></span>
<span id="cb760-3"><a href="the-forecasters-toolbox.html#cb760-3" tabindex="-1"></a>takeaway_fit <span class="sc">|&gt;</span></span>
<span id="cb760-4"><a href="the-forecasters-toolbox.html#cb760-4" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;Tasmania&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb760-5"><a href="the-forecasters-toolbox.html#cb760-5" tabindex="-1"></a>  <span class="fu">select</span>(Naive) <span class="sc">|&gt;</span></span>
<span id="cb760-6"><a href="the-forecasters-toolbox.html#cb760-6" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-120-1.png" width="672" /></p>
<div class="sourceCode" id="cb764"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb764-1"><a href="the-forecasters-toolbox.html#cb764-1" tabindex="-1"></a><span class="co"># =&gt; No, the residuals from Naive method do not resemble white noise, there are autocorrelation in the residuals and non constant variance of the residuals</span></span></code></pre></div>
<div class="sourceCode" id="cb765"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb765-1"><a href="the-forecasters-toolbox.html#cb765-1" tabindex="-1"></a><span class="co"># Victoria - Drift</span></span>
<span id="cb765-2"><a href="the-forecasters-toolbox.html#cb765-2" tabindex="-1"></a></span>
<span id="cb765-3"><a href="the-forecasters-toolbox.html#cb765-3" tabindex="-1"></a>takeaway_fit <span class="sc">|&gt;</span></span>
<span id="cb765-4"><a href="the-forecasters-toolbox.html#cb765-4" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;Victoria&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb765-5"><a href="the-forecasters-toolbox.html#cb765-5" tabindex="-1"></a>  <span class="fu">select</span>(Drift) <span class="sc">|&gt;</span></span>
<span id="cb765-6"><a href="the-forecasters-toolbox.html#cb765-6" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-121-1.png" width="672" /></p>
<div class="sourceCode" id="cb769"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb769-1"><a href="the-forecasters-toolbox.html#cb769-1" tabindex="-1"></a><span class="co"># =&gt; No, the residuals from Naive method do not resemble white noise, there are autocorrelation in the residuals and non constant variance of the residuals</span></span></code></pre></div>
<div class="sourceCode" id="cb770"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb770-1"><a href="the-forecasters-toolbox.html#cb770-1" tabindex="-1"></a><span class="co"># Western Australia - Naive</span></span>
<span id="cb770-2"><a href="the-forecasters-toolbox.html#cb770-2" tabindex="-1"></a></span>
<span id="cb770-3"><a href="the-forecasters-toolbox.html#cb770-3" tabindex="-1"></a>takeaway_fit <span class="sc">|&gt;</span></span>
<span id="cb770-4"><a href="the-forecasters-toolbox.html#cb770-4" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">&#39;Western Australia&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb770-5"><a href="the-forecasters-toolbox.html#cb770-5" tabindex="-1"></a>  <span class="fu">select</span>(Naive) <span class="sc">|&gt;</span></span>
<span id="cb770-6"><a href="the-forecasters-toolbox.html#cb770-6" tabindex="-1"></a>  <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-122-1.png" width="672" /></p>
<div class="sourceCode" id="cb774"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb774-1"><a href="the-forecasters-toolbox.html#cb774-1" tabindex="-1"></a><span class="co"># =&gt; No, the residuals from Naive method do not resemble white noise, there are autocorrelation in the residuals and non constant variance of the residuals</span></span></code></pre></div>
<ol start="11" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb775"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb775-1"><a href="the-forecasters-toolbox.html#cb775-1" tabindex="-1"></a><span class="co"># a.</span></span>
<span id="cb775-2"><a href="the-forecasters-toolbox.html#cb775-2" tabindex="-1"></a></span>
<span id="cb775-3"><a href="the-forecasters-toolbox.html#cb775-3" tabindex="-1"></a>decomp <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb775-4"><a href="the-forecasters-toolbox.html#cb775-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Bricks)) <span class="sc">|&gt;</span></span>
<span id="cb775-5"><a href="the-forecasters-toolbox.html#cb775-5" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">STL</span>(Bricks <span class="sc">~</span> <span class="fu">trend</span>(<span class="at">window=</span><span class="dv">5</span>) <span class="sc">+</span> <span class="fu">season</span>(<span class="at">window=</span><span class="st">&#39;periodic&#39;</span>), <span class="at">robust =</span> <span class="cn">TRUE</span>))</span>
<span id="cb775-6"><a href="the-forecasters-toolbox.html#cb775-6" tabindex="-1"></a></span>
<span id="cb775-7"><a href="the-forecasters-toolbox.html#cb775-7" tabindex="-1"></a>decomp <span class="sc">|&gt;</span></span>
<span id="cb775-8"><a href="the-forecasters-toolbox.html#cb775-8" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">|&gt;</span></span>
<span id="cb775-9"><a href="the-forecasters-toolbox.html#cb775-9" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-123-1.png" width="672" /></p>
<div class="sourceCode" id="cb776"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb776-1"><a href="the-forecasters-toolbox.html#cb776-1" tabindex="-1"></a><span class="co"># b.</span></span>
<span id="cb776-2"><a href="the-forecasters-toolbox.html#cb776-2" tabindex="-1"></a></span>
<span id="cb776-3"><a href="the-forecasters-toolbox.html#cb776-3" tabindex="-1"></a>decomp <span class="sc">|&gt;</span></span>
<span id="cb776-4"><a href="the-forecasters-toolbox.html#cb776-4" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">|&gt;</span></span>
<span id="cb776-5"><a href="the-forecasters-toolbox.html#cb776-5" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>.model) <span class="sc">|&gt;</span></span>
<span id="cb776-6"><a href="the-forecasters-toolbox.html#cb776-6" tabindex="-1"></a>  <span class="fu">autoplot</span>(season_adjust) <span class="sc">+</span></span>
<span id="cb776-7"><a href="the-forecasters-toolbox.html#cb776-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Seasonal adjusted data of bricks production&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-124-1.png" width="672" /></p>
<div class="sourceCode" id="cb777"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb777-1"><a href="the-forecasters-toolbox.html#cb777-1" tabindex="-1"></a><span class="co"># c.</span></span>
<span id="cb777-2"><a href="the-forecasters-toolbox.html#cb777-2" tabindex="-1"></a></span>
<span id="cb777-3"><a href="the-forecasters-toolbox.html#cb777-3" tabindex="-1"></a>decomp <span class="sc">|&gt;</span></span>
<span id="cb777-4"><a href="the-forecasters-toolbox.html#cb777-4" tabindex="-1"></a>  <span class="fu">components</span>() <span class="sc">|&gt;</span></span>
<span id="cb777-5"><a href="the-forecasters-toolbox.html#cb777-5" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>.model) <span class="sc">|&gt;</span></span>
<span id="cb777-6"><a href="the-forecasters-toolbox.html#cb777-6" tabindex="-1"></a>  <span class="fu">model</span>(<span class="fu">NAIVE</span>(season_adjust)) <span class="sc">|&gt;</span></span>
<span id="cb777-7"><a href="the-forecasters-toolbox.html#cb777-7" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">h =</span> <span class="dv">8</span>) <span class="sc">|&gt;</span></span>
<span id="cb777-8"><a href="the-forecasters-toolbox.html#cb777-8" tabindex="-1"></a>  <span class="fu">autoplot</span>(decomp <span class="sc">|&gt;</span></span>
<span id="cb777-9"><a href="the-forecasters-toolbox.html#cb777-9" tabindex="-1"></a>              <span class="fu">components</span>() <span class="sc">|&gt;</span></span>
<span id="cb777-10"><a href="the-forecasters-toolbox.html#cb777-10" tabindex="-1"></a>              <span class="fu">select</span>(<span class="sc">-</span>.model) )</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-125-1.png" width="672" /></p>
<div class="sourceCode" id="cb778"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb778-1"><a href="the-forecasters-toolbox.html#cb778-1" tabindex="-1"></a><span class="co"># d.</span></span>
<span id="cb778-2"><a href="the-forecasters-toolbox.html#cb778-2" tabindex="-1"></a></span>
<span id="cb778-3"><a href="the-forecasters-toolbox.html#cb778-3" tabindex="-1"></a></span>
<span id="cb778-4"><a href="the-forecasters-toolbox.html#cb778-4" tabindex="-1"></a>fit_dcmp <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb778-5"><a href="the-forecasters-toolbox.html#cb778-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Bricks)) <span class="sc">|&gt;</span></span>
<span id="cb778-6"><a href="the-forecasters-toolbox.html#cb778-6" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">stlf =</span> <span class="fu">decomposition_model</span>(</span>
<span id="cb778-7"><a href="the-forecasters-toolbox.html#cb778-7" tabindex="-1"></a>    <span class="fu">STL</span>(Bricks <span class="sc">~</span> <span class="fu">trend</span>(<span class="at">window =</span> <span class="dv">7</span>)),</span>
<span id="cb778-8"><a href="the-forecasters-toolbox.html#cb778-8" tabindex="-1"></a>    <span class="fu">NAIVE</span>(season_adjust)</span>
<span id="cb778-9"><a href="the-forecasters-toolbox.html#cb778-9" tabindex="-1"></a>  ))</span>
<span id="cb778-10"><a href="the-forecasters-toolbox.html#cb778-10" tabindex="-1"></a>fit_dcmp <span class="sc">|&gt;</span></span>
<span id="cb778-11"><a href="the-forecasters-toolbox.html#cb778-11" tabindex="-1"></a>  <span class="fu">forecast</span>() <span class="sc">|&gt;</span></span>
<span id="cb778-12"><a href="the-forecasters-toolbox.html#cb778-12" tabindex="-1"></a>  <span class="fu">autoplot</span>(aus_production)<span class="sc">+</span></span>
<span id="cb778-13"><a href="the-forecasters-toolbox.html#cb778-13" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Million bricks&quot;</span>,</span>
<span id="cb778-14"><a href="the-forecasters-toolbox.html#cb778-14" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Australian bricks production forecasts&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 20 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-126-1.png" width="672" /></p>
<div class="sourceCode" id="cb780"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb780-1"><a href="the-forecasters-toolbox.html#cb780-1" tabindex="-1"></a><span class="co"># e. </span></span>
<span id="cb780-2"><a href="the-forecasters-toolbox.html#cb780-2" tabindex="-1"></a></span>
<span id="cb780-3"><a href="the-forecasters-toolbox.html#cb780-3" tabindex="-1"></a>fit_dcmp <span class="sc">|&gt;</span> <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 4 rows containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 4 rows containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-127-1.png" width="672" /></p>
<div class="sourceCode" id="cb784"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb784-1"><a href="the-forecasters-toolbox.html#cb784-1" tabindex="-1"></a><span class="co"># f.</span></span>
<span id="cb784-2"><a href="the-forecasters-toolbox.html#cb784-2" tabindex="-1"></a>fit_dcmp <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb784-3"><a href="the-forecasters-toolbox.html#cb784-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Bricks)) <span class="sc">|&gt;</span></span>
<span id="cb784-4"><a href="the-forecasters-toolbox.html#cb784-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">stlf =</span> <span class="fu">decomposition_model</span>(</span>
<span id="cb784-5"><a href="the-forecasters-toolbox.html#cb784-5" tabindex="-1"></a>    <span class="fu">STL</span>(Bricks <span class="sc">~</span> <span class="fu">trend</span>(<span class="at">window =</span> <span class="dv">7</span>), <span class="at">robust =</span> <span class="cn">TRUE</span>),</span>
<span id="cb784-6"><a href="the-forecasters-toolbox.html#cb784-6" tabindex="-1"></a>    <span class="fu">NAIVE</span>(season_adjust)</span>
<span id="cb784-7"><a href="the-forecasters-toolbox.html#cb784-7" tabindex="-1"></a>  ))</span>
<span id="cb784-8"><a href="the-forecasters-toolbox.html#cb784-8" tabindex="-1"></a>fit_dcmp <span class="sc">|&gt;</span></span>
<span id="cb784-9"><a href="the-forecasters-toolbox.html#cb784-9" tabindex="-1"></a>  <span class="fu">forecast</span>() <span class="sc">|&gt;</span></span>
<span id="cb784-10"><a href="the-forecasters-toolbox.html#cb784-10" tabindex="-1"></a>  <span class="fu">autoplot</span>(aus_production)<span class="sc">+</span></span>
<span id="cb784-11"><a href="the-forecasters-toolbox.html#cb784-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Million bricks&quot;</span>,</span>
<span id="cb784-12"><a href="the-forecasters-toolbox.html#cb784-12" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Australian bricks production forecasts&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 20 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-128-1.png" width="672" /></p>
<div class="sourceCode" id="cb786"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb786-1"><a href="the-forecasters-toolbox.html#cb786-1" tabindex="-1"></a>fit_dcmp <span class="sc">|&gt;</span> <span class="fu">gg_tsresiduals</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 4 rows containing missing values or values outside the scale range (`geom_point()`).</code></pre>
<pre><code>## Warning: Removed 4 rows containing non-finite outside the scale range (`stat_bin()`).</code></pre>
<p><img src="figure_html/ch05-ts-toolbox-129-1.png" width="672" /></p>
<p>Forecasting with the robust STL decomposition decreases autocorrelation of the residuals.</p>
<div class="sourceCode" id="cb790"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb790-1"><a href="the-forecasters-toolbox.html#cb790-1" tabindex="-1"></a><span class="co"># g. Compare forecasts from decomposition_model() with those from SNAIVE(), using a test set comprising the last 2 years of data. Which is better?</span></span>
<span id="cb790-2"><a href="the-forecasters-toolbox.html#cb790-2" tabindex="-1"></a></span>
<span id="cb790-3"><a href="the-forecasters-toolbox.html#cb790-3" tabindex="-1"></a>bricks <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb790-4"><a href="the-forecasters-toolbox.html#cb790-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Bricks)) <span class="sc">|&gt;</span></span>
<span id="cb790-5"><a href="the-forecasters-toolbox.html#cb790-5" tabindex="-1"></a>  <span class="fu">select</span>(Bricks) <span class="sc">|&gt;</span></span>
<span id="cb790-6"><a href="the-forecasters-toolbox.html#cb790-6" tabindex="-1"></a>  <span class="fu">update_tsibble</span>(<span class="at">index =</span> Quarter, <span class="at">regular =</span> <span class="cn">TRUE</span>)</span>
<span id="cb790-7"><a href="the-forecasters-toolbox.html#cb790-7" tabindex="-1"></a></span>
<span id="cb790-8"><a href="the-forecasters-toolbox.html#cb790-8" tabindex="-1"></a><span class="co"># training set</span></span>
<span id="cb790-9"><a href="the-forecasters-toolbox.html#cb790-9" tabindex="-1"></a>brick_train <span class="ot">&lt;-</span> bricks <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span>(<span class="fu">nrow</span>(bricks)<span class="sc">-</span><span class="dv">8</span>))</span>
<span id="cb790-10"><a href="the-forecasters-toolbox.html#cb790-10" tabindex="-1"></a><span class="co"># test set</span></span>
<span id="cb790-11"><a href="the-forecasters-toolbox.html#cb790-11" tabindex="-1"></a>brick_test <span class="ot">&lt;-</span> bricks <span class="sc">|&gt;</span> <span class="fu">anti_join</span>(brick_train, <span class="at">by=</span><span class="st">&#39;Quarter&#39;</span>)</span>
<span id="cb790-12"><a href="the-forecasters-toolbox.html#cb790-12" tabindex="-1"></a></span>
<span id="cb790-13"><a href="the-forecasters-toolbox.html#cb790-13" tabindex="-1"></a>brick_train <span class="sc">|&gt;</span></span>
<span id="cb790-14"><a href="the-forecasters-toolbox.html#cb790-14" tabindex="-1"></a>  <span class="fu">autoplot</span>(Bricks) <span class="sc">+</span></span>
<span id="cb790-15"><a href="the-forecasters-toolbox.html#cb790-15" tabindex="-1"></a>  <span class="fu">autolayer</span>(brick_test, Bricks, <span class="at">color =</span> <span class="st">&#39;red&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-130-1.png" width="672" /></p>
<div class="sourceCode" id="cb791"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb791-1"><a href="the-forecasters-toolbox.html#cb791-1" tabindex="-1"></a><span class="co"># fit decomposition model on training set</span></span>
<span id="cb791-2"><a href="the-forecasters-toolbox.html#cb791-2" tabindex="-1"></a>decomp_fit <span class="ot">&lt;-</span> brick_train <span class="sc">|&gt;</span></span>
<span id="cb791-3"><a href="the-forecasters-toolbox.html#cb791-3" tabindex="-1"></a>              <span class="fu">model</span>(<span class="at">stlf =</span> <span class="fu">decomposition_model</span>(</span>
<span id="cb791-4"><a href="the-forecasters-toolbox.html#cb791-4" tabindex="-1"></a>                <span class="fu">STL</span>(Bricks <span class="sc">~</span> <span class="fu">trend</span>(<span class="at">window =</span> <span class="dv">5</span>), <span class="at">robust =</span> <span class="cn">TRUE</span>),</span>
<span id="cb791-5"><a href="the-forecasters-toolbox.html#cb791-5" tabindex="-1"></a>                <span class="fu">NAIVE</span>(season_adjust)</span>
<span id="cb791-6"><a href="the-forecasters-toolbox.html#cb791-6" tabindex="-1"></a>              ))</span>
<span id="cb791-7"><a href="the-forecasters-toolbox.html#cb791-7" tabindex="-1"></a></span>
<span id="cb791-8"><a href="the-forecasters-toolbox.html#cb791-8" tabindex="-1"></a><span class="co"># forecast decomp model on test set</span></span>
<span id="cb791-9"><a href="the-forecasters-toolbox.html#cb791-9" tabindex="-1"></a>decomp_fc <span class="ot">&lt;-</span> decomp_fit <span class="sc">|&gt;</span></span>
<span id="cb791-10"><a href="the-forecasters-toolbox.html#cb791-10" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">new_data =</span> brick_test)</span>
<span id="cb791-11"><a href="the-forecasters-toolbox.html#cb791-11" tabindex="-1"></a></span>
<span id="cb791-12"><a href="the-forecasters-toolbox.html#cb791-12" tabindex="-1"></a>decomp_fc <span class="sc">|&gt;</span></span>
<span id="cb791-13"><a href="the-forecasters-toolbox.html#cb791-13" tabindex="-1"></a>  <span class="fu">autoplot</span>(bricks) <span class="sc">+</span></span>
<span id="cb791-14"><a href="the-forecasters-toolbox.html#cb791-14" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Million bricks&quot;</span>,</span>
<span id="cb791-15"><a href="the-forecasters-toolbox.html#cb791-15" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Australian bricks production&quot;</span>, </span>
<span id="cb791-16"><a href="the-forecasters-toolbox.html#cb791-16" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Decomposition forecasts&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-130-2.png" width="672" /></p>
<div class="sourceCode" id="cb792"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb792-1"><a href="the-forecasters-toolbox.html#cb792-1" tabindex="-1"></a><span class="co"># fit seasonal naive model on training set</span></span>
<span id="cb792-2"><a href="the-forecasters-toolbox.html#cb792-2" tabindex="-1"></a>snaive_fit <span class="ot">&lt;-</span> brick_train <span class="sc">|&gt;</span></span>
<span id="cb792-3"><a href="the-forecasters-toolbox.html#cb792-3" tabindex="-1"></a>        <span class="fu">model</span>(<span class="fu">SNAIVE</span>(Bricks))</span>
<span id="cb792-4"><a href="the-forecasters-toolbox.html#cb792-4" tabindex="-1"></a><span class="co"># forecast snaive on test set</span></span>
<span id="cb792-5"><a href="the-forecasters-toolbox.html#cb792-5" tabindex="-1"></a>snaive_fc <span class="ot">&lt;-</span> snaive_fit <span class="sc">|&gt;</span></span>
<span id="cb792-6"><a href="the-forecasters-toolbox.html#cb792-6" tabindex="-1"></a>  <span class="fu">forecast</span>(<span class="at">new_data =</span> brick_test)</span>
<span id="cb792-7"><a href="the-forecasters-toolbox.html#cb792-7" tabindex="-1"></a></span>
<span id="cb792-8"><a href="the-forecasters-toolbox.html#cb792-8" tabindex="-1"></a>snaive_fc <span class="sc">|&gt;</span></span>
<span id="cb792-9"><a href="the-forecasters-toolbox.html#cb792-9" tabindex="-1"></a>  <span class="fu">autoplot</span>(bricks)<span class="sc">+</span></span>
<span id="cb792-10"><a href="the-forecasters-toolbox.html#cb792-10" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Million bricks&quot;</span>,</span>
<span id="cb792-11"><a href="the-forecasters-toolbox.html#cb792-11" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Australian bricks production&quot;</span>, </span>
<span id="cb792-12"><a href="the-forecasters-toolbox.html#cb792-12" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Seasonal Naive forecasts&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-131-1.png" width="672" /></p>
<div class="sourceCode" id="cb793"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb793-1"><a href="the-forecasters-toolbox.html#cb793-1" tabindex="-1"></a><span class="co"># Compering decomp and snaive forecasts</span></span>
<span id="cb793-2"><a href="the-forecasters-toolbox.html#cb793-2" tabindex="-1"></a><span class="fu">bind_rows</span>(decomp_fc <span class="sc">|&gt;</span> <span class="fu">accuracy</span>(bricks),</span>
<span id="cb793-3"><a href="the-forecasters-toolbox.html#cb793-3" tabindex="-1"></a>          snaive_fc <span class="sc">|&gt;</span> <span class="fu">accuracy</span>(bricks))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 10
##   .model         .type    ME  RMSE   MAE   MPE  MAPE  MASE RMSSE    ACF1
##   &lt;chr&gt;          &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1 stlf           Test   9.29  19.3  14.0 2.15   3.40 0.388 0.393  0.0510
## 2 SNAIVE(Bricks) Test   2.75  20    18.2 0.395  4.52 0.504 0.407 -0.0503</code></pre>
<p>The forecasts from decomposition model are better than from seasonal naive model.</p>
<ol start="12" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb795"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb795-1"><a href="the-forecasters-toolbox.html#cb795-1" tabindex="-1"></a><span class="co"># a.</span></span>
<span id="cb795-2"><a href="the-forecasters-toolbox.html#cb795-2" tabindex="-1"></a></span>
<span id="cb795-3"><a href="the-forecasters-toolbox.html#cb795-3" tabindex="-1"></a>gc_tourism <span class="ot">&lt;-</span> tourism <span class="sc">|&gt;</span></span>
<span id="cb795-4"><a href="the-forecasters-toolbox.html#cb795-4" tabindex="-1"></a>                <span class="fu">filter</span>(Region <span class="sc">==</span> <span class="st">&#39;Gold Coast&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb795-5"><a href="the-forecasters-toolbox.html#cb795-5" tabindex="-1"></a>                <span class="fu">summarise</span>(<span class="at">Trips =</span> <span class="fu">sum</span>(Trips))</span>
<span id="cb795-6"><a href="the-forecasters-toolbox.html#cb795-6" tabindex="-1"></a></span>
<span id="cb795-7"><a href="the-forecasters-toolbox.html#cb795-7" tabindex="-1"></a>gc_tourism <span class="sc">|&gt;</span></span>
<span id="cb795-8"><a href="the-forecasters-toolbox.html#cb795-8" tabindex="-1"></a>  <span class="fu">autoplot</span>(Trips) <span class="sc">+</span></span>
<span id="cb795-9"><a href="the-forecasters-toolbox.html#cb795-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Thousands&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Quarterly visitor nights in Gold Coast, Australia&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-133-1.png" width="672" /></p>
<div class="sourceCode" id="cb796"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb796-1"><a href="the-forecasters-toolbox.html#cb796-1" tabindex="-1"></a><span class="co"># b.</span></span>
<span id="cb796-2"><a href="the-forecasters-toolbox.html#cb796-2" tabindex="-1"></a></span>
<span id="cb796-3"><a href="the-forecasters-toolbox.html#cb796-3" tabindex="-1"></a>gc_train_1 <span class="ot">&lt;-</span> gc_tourism <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span>(<span class="fu">n</span>()<span class="sc">-</span><span class="dv">4</span>))</span>
<span id="cb796-4"><a href="the-forecasters-toolbox.html#cb796-4" tabindex="-1"></a>gc_train_2 <span class="ot">&lt;-</span> gc_tourism <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span>(<span class="fu">n</span>()<span class="sc">-</span><span class="dv">8</span>))</span>
<span id="cb796-5"><a href="the-forecasters-toolbox.html#cb796-5" tabindex="-1"></a>gc_train_3 <span class="ot">&lt;-</span> gc_tourism <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span>(<span class="fu">n</span>()<span class="sc">-</span><span class="dv">12</span>))</span></code></pre></div>
<div class="sourceCode" id="cb797"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb797-1"><a href="the-forecasters-toolbox.html#cb797-1" tabindex="-1"></a>examine_splitting_tourism <span class="ot">&lt;-</span> <span class="cf">function</span>(full, train, name){</span>
<span id="cb797-2"><a href="the-forecasters-toolbox.html#cb797-2" tabindex="-1"></a>  <span class="fu">print</span>(full <span class="sc">|&gt;</span></span>
<span id="cb797-3"><a href="the-forecasters-toolbox.html#cb797-3" tabindex="-1"></a>          <span class="fu">autoplot</span>(Trips) <span class="sc">+</span></span>
<span id="cb797-4"><a href="the-forecasters-toolbox.html#cb797-4" tabindex="-1"></a>          <span class="fu">autolayer</span>(full <span class="sc">|&gt;</span> <span class="fu">anti_join</span>(train, <span class="at">by=</span><span class="fu">c</span>(<span class="st">&#39;Quarter&#39;</span>)), Trips, <span class="at">color =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb797-5"><a href="the-forecasters-toolbox.html#cb797-5" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">title=</span>name)</span>
<span id="cb797-6"><a href="the-forecasters-toolbox.html#cb797-6" tabindex="-1"></a>        )</span>
<span id="cb797-7"><a href="the-forecasters-toolbox.html#cb797-7" tabindex="-1"></a>}</span>
<span id="cb797-8"><a href="the-forecasters-toolbox.html#cb797-8" tabindex="-1"></a></span>
<span id="cb797-9"><a href="the-forecasters-toolbox.html#cb797-9" tabindex="-1"></a><span class="fu">examine_splitting_tourism</span>(gc_tourism, gc_train_1, <span class="st">&#39;Training set 1&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-135-1.png" width="672" /></p>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb798-1"><a href="the-forecasters-toolbox.html#cb798-1" tabindex="-1"></a><span class="fu">examine_splitting_tourism</span>(gc_tourism, gc_train_2, <span class="st">&#39;Training set 2&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-136-1.png" width="672" /></p>
<div class="sourceCode" id="cb799"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb799-1"><a href="the-forecasters-toolbox.html#cb799-1" tabindex="-1"></a><span class="fu">examine_splitting_tourism</span>(gc_tourism, gc_train_3, <span class="st">&#39;Training set 3&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch05-ts-toolbox-137-1.png" width="672" /></p>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="the-forecasters-toolbox.html#cb800-1" tabindex="-1"></a><span class="co"># c.</span></span>
<span id="cb800-2"><a href="the-forecasters-toolbox.html#cb800-2" tabindex="-1"></a></span>
<span id="cb800-3"><a href="the-forecasters-toolbox.html#cb800-3" tabindex="-1"></a>gc_fit_1 <span class="ot">&lt;-</span> gc_train_1 <span class="sc">|&gt;</span></span>
<span id="cb800-4"><a href="the-forecasters-toolbox.html#cb800-4" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">snaive1 =</span> <span class="fu">SNAIVE</span>(Trips))</span>
<span id="cb800-5"><a href="the-forecasters-toolbox.html#cb800-5" tabindex="-1"></a>gc_fit_2 <span class="ot">&lt;-</span> gc_train_2 <span class="sc">|&gt;</span></span>
<span id="cb800-6"><a href="the-forecasters-toolbox.html#cb800-6" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">snaive2 =</span> <span class="fu">SNAIVE</span>(Trips))</span>
<span id="cb800-7"><a href="the-forecasters-toolbox.html#cb800-7" tabindex="-1"></a>gc_fit_3 <span class="ot">&lt;-</span> gc_train_3 <span class="sc">|&gt;</span></span>
<span id="cb800-8"><a href="the-forecasters-toolbox.html#cb800-8" tabindex="-1"></a>  <span class="fu">model</span>(<span class="at">snaive3 =</span> <span class="fu">SNAIVE</span>(Trips))</span>
<span id="cb800-9"><a href="the-forecasters-toolbox.html#cb800-9" tabindex="-1"></a></span>
<span id="cb800-10"><a href="the-forecasters-toolbox.html#cb800-10" tabindex="-1"></a>gc_fc_1 <span class="ot">&lt;-</span> gc_fit_1 <span class="sc">|&gt;</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">&#39;1 year&#39;</span>)</span>
<span id="cb800-11"><a href="the-forecasters-toolbox.html#cb800-11" tabindex="-1"></a>gc_fc_2 <span class="ot">&lt;-</span> gc_fit_2 <span class="sc">|&gt;</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">&#39;1 year&#39;</span>)</span>
<span id="cb800-12"><a href="the-forecasters-toolbox.html#cb800-12" tabindex="-1"></a>gc_fc_3 <span class="ot">&lt;-</span> gc_fit_3 <span class="sc">|&gt;</span> <span class="fu">forecast</span>(<span class="at">h =</span> <span class="st">&#39;1 year&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb801"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb801-1"><a href="the-forecasters-toolbox.html#cb801-1" tabindex="-1"></a><span class="co"># d.</span></span>
<span id="cb801-2"><a href="the-forecasters-toolbox.html#cb801-2" tabindex="-1"></a></span>
<span id="cb801-3"><a href="the-forecasters-toolbox.html#cb801-3" tabindex="-1"></a><span class="fu">bind_rows</span>(gc_fc_1 <span class="sc">|&gt;</span> </span>
<span id="cb801-4"><a href="the-forecasters-toolbox.html#cb801-4" tabindex="-1"></a>              <span class="fu">accuracy</span>(<span class="fu">anti_join</span>(gc_tourism, gc_train_1, <span class="at">by =</span> <span class="st">&#39;Quarter&#39;</span>)),</span>
<span id="cb801-5"><a href="the-forecasters-toolbox.html#cb801-5" tabindex="-1"></a>          gc_fc_2 <span class="sc">|&gt;</span> </span>
<span id="cb801-6"><a href="the-forecasters-toolbox.html#cb801-6" tabindex="-1"></a>              <span class="fu">accuracy</span>(<span class="fu">anti_join</span>(gc_tourism, gc_train_2, <span class="at">by =</span> <span class="st">&#39;Quarter&#39;</span>)),</span>
<span id="cb801-7"><a href="the-forecasters-toolbox.html#cb801-7" tabindex="-1"></a>          gc_fc_3 <span class="sc">|&gt;</span> </span>
<span id="cb801-8"><a href="the-forecasters-toolbox.html#cb801-8" tabindex="-1"></a>              <span class="fu">accuracy</span>(<span class="fu">anti_join</span>(gc_tourism, gc_train_3, <span class="at">by =</span> <span class="st">&#39;Quarter&#39;</span>)))<span class="sc">$</span>MAPE</span></code></pre></div>
<pre><code>## [1] 15.060553  4.320729  9.067368</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="time-series-features.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="judgmental-forecasts.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "fixed"
},
"info": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
