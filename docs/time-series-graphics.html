<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Time series graphics | Forecasting: Principles and Practice (3rd ed)</title>
  <meta name="description" content="Chapter 2 Time series graphics | Forecasting: Principles and Practice (3rd ed)" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Time series graphics | Forecasting: Principles and Practice (3rd ed)" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="https://github.com/daluchkin/fpp3_notes" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Time series graphics | Forecasting: Principles and Practice (3rd ed)" />
  
  
  

<meta name="author" content="Dmitry Luchkin" />


<meta name="date" content="2024-12-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="getting-started.html"/>
<link rel="next" href="time-series-decomposition.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://otexts.com/fpp3/">Forecasting: Principles and Practice (3rd ed)</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#what-can-be-forecast"><i class="fa fa-check"></i><b>1.1</b> What can be forecast?</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#forecasting-goals-and-planning"><i class="fa fa-check"></i><b>1.2</b> Forecasting, goals and planning</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#determining-what-to-forecast"><i class="fa fa-check"></i><b>1.3</b> Determining what to forecast</a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#forecasting-data-and-methods"><i class="fa fa-check"></i><b>1.4</b> Forecasting data and methods</a></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#some-case-studies"><i class="fa fa-check"></i><b>1.5</b> Some case studies</a></li>
<li class="chapter" data-level="1.6" data-path="getting-started.html"><a href="getting-started.html#the-basic-steps-in-a-forecasting-task"><i class="fa fa-check"></i><b>1.6</b> The basic steps in a forecasting task</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="getting-started.html"><a href="getting-started.html#summary-five-basic-steps-of-forecasting"><i class="fa fa-check"></i><b>1.6.1</b> Summary: Five Basic Steps of Forecasting</a></li>
<li class="chapter" data-level="1.6.2" data-path="getting-started.html"><a href="getting-started.html#summary-five-basic-steps-of-forecasting-1"><i class="fa fa-check"></i><b>1.6.2</b> Summary: Five Basic Steps of Forecasting</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="getting-started.html"><a href="getting-started.html#the-statistical-forecasting-perspective"><i class="fa fa-check"></i><b>1.7</b> The statistical forecasting perspective</a></li>
<li class="chapter" data-level="1.8" data-path="getting-started.html"><a href="getting-started.html#excercises"><i class="fa fa-check"></i><b>1.8</b> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="time-series-graphics.html"><a href="time-series-graphics.html"><i class="fa fa-check"></i><b>2</b> Time series graphics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#tsibble-object"><i class="fa fa-check"></i><b>2.1</b> <code>tsibble</code> object</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#the-index-variable"><i class="fa fa-check"></i><b>2.1.1</b> The index variable</a></li>
<li class="chapter" data-level="2.1.2" data-path="time-series-graphics.html"><a href="time-series-graphics.html#the-key-variable"><i class="fa fa-check"></i><b>2.1.2</b> The key variable</a></li>
<li class="chapter" data-level="2.1.3" data-path="time-series-graphics.html"><a href="time-series-graphics.html#working-with-tsibble-object"><i class="fa fa-check"></i><b>2.1.3</b> Working with <code>tsibble</code> object</a></li>
<li class="chapter" data-level="2.1.4" data-path="time-series-graphics.html"><a href="time-series-graphics.html#read-a-csv-file-and-convert-to-a-tsibble"><i class="fa fa-check"></i><b>2.1.4</b> Read a csv file and convert to a tsibble</a></li>
<li class="chapter" data-level="2.1.5" data-path="time-series-graphics.html"><a href="time-series-graphics.html#the-seasonal-period"><i class="fa fa-check"></i><b>2.1.5</b> The seasonal period</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="time-series-graphics.html"><a href="time-series-graphics.html#time-plot"><i class="fa fa-check"></i><b>2.2</b> Time plot</a></li>
<li class="chapter" data-level="2.3" data-path="time-series-graphics.html"><a href="time-series-graphics.html#time-series-patterns"><i class="fa fa-check"></i><b>2.3</b> Time series patterns</a></li>
<li class="chapter" data-level="2.4" data-path="time-series-graphics.html"><a href="time-series-graphics.html#seasonal-plots"><i class="fa fa-check"></i><b>2.4</b> Seasonal plots</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#multiple-seasonal-periods"><i class="fa fa-check"></i><b>2.4.1</b> Multiple seasonal periods</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="time-series-graphics.html"><a href="time-series-graphics.html#seasonal-subseries-plots"><i class="fa fa-check"></i><b>2.5</b> Seasonal subseries plots</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#example-australian-holiday-tourism"><i class="fa fa-check"></i><b>2.5.1</b> Example: Australian holiday tourism</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="time-series-graphics.html"><a href="time-series-graphics.html#scatterplots"><i class="fa fa-check"></i><b>2.6</b> Scatterplots</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#correlation"><i class="fa fa-check"></i><b>2.6.1</b> Correlation</a></li>
<li class="chapter" data-level="2.6.2" data-path="time-series-graphics.html"><a href="time-series-graphics.html#scatterplot-matrices"><i class="fa fa-check"></i><b>2.6.2</b> Scatterplot matrices</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="time-series-graphics.html"><a href="time-series-graphics.html#lag-plots"><i class="fa fa-check"></i><b>2.7</b> Lag plots</a></li>
<li class="chapter" data-level="2.8" data-path="time-series-graphics.html"><a href="time-series-graphics.html#autocorrelation"><i class="fa fa-check"></i><b>2.8</b> Autocorrelation</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="time-series-graphics.html"><a href="time-series-graphics.html#trend-and-seasonality-in-acf-plots"><i class="fa fa-check"></i><b>2.8.1</b> Trend and seasonality in ACF plots</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="time-series-graphics.html"><a href="time-series-graphics.html#white-moise"><i class="fa fa-check"></i><b>2.9</b> White moise</a></li>
<li class="chapter" data-level="2.10" data-path="time-series-graphics.html"><a href="time-series-graphics.html#excercises-1"><i class="fa fa-check"></i><b>2.10</b> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html"><i class="fa fa-check"></i><b>3</b> Time series decomposition</a>
<ul>
<li class="chapter" data-level="3.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#transformations-and-adjustments"><i class="fa fa-check"></i><b>3.1</b> Transformations and adjustments</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#calendar-adjustments"><i class="fa fa-check"></i><b>3.1.1</b> Calendar adjustments</a></li>
<li class="chapter" data-level="3.1.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#population-adjustments"><i class="fa fa-check"></i><b>3.1.2</b> Population adjustments</a></li>
<li class="chapter" data-level="3.1.3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#inflation-adjustments"><i class="fa fa-check"></i><b>3.1.3</b> Inflation adjustments</a></li>
<li class="chapter" data-level="3.1.4" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#mathematical-transformations"><i class="fa fa-check"></i><b>3.1.4</b> Mathematical transformations</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#time-series-components"><i class="fa fa-check"></i><b>3.2</b> Time series components</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#seasonally-adjusted-data"><i class="fa fa-check"></i><b>3.2.1</b> Seasonally adjusted data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#moving-averages"><i class="fa fa-check"></i><b>3.3</b> Moving averages</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#moving-average-smoothing"><i class="fa fa-check"></i><b>3.3.1</b> Moving average smoothing</a></li>
<li class="chapter" data-level="3.3.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#moving-averages-of-moving-averages"><i class="fa fa-check"></i><b>3.3.2</b> Moving averages of moving averages</a></li>
<li class="chapter" data-level="3.3.3" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#estimating-the-trend-cycle-with-seasonal-data"><i class="fa fa-check"></i><b>3.3.3</b> Estimating the trend-cycle with seasonal data</a></li>
<li class="chapter" data-level="3.3.4" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#example-employment-in-the-us-retail-sector"><i class="fa fa-check"></i><b>3.3.4</b> Example: Employment in the US retail sector</a></li>
<li class="chapter" data-level="3.3.5" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#weighted-moving-averages"><i class="fa fa-check"></i><b>3.3.5</b> Weighted moving averages</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#classical-decomposition"><i class="fa fa-check"></i><b>3.4</b> Classical decomposition</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#additive-decomposition"><i class="fa fa-check"></i><b>3.4.1</b> Additive decomposition</a></li>
<li class="chapter" data-level="3.4.2" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#multiplicative-decomposition"><i class="fa fa-check"></i><b>3.4.2</b> Multiplicative decomposition</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="time-series-decomposition.html"><a href="time-series-decomposition.html#excercises-2"><i class="fa fa-check"></i><b>3.5</b> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="time-series-features.html"><a href="time-series-features.html"><i class="fa fa-check"></i><b>4</b> Time series features</a>
<ul>
<li class="chapter" data-level="4.1" data-path="time-series-features.html"><a href="time-series-features.html#some-simple-statistics"><i class="fa fa-check"></i><b>4.1</b> Some simple statistics</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="time-series-features.html"><a href="time-series-features.html#acf-features"><i class="fa fa-check"></i><b>4.1.1</b> ACF features</a></li>
<li class="chapter" data-level="4.1.2" data-path="time-series-features.html"><a href="time-series-features.html#stl-features"><i class="fa fa-check"></i><b>4.1.2</b> STL features</a></li>
<li class="chapter" data-level="4.1.3" data-path="time-series-features.html"><a href="time-series-features.html#other-features"><i class="fa fa-check"></i><b>4.1.3</b> Other features</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="time-series-features.html"><a href="time-series-features.html#exploring-australian-tourism-data"><i class="fa fa-check"></i><b>4.2</b> Exploring Australian tourism data</a></li>
<li class="chapter" data-level="4.3" data-path="time-series-features.html"><a href="time-series-features.html#exercises"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html"><i class="fa fa-check"></i><b>5</b> The forecaster’s toolbox</a>
<ul>
<li class="chapter" data-level="5.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#a-tidy-forecasting-workflow"><i class="fa fa-check"></i><b>5.1</b> A tidy forecasting workflow</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#data-preparation-tidy"><i class="fa fa-check"></i><b>5.1.1</b> Data preparation (tidy)</a></li>
<li class="chapter" data-level="5.1.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#plot-the-data-visualise"><i class="fa fa-check"></i><b>5.1.2</b> Plot the data (visualise)</a></li>
<li class="chapter" data-level="5.1.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#define-a-model-specify"><i class="fa fa-check"></i><b>5.1.3</b> Define a model (specify)</a></li>
<li class="chapter" data-level="5.1.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#train-the-model-estimate"><i class="fa fa-check"></i><b>5.1.4</b> Train the model (estimate)</a></li>
<li class="chapter" data-level="5.1.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#check-model-performance-evaluate"><i class="fa fa-check"></i><b>5.1.5</b> Check model performance (evaluate)</a></li>
<li class="chapter" data-level="5.1.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#produce-forecasts-forecast"><i class="fa fa-check"></i><b>5.1.6</b> Produce forecasts (forecast)</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#some-simple-forecasting-methods"><i class="fa fa-check"></i><b>5.2</b> Some simple forecasting methods</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#mean-method"><i class="fa fa-check"></i><b>5.2.1</b> Mean method</a></li>
<li class="chapter" data-level="5.2.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#naiïve-method"><i class="fa fa-check"></i><b>5.2.2</b> Naiïve method</a></li>
<li class="chapter" data-level="5.2.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#seasonal-naïve-method"><i class="fa fa-check"></i><b>5.2.3</b> Seasonal naïve method</a></li>
<li class="chapter" data-level="5.2.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#drift-method"><i class="fa fa-check"></i><b>5.2.4</b> Drift method</a></li>
<li class="chapter" data-level="5.2.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#model-fitting"><i class="fa fa-check"></i><b>5.2.5</b> Model fitting</a></li>
<li class="chapter" data-level="5.2.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#producing-forecasts"><i class="fa fa-check"></i><b>5.2.6</b> Producing forecasts</a></li>
<li class="chapter" data-level="5.2.7" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#visualising-forecasts"><i class="fa fa-check"></i><b>5.2.7</b> Visualising forecasts</a></li>
<li class="chapter" data-level="5.2.8" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-facebook-closing-stock-price"><i class="fa fa-check"></i><b>5.2.8</b> Example: Facebook closing stock price</a></li>
<li class="chapter" data-level="5.2.9" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-australian-quarterly-beer-production"><i class="fa fa-check"></i><b>5.2.9</b> Example: Australian quarterly beer production</a></li>
<li class="chapter" data-level="5.2.10" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-googles-daily-closing-stock-price"><i class="fa fa-check"></i><b>5.2.10</b> Example: Google’s daily closing stock price</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#fitted-values-and-residuals"><i class="fa fa-check"></i><b>5.3</b> Fitted values and residuals</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#fitted-values"><i class="fa fa-check"></i><b>5.3.1</b> Fitted values</a></li>
<li class="chapter" data-level="5.3.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#residuals"><i class="fa fa-check"></i><b>5.3.2</b> Residuals</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#residual-diagnostics"><i class="fa fa-check"></i><b>5.4</b> Residual diagnostics</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#acf-of-residuals"><i class="fa fa-check"></i><b>5.4.1</b> ACF of residuals</a></li>
<li class="chapter" data-level="5.4.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-forecasting-google-daily-closing-stock-prices"><i class="fa fa-check"></i><b>5.4.2</b> Example: Forecasting Google daily closing stock prices</a></li>
<li class="chapter" data-level="5.4.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#portmanteau-tests-for-autocorrelation"><i class="fa fa-check"></i><b>5.4.3</b> Portmanteau tests for autocorrelation</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#distributional-forecasts-and-prediction-intervals"><i class="fa fa-check"></i><b>5.5</b> Distributional forecasts and prediction intervals</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecast-distributions"><i class="fa fa-check"></i><b>5.5.1</b> Forecast distributions</a></li>
<li class="chapter" data-level="5.5.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#prediction-intervals"><i class="fa fa-check"></i><b>5.5.2</b> Prediction intervals</a></li>
<li class="chapter" data-level="5.5.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#one-step-prediction-intervals"><i class="fa fa-check"></i><b>5.5.3</b> One-step prediction intervals</a></li>
<li class="chapter" data-level="5.5.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#multi-step-prediction-intervals"><i class="fa fa-check"></i><b>5.5.4</b> Multi-step prediction intervals</a></li>
<li class="chapter" data-level="5.5.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#benchmark-methods"><i class="fa fa-check"></i><b>5.5.5</b> Benchmark methods</a></li>
<li class="chapter" data-level="5.5.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#prediction-intervals-from-bootstrapped-residuals"><i class="fa fa-check"></i><b>5.5.6</b> Prediction intervals from bootstrapped residuals</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecasting-using-transformations"><i class="fa fa-check"></i><b>5.6</b> Forecasting using transformations</a></li>
<li class="chapter" data-level="5.7" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecasting-with-decomposition"><i class="fa fa-check"></i><b>5.7</b> Forecasting with decomposition</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-employment-in-the-us-retail-sector-1"><i class="fa fa-check"></i><b>5.7.1</b> Example: Employment in the US retail sector</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#evaluating-point-forecast-accuracy"><i class="fa fa-check"></i><b>5.8</b> Evaluating point forecast accuracy</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#training-and-test-sets"><i class="fa fa-check"></i><b>5.8.1</b> Training and test sets</a></li>
<li class="chapter" data-level="5.8.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#functions-to-subset-a-time-series"><i class="fa fa-check"></i><b>5.8.2</b> Functions to subset a time series</a></li>
<li class="chapter" data-level="5.8.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#forecast-errors"><i class="fa fa-check"></i><b>5.8.3</b> Forecast errors</a></li>
<li class="chapter" data-level="5.8.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#scale-dependent-errors"><i class="fa fa-check"></i><b>5.8.4</b> Scale-dependent errors</a></li>
<li class="chapter" data-level="5.8.5" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#percentage-errors"><i class="fa fa-check"></i><b>5.8.5</b> Percentage errors</a></li>
<li class="chapter" data-level="5.8.6" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#scaled-errors"><i class="fa fa-check"></i><b>5.8.6</b> Scaled errors</a></li>
<li class="chapter" data-level="5.8.7" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#examples"><i class="fa fa-check"></i><b>5.8.7</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#evaluating-distributional-forecast-accuracy"><i class="fa fa-check"></i><b>5.9</b> Evaluating distributional forecast accuracy</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#quantile-scores"><i class="fa fa-check"></i><b>5.9.1</b> Quantile scores</a></li>
<li class="chapter" data-level="5.9.2" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#winkler-score"><i class="fa fa-check"></i><b>5.9.2</b> Winkler Score</a></li>
<li class="chapter" data-level="5.9.3" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#continuous-ranked-probability-score"><i class="fa fa-check"></i><b>5.9.3</b> Continuous Ranked Probability Score</a></li>
<li class="chapter" data-level="5.9.4" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#scale-free-comparisons-using-skill-scores"><i class="fa fa-check"></i><b>5.9.4</b> Scale-free comparisons using skill scores</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#time-series-cross-validation"><i class="fa fa-check"></i><b>5.10</b> Time series cross-validation</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#example-forecast-horizon-accuracy-with-cross-validation"><i class="fa fa-check"></i><b>5.10.1</b> Example: Forecast horizon accuracy with cross-validation</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="the-forecasters-toolbox.html"><a href="the-forecasters-toolbox.html#exercises-1"><i class="fa fa-check"></i><b>5.11</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html"><i class="fa fa-check"></i><b>6</b> Judgmental forecasts</a>
<ul>
<li class="chapter" data-level="6.1" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#beware-of-limitations"><i class="fa fa-check"></i><b>6.1</b> Beware of limitations</a></li>
<li class="chapter" data-level="6.2" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#key-principles"><i class="fa fa-check"></i><b>6.2</b> Key principles</a></li>
<li class="chapter" data-level="6.3" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#the-delphi-method"><i class="fa fa-check"></i><b>6.3</b> The Delphi method</a></li>
<li class="chapter" data-level="6.4" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#forecasting-by-analogy"><i class="fa fa-check"></i><b>6.4</b> Forecasting by analogy</a></li>
<li class="chapter" data-level="6.5" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#scenario-forecasting"><i class="fa fa-check"></i><b>6.5</b> Scenario forecasting</a></li>
<li class="chapter" data-level="6.6" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#new-product-forecasting"><i class="fa fa-check"></i><b>6.6</b> New product forecasting</a></li>
<li class="chapter" data-level="6.7" data-path="judgmental-forecasts.html"><a href="judgmental-forecasts.html#judgmental-adjustments"><i class="fa fa-check"></i><b>6.7</b> Judgmental adjustments</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html"><i class="fa fa-check"></i><b>7</b> Time series regression models</a>
<ul>
<li class="chapter" data-level="7.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#the-linear-model"><i class="fa fa-check"></i><b>7.1</b> The linear model</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#simple-linear-regression"><i class="fa fa-check"></i><b>7.1.1</b> Simple linear regression</a></li>
<li class="chapter" data-level="7.1.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#multiple-linear-regression"><i class="fa fa-check"></i><b>7.1.2</b> Multiple linear regression</a></li>
<li class="chapter" data-level="7.1.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#assumptions"><i class="fa fa-check"></i><b>7.1.3</b> Assumptions</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#least-squares-estimation"><i class="fa fa-check"></i><b>7.2</b> Least squares estimation</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#fitted-values-1"><i class="fa fa-check"></i><b>7.2.1</b> Fitted values</a></li>
<li class="chapter" data-level="7.2.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#goodness-of-fit"><i class="fa fa-check"></i><b>7.2.2</b> Goodness-of-fit</a></li>
<li class="chapter" data-level="7.2.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#standard-error-of-the-regression"><i class="fa fa-check"></i><b>7.2.3</b> Standard error of the regression</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#evaluating-the-regression-model"><i class="fa fa-check"></i><b>7.3</b> Evaluating the regression model</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#acf-plot-of-residuals"><i class="fa fa-check"></i><b>7.3.1</b> ACF plot of residuals</a></li>
<li class="chapter" data-level="7.3.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#histogram-of-residuals"><i class="fa fa-check"></i><b>7.3.2</b> Histogram of residuals</a></li>
<li class="chapter" data-level="7.3.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#residual-plots-against-predictors"><i class="fa fa-check"></i><b>7.3.3</b> Residual plots against predictors</a></li>
<li class="chapter" data-level="7.3.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#residual-plots-against-fitted-values"><i class="fa fa-check"></i><b>7.3.4</b> Residual plots against fitted values</a></li>
<li class="chapter" data-level="7.3.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#outliers-and-influential-observations"><i class="fa fa-check"></i><b>7.3.5</b> Outliers and influential observations</a></li>
<li class="chapter" data-level="7.3.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#spurious-regression"><i class="fa fa-check"></i><b>7.3.6</b> Spurious regression</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#some-useful-predictors"><i class="fa fa-check"></i><b>7.4</b> Some useful predictors</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#trend"><i class="fa fa-check"></i><b>7.4.1</b> Trend</a></li>
<li class="chapter" data-level="7.4.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#dummy-variables"><i class="fa fa-check"></i><b>7.4.2</b> Dummy variables</a></li>
<li class="chapter" data-level="7.4.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#seasonal-dummy-variables"><i class="fa fa-check"></i><b>7.4.3</b> Seasonal dummy variables</a></li>
<li class="chapter" data-level="7.4.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#intervention-variables"><i class="fa fa-check"></i><b>7.4.4</b> Intervention variables</a></li>
<li class="chapter" data-level="7.4.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#trading-days"><i class="fa fa-check"></i><b>7.4.5</b> Trading days</a></li>
<li class="chapter" data-level="7.4.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#distributed-lags"><i class="fa fa-check"></i><b>7.4.6</b> Distributed lags</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#selecting-predictors"><i class="fa fa-check"></i><b>7.5</b> Selecting predictors</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#adjusted-r2"><i class="fa fa-check"></i><b>7.5.1</b> Adjusted <span class="math inline">\(R^2\)</span></a></li>
<li class="chapter" data-level="7.5.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#cross-validation"><i class="fa fa-check"></i><b>7.5.2</b> Cross-validation</a></li>
<li class="chapter" data-level="7.5.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#akaikes-information-criterion"><i class="fa fa-check"></i><b>7.5.3</b> Akaike’s Information Criterion</a></li>
<li class="chapter" data-level="7.5.4" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#corrected-akaikes-information-criterion"><i class="fa fa-check"></i><b>7.5.4</b> Corrected Akaike’s Information Criterion</a></li>
<li class="chapter" data-level="7.5.5" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#schwarzs-bayesian-information-criterion"><i class="fa fa-check"></i><b>7.5.5</b> Schwarz’s Bayesian Information Criterion</a></li>
<li class="chapter" data-level="7.5.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#stepwise-regression"><i class="fa fa-check"></i><b>7.5.6</b> Stepwise regression</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#forecasting-with-regression"><i class="fa fa-check"></i><b>7.6</b> Forecasting with regression</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#scenario-based-forecasting"><i class="fa fa-check"></i><b>7.6.1</b> Scenario based forecasting</a></li>
<li class="chapter" data-level="7.6.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#prediction-intervals-1"><i class="fa fa-check"></i><b>7.6.2</b> Prediction intervals</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#nonlinear-regression"><i class="fa fa-check"></i><b>7.7</b> Nonlinear regression</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#forecasting-with-a-nonlinear-trend"><i class="fa fa-check"></i><b>7.7.1</b> Forecasting with a nonlinear trend</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#correlation-causation-and-forecasting"><i class="fa fa-check"></i><b>7.8</b> Correlation, causation and forecasting</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#correlation-is-not-causation"><i class="fa fa-check"></i><b>7.8.1</b> Correlation is not causation</a></li>
<li class="chapter" data-level="7.8.2" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#forecasting-with-correlated-predictors"><i class="fa fa-check"></i><b>7.8.2</b> Forecasting with correlated predictors</a></li>
<li class="chapter" data-level="7.8.3" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#multicollinearity-and-forecasting"><i class="fa fa-check"></i><b>7.8.3</b> Multicollinearity and forecasting</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="time-series-regression-models.html"><a href="time-series-regression-models.html#exercises-2"><i class="fa fa-check"></i><b>7.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html"><i class="fa fa-check"></i><b>8</b> Exponential Smoothing</a>
<ul>
<li class="chapter" data-level="8.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#simple-exponential-smoothing"><i class="fa fa-check"></i><b>8.1</b> Simple exponential smoothing</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#weighted-average-form"><i class="fa fa-check"></i><b>8.1.1</b> Weighted average form</a></li>
<li class="chapter" data-level="8.1.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#component-form"><i class="fa fa-check"></i><b>8.1.2</b> Component form</a></li>
<li class="chapter" data-level="8.1.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#flat-forecast"><i class="fa fa-check"></i><b>8.1.3</b> Flat forecast</a></li>
<li class="chapter" data-level="8.1.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#optimisation"><i class="fa fa-check"></i><b>8.1.4</b> Optimisation</a></li>
<li class="chapter" data-level="8.1.5" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-algerian-exports"><i class="fa fa-check"></i><b>8.1.5</b> Example: Algerian exports</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#methods-with-trend"><i class="fa fa-check"></i><b>8.2</b> Methods with trend</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holts-linear-trend-method"><i class="fa fa-check"></i><b>8.2.1</b> Holt’s linear trend method</a></li>
<li class="chapter" data-level="8.2.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#damped-trend-methods"><i class="fa fa-check"></i><b>8.2.2</b> Damped trend methods</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#methods-with-seasonality"><i class="fa fa-check"></i><b>8.3</b> Methods with seasonality</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-winters-additive-method"><i class="fa fa-check"></i><b>8.3.1</b> Holt-Winters’ additive method</a></li>
<li class="chapter" data-level="8.3.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-winters-multiplicative-method"><i class="fa fa-check"></i><b>8.3.2</b> Holt-Winters’ multiplicative method</a></li>
<li class="chapter" data-level="8.3.3" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-domestic-overnight-trips-in-australia"><i class="fa fa-check"></i><b>8.3.3</b> Example: Domestic overnight trips in Australia</a></li>
<li class="chapter" data-level="8.3.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#holt-winters-damped-method"><i class="fa fa-check"></i><b>8.3.4</b> Holt-Winters’ damped method</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#a-taxonomy-of-exponential-smoothing-methods"><i class="fa fa-check"></i><b>8.4</b> A taxonomy of exponential smoothing methods</a></li>
<li class="chapter" data-level="8.5" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#innovations-state-space-models-for-exponential-smoothing"><i class="fa fa-check"></i><b>8.5</b> Innovations state space models for exponential smoothing</a></li>
<li class="chapter" data-level="8.6" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#estimation-and-model-selection"><i class="fa fa-check"></i><b>8.6</b> Estimation and model selection</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#model-selection"><i class="fa fa-check"></i><b>8.6.1</b> Model selection</a></li>
<li class="chapter" data-level="8.6.2" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#example-domestic-holiday-tourist-visitor-nights-in-australia"><i class="fa fa-check"></i><b>8.6.2</b> Example: Domestic holiday tourist visitor nights in Australia</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#forecasting-with-ets-models"><i class="fa fa-check"></i><b>8.7</b> Forecasting with ETS models</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#prediction-intervals-2"><i class="fa fa-check"></i><b>8.7.1</b> Prediction intervals</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="exponential-smoothing.html"><a href="exponential-smoothing.html#excercises-3"><i class="fa fa-check"></i><b>8.8</b> Excercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="arima-models.html"><a href="arima-models.html"><i class="fa fa-check"></i><b>9</b> ARIMA models</a>
<ul>
<li class="chapter" data-level="9.1" data-path="arima-models.html"><a href="arima-models.html#stationarity-and-differencing"><i class="fa fa-check"></i><b>9.1</b> Stationarity and differencing</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="arima-models.html"><a href="arima-models.html#differencing"><i class="fa fa-check"></i><b>9.1.1</b> Differencing</a></li>
<li class="chapter" data-level="9.1.2" data-path="arima-models.html"><a href="arima-models.html#second-order-differencing"><i class="fa fa-check"></i><b>9.1.2</b> Second-order differencing</a></li>
<li class="chapter" data-level="9.1.3" data-path="arima-models.html"><a href="arima-models.html#seasonal-differencing"><i class="fa fa-check"></i><b>9.1.3</b> Seasonal differencing</a></li>
<li class="chapter" data-level="9.1.4" data-path="arima-models.html"><a href="arima-models.html#unit-root-tests"><i class="fa fa-check"></i><b>9.1.4</b> Unit root tests</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="arima-models.html"><a href="arima-models.html#backshift-notation"><i class="fa fa-check"></i><b>9.2</b> Backshift notation</a></li>
<li class="chapter" data-level="9.3" data-path="arima-models.html"><a href="arima-models.html#autoregressive-ar-models"><i class="fa fa-check"></i><b>9.3</b> Autoregressive (AR) models</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="arima-models.html"><a href="arima-models.html#ar1-model"><i class="fa fa-check"></i><b>9.3.1</b> AR(1) model</a></li>
<li class="chapter" data-level="9.3.2" data-path="arima-models.html"><a href="arima-models.html#ar2-model"><i class="fa fa-check"></i><b>9.3.2</b> AR(2) model</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="arima-models.html"><a href="arima-models.html#moving-average-models"><i class="fa fa-check"></i><b>9.4</b> Moving average models</a></li>
<li class="chapter" data-level="9.5" data-path="arima-models.html"><a href="arima-models.html#non-seasonal-arima-models"><i class="fa fa-check"></i><b>9.5</b> Non-seasonal ARIMA models</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="arima-models.html"><a href="arima-models.html#example-egyptian-exports"><i class="fa fa-check"></i><b>9.5.1</b> Example: Egyptian exports</a></li>
<li class="chapter" data-level="9.5.2" data-path="arima-models.html"><a href="arima-models.html#acf-and-pacf-plots"><i class="fa fa-check"></i><b>9.5.2</b> ACF and PACF plots</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="arima-models.html"><a href="arima-models.html#estimation-and-order-selection"><i class="fa fa-check"></i><b>9.6</b> Estimation and order selection</a></li>
<li class="chapter" data-level="9.7" data-path="arima-models.html"><a href="arima-models.html#arima-modelling-in-fable"><i class="fa fa-check"></i><b>9.7</b> ARIMA modelling in <code>fable</code></a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="arima-models.html"><a href="arima-models.html#how-does-arima-work"><i class="fa fa-check"></i><b>9.7.1</b> How does ARIMA() work?</a></li>
<li class="chapter" data-level="9.7.2" data-path="arima-models.html"><a href="arima-models.html#modelling-procedure"><i class="fa fa-check"></i><b>9.7.2</b> Modelling procedure</a></li>
<li class="chapter" data-level="9.7.3" data-path="arima-models.html"><a href="arima-models.html#example-central-african-republic-exports"><i class="fa fa-check"></i><b>9.7.3</b> Example: Central African Republic exports</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="arima-models.html"><a href="arima-models.html#forecasting"><i class="fa fa-check"></i><b>9.8</b> Forecasting</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="arima-models.html"><a href="arima-models.html#prediction-intervals-3"><i class="fa fa-check"></i><b>9.8.1</b> Prediction intervals</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="arima-models.html"><a href="arima-models.html#seasonal-arima-models"><i class="fa fa-check"></i><b>9.9</b> Seasonal ARIMA models</a>
<ul>
<li class="chapter" data-level="9.9.1" data-path="arima-models.html"><a href="arima-models.html#arima-model-notation"><i class="fa fa-check"></i><b>9.9.1</b> ARIMA Model Notation</a></li>
<li class="chapter" data-level="9.9.2" data-path="arima-models.html"><a href="arima-models.html#acfpacf"><i class="fa fa-check"></i><b>9.9.2</b> ACF/PACF</a></li>
<li class="chapter" data-level="9.9.3" data-path="arima-models.html"><a href="arima-models.html#example-monthly-us-leisure-and-hospitality-employment"><i class="fa fa-check"></i><b>9.9.3</b> Example: Monthly US leisure and hospitality employment</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="arima-models.html"><a href="arima-models.html#arima-vs-ets"><i class="fa fa-check"></i><b>9.10</b> ARIMA vs ETS</a>
<ul>
<li class="chapter" data-level="9.10.1" data-path="arima-models.html"><a href="arima-models.html#comparing-arima-and-ets-on-non-seasonal-data"><i class="fa fa-check"></i><b>9.10.1</b> Comparing <code>ARIMA()</code> and <code>ETS()</code> on non-seasonal data</a></li>
<li class="chapter" data-level="9.10.2" data-path="arima-models.html"><a href="arima-models.html#comparing-arima-and-ets-on-seasonal-data"><i class="fa fa-check"></i><b>9.10.2</b> Comparing <code>ARIMA()</code> and <code>ETS()</code> on seasonal data</a></li>
</ul></li>
<li class="chapter" data-level="9.11" data-path="arima-models.html"><a href="arima-models.html#exercises-3"><i class="fa fa-check"></i><b>9.11</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html"><i class="fa fa-check"></i><b>10</b> Dynamic regression models</a>
<ul>
<li class="chapter" data-level="10.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#regression-with-arima-errors-using-fable"><i class="fa fa-check"></i><b>10.1</b> Regression with ARIMA errors using <code>fable</code></a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-us-personal-consumption-and-income"><i class="fa fa-check"></i><b>10.1.1</b> Example: US Personal Consumption and Income</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#forecasting-1"><i class="fa fa-check"></i><b>10.2</b> Forecasting</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-us-personal-consumption-and-income-1"><i class="fa fa-check"></i><b>10.2.1</b> Example: US Personal Consumption and Income</a></li>
<li class="chapter" data-level="10.2.2" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-forecasting-electricity-demand"><i class="fa fa-check"></i><b>10.2.2</b> Example: Forecasting electricity demand</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#stochastic-and-deterministic-trends"><i class="fa fa-check"></i><b>10.3</b> Stochastic and deterministic trends</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-air-transport-passengers-australia"><i class="fa fa-check"></i><b>10.3.1</b> Example: Air transport passengers Australia</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#dynamic-harmonic-regression"><i class="fa fa-check"></i><b>10.4</b> Dynamic harmonic regression</a></li>
<li class="chapter" data-level="10.5" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-australian-eating-out-expenditure"><i class="fa fa-check"></i><b>10.5</b> Example: Australian eating out expenditure</a></li>
<li class="chapter" data-level="10.6" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#lagged-predictors"><i class="fa fa-check"></i><b>10.6</b> Lagged predictors</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="dynamic-regression-models.html"><a href="dynamic-regression-models.html#example-tv-advertising-and-insurance-quotations"><i class="fa fa-check"></i><b>10.6.1</b> Example: TV advertising and insurance quotations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html"><i class="fa fa-check"></i><b>11</b> Forecasting hierarchical and grouped time series</a>
<ul>
<li class="chapter" data-level="11.1" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#hierarchical-and-grouped-time-series"><i class="fa fa-check"></i><b>11.1</b> Hierarchical and grouped time series</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#hierarchical-time-series"><i class="fa fa-check"></i><b>11.1.1</b> Hierarchical time series</a></li>
<li class="chapter" data-level="11.1.2" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#example-australian-tourism-hierarchy"><i class="fa fa-check"></i><b>11.1.2</b> Example: Australian tourism hierarchy</a></li>
<li class="chapter" data-level="11.1.3" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#grouped-time-series"><i class="fa fa-check"></i><b>11.1.3</b> Grouped time series</a></li>
<li class="chapter" data-level="11.1.4" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#example-australian-prison-population"><i class="fa fa-check"></i><b>11.1.4</b> Example: Australian prison population</a></li>
<li class="chapter" data-level="11.1.5" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#mixed-hierarchical-and-grouped-structure"><i class="fa fa-check"></i><b>11.1.5</b> Mixed hierarchical and grouped structure</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#single-level-approaches"><i class="fa fa-check"></i><b>11.2</b> Single level approaches</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#the-bottom-up-approach"><i class="fa fa-check"></i><b>11.2.1</b> The bottom-up approach</a></li>
<li class="chapter" data-level="11.2.2" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#top-down-approaches"><i class="fa fa-check"></i><b>11.2.2</b> Top-down approaches</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#forecast-reconciliation"><i class="fa fa-check"></i><b>11.3</b> Forecast reconciliation</a></li>
<li class="chapter" data-level="11.4" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#forecasting-australian-domestic-tourism"><i class="fa fa-check"></i><b>11.4</b> Forecasting Australian domestic tourism</a></li>
<li class="chapter" data-level="11.5" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#reconciled-distributional-forecasts"><i class="fa fa-check"></i><b>11.5</b> Reconciled distributional forecasts</a></li>
<li class="chapter" data-level="11.6" data-path="forecasting-hierarchical-and-grouped-time-series.html"><a href="forecasting-hierarchical-and-grouped-time-series.html#forecasting-australian-prison-population"><i class="fa fa-check"></i><b>11.6</b> Forecasting Australian prison population</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html"><i class="fa fa-check"></i><b>12</b> Advanced forecasting methods</a>
<ul>
<li class="chapter" data-level="12.1" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#complex-seasonality"><i class="fa fa-check"></i><b>12.1</b> Complex seasonality</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#stl-with-multiple-seasonal-periods"><i class="fa fa-check"></i><b>12.1.1</b> STL with multiple seasonal periods</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#prophet-model"><i class="fa fa-check"></i><b>12.2</b> Prophet model</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#example-quarterly-cement-production"><i class="fa fa-check"></i><b>12.2.1</b> Example: Quarterly cement production</a></li>
<li class="chapter" data-level="12.2.2" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#example-half-hourly-electricity-demand"><i class="fa fa-check"></i><b>12.2.2</b> Example: Half-hourly electricity demand</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="advanced-forecasting-methods.html"><a href="advanced-forecasting-methods.html#vector-autoregressions"><i class="fa fa-check"></i><b>12.3</b> Vector autoregressions</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/daluchkin?tab=repositories">All Repositories</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Forecasting: Principles and Practice (3rd ed)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="time-series-graphics" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Time series graphics<a href="time-series-graphics.html#time-series-graphics" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><a href="https://otexts.com/fpp3/graphics.html">The source of the chapter</a></p>
<p>The first step in data analysis is to plot the data. Graphs help visualize patterns, outliers, trends, and relationships. These insights guide the choice of forecasting methods and appropriate graphs, depending on the data type.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="time-series-graphics.html#cb1-1" tabindex="-1"></a><span class="co"># loading libraries</span></span>
<span id="cb1-2"><a href="time-series-graphics.html#cb1-2" tabindex="-1"></a><span class="fu">library</span>(tsibble)</span>
<span id="cb1-3"><a href="time-series-graphics.html#cb1-3" tabindex="-1"></a><span class="fu">library</span>(tsibbledata)</span>
<span id="cb1-4"><a href="time-series-graphics.html#cb1-4" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-5"><a href="time-series-graphics.html#cb1-5" tabindex="-1"></a><span class="co"># to read data</span></span>
<span id="cb1-6"><a href="time-series-graphics.html#cb1-6" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="cb1-7"><a href="time-series-graphics.html#cb1-7" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-8"><a href="time-series-graphics.html#cb1-8" tabindex="-1"></a><span class="fu">library</span>(fabletools)</span>
<span id="cb1-9"><a href="time-series-graphics.html#cb1-9" tabindex="-1"></a><span class="fu">library</span>(feasts)</span>
<span id="cb1-10"><a href="time-series-graphics.html#cb1-10" tabindex="-1"></a><span class="fu">library</span>(fpp3)</span></code></pre></div>
<div id="tsibble-object" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> <code>tsibble</code> object<a href="time-series-graphics.html#tsibble-object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/tsibbles.html">The source of the section</a></p>
<div id="the-index-variable" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> The index variable<a href="time-series-graphics.html#the-index-variable" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="time-series-graphics.html#cb2-1" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">tsibble</span>(<span class="at">Year =</span> <span class="dv">2015</span><span class="sc">:</span><span class="dv">2019</span>,</span>
<span id="cb2-2"><a href="time-series-graphics.html#cb2-2" tabindex="-1"></a>             <span class="at">Observations =</span> <span class="fu">c</span>(<span class="dv">123</span>, <span class="dv">39</span>, <span class="dv">78</span>, <span class="dv">52</span>, <span class="dv">110</span>),</span>
<span id="cb2-3"><a href="time-series-graphics.html#cb2-3" tabindex="-1"></a>             <span class="at">index =</span> Year)</span>
<span id="cb2-4"><a href="time-series-graphics.html#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="time-series-graphics.html#cb2-5" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## # A tsibble: 5 x 2 [1Y]
##    Year Observations
##   &lt;int&gt;        &lt;dbl&gt;
## 1  2015          123
## 2  2016           39
## 3  2017           78
## 4  2018           52
## 5  2019          110</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="time-series-graphics.html#cb4-1" tabindex="-1"></a><span class="co"># the structure of the tsibble</span></span>
<span id="cb4-2"><a href="time-series-graphics.html#cb4-2" tabindex="-1"></a><span class="fu">str</span>(y)</span></code></pre></div>
<pre><code>## tbl_ts [5 × 2] (S3: tbl_ts/tbl_df/tbl/data.frame)
##  $ Year        : int [1:5] 2015 2016 2017 2018 2019
##  $ Observations: num [1:5] 123 39 78 52 110
##  - attr(*, &quot;key&quot;)= tibble [1 × 1] (S3: tbl_df/tbl/data.frame)
##   ..$ .rows: list&lt;int&gt; [1:1] 
##   .. ..$ : int [1:5] 1 2 3 4 5
##   .. ..@ ptype: int(0) 
##  - attr(*, &quot;index&quot;)= chr &quot;Year&quot;
##   ..- attr(*, &quot;ordered&quot;)= logi TRUE
##  - attr(*, &quot;index2&quot;)= chr &quot;Year&quot;
##  - attr(*, &quot;interval&quot;)= interval [1:1] 1Y
##   ..@ .regular: logi TRUE</code></pre>
<p>Convert from data frame (or tibble) to tsibble.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="time-series-graphics.html#cb6-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Month =</span> <span class="fu">as.character</span>(<span class="fu">make_yearmonth</span>(<span class="at">year =</span> <span class="dv">2024</span>, <span class="at">month =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)),</span>
<span id="cb6-2"><a href="time-series-graphics.html#cb6-2" tabindex="-1"></a>                 <span class="at">Observation =</span> <span class="fu">c</span>(<span class="dv">123</span>, <span class="dv">45</span>, <span class="dv">32</span>, <span class="dv">54</span>, <span class="dv">22</span>))</span>
<span id="cb6-3"><a href="time-series-graphics.html#cb6-3" tabindex="-1"></a>df                 </span></code></pre></div>
<pre><code>##      Month Observation
## 1 2024 Jan         123
## 2 2024 Feb          45
## 3 2024 Mar          32
## 4 2024 Apr          54
## 5 2024 May          22</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="time-series-graphics.html#cb8-1" tabindex="-1"></a>df <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="time-series-graphics.html#cb8-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Month =</span> <span class="fu">yearmonth</span>(Month)) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="time-series-graphics.html#cb8-3" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> Month)</span></code></pre></div>
<pre><code>## # A tsibble: 5 x 2 [1M]
##      Month Observation
##      &lt;mth&gt;       &lt;dbl&gt;
## 1 2024 Jan         123
## 2 2024 Feb          45
## 3 2024 Mar          32
## 4 2024 Apr          54
## 5 2024 May          22</code></pre>
<blockquote>
<p><strong>[1M]</strong> indicates a monthly data.</p>
</blockquote>
<p>To convert <code>tsibble</code> to old <code>ts</code> format:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="time-series-graphics.html#cb10-1" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> <span class="fu">as.ts</span>()</span>
<span id="cb10-2"><a href="time-series-graphics.html#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="time-series-graphics.html#cb10-3" tabindex="-1"></a>df2</span></code></pre></div>
<pre><code>## Time Series:
## Start = 1 
## End = 5 
## Frequency = 1 
##   Month Observation
## 1     3         123
## 2     2          45
## 3     4          32
## 4     1          54
## 5     5          22</code></pre>
<p>To convert from <code>ts</code> to <code>tsibble</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="time-series-graphics.html#cb12-1" tabindex="-1"></a>AirPassengers</span></code></pre></div>
<pre><code>##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
## 1949 112 118 132 129 121 135 148 148 136 119 104 118
## 1950 115 126 141 135 125 149 170 170 158 133 114 140
## 1951 145 150 178 163 172 178 199 199 184 162 146 166
## 1952 171 180 193 181 183 218 230 242 209 191 172 194
## 1953 196 196 236 235 229 243 264 272 237 211 180 201
## 1954 204 188 235 227 234 264 302 293 259 229 203 229
## 1955 242 233 267 269 270 315 364 347 312 274 237 278
## 1956 284 277 317 313 318 374 413 405 355 306 271 306
## 1957 315 301 356 348 355 422 465 467 404 347 305 336
## 1958 340 318 362 348 363 435 491 505 404 359 310 337
## 1959 360 342 406 396 420 472 548 559 463 407 362 405
## 1960 417 391 419 461 472 535 622 606 508 461 390 432</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="time-series-graphics.html#cb14-1" tabindex="-1"></a>AirPassengers <span class="sc">|&gt;</span></span>
<span id="cb14-2"><a href="time-series-graphics.html#cb14-2" tabindex="-1"></a>  <span class="fu">as_tsibble</span>() <span class="sc">|&gt;</span> <span class="co"># creates index column fot time point</span></span>
<span id="cb14-3"><a href="time-series-graphics.html#cb14-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">month =</span> index)</span></code></pre></div>
<pre><code>## # A tsibble: 144 x 2 [1M]
##       month value
##       &lt;mth&gt; &lt;dbl&gt;
##  1 1949 Jan   112
##  2 1949 Feb   118
##  3 1949 Mar   132
##  4 1949 Apr   129
##  5 1949 May   121
##  6 1949 Jun   135
##  7 1949 Jul   148
##  8 1949 Aug   148
##  9 1949 Sep   136
## 10 1949 Oct   119
## # ℹ 134 more rows</code></pre>
</div>
<div id="the-key-variable" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> The key variable<a href="time-series-graphics.html#the-key-variable" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Multiple time series in a single object.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="time-series-graphics.html#cb16-1" tabindex="-1"></a>olympic_running</span></code></pre></div>
<pre><code>## # A tsibble: 312 x 4 [4Y]
## # Key:       Length, Sex [14]
##     Year Length Sex    Time
##    &lt;int&gt;  &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;
##  1  1896    100 men    12  
##  2  1900    100 men    11  
##  3  1904    100 men    11  
##  4  1908    100 men    10.8
##  5  1912    100 men    10.8
##  6  1916    100 men    NA  
##  7  1920    100 men    10.8
##  8  1924    100 men    10.6
##  9  1928    100 men    10.8
## 10  1932    100 men    10.3
## # ℹ 302 more rows</code></pre>
<p><strong>[4K]</strong> indicates that the interval if these observations is every four years. <strong>[14]</strong> indicates there are 14 separaste time series in the <code>stibble</code> object.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="time-series-graphics.html#cb18-1" tabindex="-1"></a><span class="fu">key</span>(olympic_running)</span></code></pre></div>
<pre><code>## [[1]]
## Length
## 
## [[2]]
## Sex</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="time-series-graphics.html#cb20-1" tabindex="-1"></a><span class="fu">print</span>(olympic_running <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Sex))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 1
##   Sex  
##   &lt;chr&gt;
## 1 men  
## 2 women</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="time-series-graphics.html#cb22-1" tabindex="-1"></a><span class="fu">print</span>(olympic_running <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Length))</span></code></pre></div>
<pre><code>## # A tibble: 7 × 1
##   Length
##    &lt;int&gt;
## 1    100
## 2    200
## 3    400
## 4    800
## 5   1500
## 6   5000
## 7  10000</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="time-series-graphics.html#cb24-1" tabindex="-1"></a><span class="fu">print</span>(olympic_running <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Sex, Length))</span></code></pre></div>
<pre><code>## # A tibble: 14 × 2
##    Sex   Length
##    &lt;chr&gt;  &lt;int&gt;
##  1 men      100
##  2 women    100
##  3 men      200
##  4 women    200
##  5 men      400
##  6 women    400
##  7 men      800
##  8 women    800
##  9 men     1500
## 10 women   1500
## 11 men     5000
## 12 women   5000
## 13 men    10000
## 14 women  10000</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="time-series-graphics.html#cb26-1" tabindex="-1"></a><span class="fu">key_vars</span>(olympic_running)</span></code></pre></div>
<pre><code>## [1] &quot;Length&quot; &quot;Sex&quot;</code></pre>
</div>
<div id="working-with-tsibble-object" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Working with <code>tsibble</code> object<a href="time-series-graphics.html#working-with-tsibble-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>dplyr</code> functions such as <code>mutate()</code>, <code>filter()</code>, <code>select()</code> and <code>summarise()</code> work with <code>tsibble</code> objects.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="time-series-graphics.html#cb28-1" tabindex="-1"></a>PBS</span></code></pre></div>
<pre><code>## # A tsibble: 67,596 x 9 [1M]
## # Key:       Concession, Type, ATC1, ATC2 [336]
##       Month Concession   Type        ATC1  ATC1_desc                       ATC2  ATC2_desc                   Scripts  Cost
##       &lt;mth&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;                           &lt;chr&gt; &lt;chr&gt;                         &lt;dbl&gt; &lt;dbl&gt;
##  1 1991 Jul Concessional Co-payments A     Alimentary tract and metabolism A01   STOMATOLOGICAL PREPARATIONS   18228 67877
##  2 1991 Aug Concessional Co-payments A     Alimentary tract and metabolism A01   STOMATOLOGICAL PREPARATIONS   15327 57011
##  3 1991 Sep Concessional Co-payments A     Alimentary tract and metabolism A01   STOMATOLOGICAL PREPARATIONS   14775 55020
##  4 1991 Oct Concessional Co-payments A     Alimentary tract and metabolism A01   STOMATOLOGICAL PREPARATIONS   15380 57222
##  5 1991 Nov Concessional Co-payments A     Alimentary tract and metabolism A01   STOMATOLOGICAL PREPARATIONS   14371 52120
##  6 1991 Dec Concessional Co-payments A     Alimentary tract and metabolism A01   STOMATOLOGICAL PREPARATIONS   15028 54299
##  7 1992 Jan Concessional Co-payments A     Alimentary tract and metabolism A01   STOMATOLOGICAL PREPARATIONS   11040 39753
##  8 1992 Feb Concessional Co-payments A     Alimentary tract and metabolism A01   STOMATOLOGICAL PREPARATIONS   15165 54405
##  9 1992 Mar Concessional Co-payments A     Alimentary tract and metabolism A01   STOMATOLOGICAL PREPARATIONS   16898 61108
## 10 1992 Apr Concessional Co-payments A     Alimentary tract and metabolism A01   STOMATOLOGICAL PREPARATIONS   18141 65356
## # ℹ 67,586 more rows</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="time-series-graphics.html#cb30-1" tabindex="-1"></a>PBS <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="time-series-graphics.html#cb30-2" tabindex="-1"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">&#39;A10&#39;</span>)</span></code></pre></div>
<pre><code>## # A tsibble: 816 x 9 [1M]
## # Key:       Concession, Type, ATC1, ATC2 [4]
##       Month Concession   Type        ATC1  ATC1_desc                       ATC2  ATC2_desc            Scripts    Cost
##       &lt;mth&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;                           &lt;chr&gt; &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;
##  1 1991 Jul Concessional Co-payments A     Alimentary tract and metabolism A10   ANTIDIABETIC THERAPY   89733 2092878
##  2 1991 Aug Concessional Co-payments A     Alimentary tract and metabolism A10   ANTIDIABETIC THERAPY   77101 1795733
##  3 1991 Sep Concessional Co-payments A     Alimentary tract and metabolism A10   ANTIDIABETIC THERAPY   76255 1777231
##  4 1991 Oct Concessional Co-payments A     Alimentary tract and metabolism A10   ANTIDIABETIC THERAPY   78681 1848507
##  5 1991 Nov Concessional Co-payments A     Alimentary tract and metabolism A10   ANTIDIABETIC THERAPY   70554 1686458
##  6 1991 Dec Concessional Co-payments A     Alimentary tract and metabolism A10   ANTIDIABETIC THERAPY   75814 1843079
##  7 1992 Jan Concessional Co-payments A     Alimentary tract and metabolism A10   ANTIDIABETIC THERAPY   64186 1564702
##  8 1992 Feb Concessional Co-payments A     Alimentary tract and metabolism A10   ANTIDIABETIC THERAPY   75899 1732508
##  9 1992 Mar Concessional Co-payments A     Alimentary tract and metabolism A10   ANTIDIABETIC THERAPY   89445 2046102
## 10 1992 Apr Concessional Co-payments A     Alimentary tract and metabolism A10   ANTIDIABETIC THERAPY   97315 2225977
## # ℹ 806 more rows</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="time-series-graphics.html#cb32-1" tabindex="-1"></a>PBS <span class="sc">|&gt;</span></span>
<span id="cb32-2"><a href="time-series-graphics.html#cb32-2" tabindex="-1"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">&#39;A10&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href="time-series-graphics.html#cb32-3" tabindex="-1"></a>  <span class="fu">select</span>(Month, Concession, Type, Cost)</span></code></pre></div>
<pre><code>## # A tsibble: 816 x 4 [1M]
## # Key:       Concession, Type [4]
##       Month Concession   Type           Cost
##       &lt;mth&gt; &lt;chr&gt;        &lt;chr&gt;         &lt;dbl&gt;
##  1 1991 Jul Concessional Co-payments 2092878
##  2 1991 Aug Concessional Co-payments 1795733
##  3 1991 Sep Concessional Co-payments 1777231
##  4 1991 Oct Concessional Co-payments 1848507
##  5 1991 Nov Concessional Co-payments 1686458
##  6 1991 Dec Concessional Co-payments 1843079
##  7 1992 Jan Concessional Co-payments 1564702
##  8 1992 Feb Concessional Co-payments 1732508
##  9 1992 Mar Concessional Co-payments 2046102
## 10 1992 Apr Concessional Co-payments 2225977
## # ℹ 806 more rows</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="time-series-graphics.html#cb34-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">index_var</span>(PBS))</span></code></pre></div>
<pre><code>## [1] &quot;Month&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="time-series-graphics.html#cb36-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">key_vars</span>(PBS))</span></code></pre></div>
<pre><code>## [1] &quot;Concession&quot; &quot;Type&quot;       &quot;ATC1&quot;       &quot;ATC2&quot;</code></pre>
<p>If no one index or key were not explicitly selected, they would be returned as they are required for <code>tsibble</code> to ensure each row contains a unique combination of keys and index.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="time-series-graphics.html#cb38-1" tabindex="-1"></a>PBS <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a href="time-series-graphics.html#cb38-2" tabindex="-1"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">&#39;A10&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a href="time-series-graphics.html#cb38-3" tabindex="-1"></a>  <span class="fu">select</span>(Cost)</span></code></pre></div>
<pre><code>## # A tsibble: 816 x 6 [1M]
## # Key:       Concession, Type, ATC1, ATC2 [4]
##       Cost    Month Concession   Type        ATC1  ATC2 
##      &lt;dbl&gt;    &lt;mth&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;
##  1 2092878 1991 Jul Concessional Co-payments A     A10  
##  2 1795733 1991 Aug Concessional Co-payments A     A10  
##  3 1777231 1991 Sep Concessional Co-payments A     A10  
##  4 1848507 1991 Oct Concessional Co-payments A     A10  
##  5 1686458 1991 Nov Concessional Co-payments A     A10  
##  6 1843079 1991 Dec Concessional Co-payments A     A10  
##  7 1564702 1992 Jan Concessional Co-payments A     A10  
##  8 1732508 1992 Feb Concessional Co-payments A     A10  
##  9 2046102 1992 Mar Concessional Co-payments A     A10  
## 10 2225977 1992 Apr Concessional Co-payments A     A10  
## # ℹ 806 more rows</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="time-series-graphics.html#cb40-1" tabindex="-1"></a>PBS <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a href="time-series-graphics.html#cb40-2" tabindex="-1"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">&#39;A10&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="time-series-graphics.html#cb40-3" tabindex="-1"></a>  <span class="fu">select</span>(Concession, Type, Cost)</span></code></pre></div>
<pre><code>## # A tsibble: 816 x 4 [1M]
## # Key:       Concession, Type [4]
##    Concession   Type           Cost    Month
##    &lt;chr&gt;        &lt;chr&gt;         &lt;dbl&gt;    &lt;mth&gt;
##  1 Concessional Co-payments 2092878 1991 Jul
##  2 Concessional Co-payments 1795733 1991 Aug
##  3 Concessional Co-payments 1777231 1991 Sep
##  4 Concessional Co-payments 1848507 1991 Oct
##  5 Concessional Co-payments 1686458 1991 Nov
##  6 Concessional Co-payments 1843079 1991 Dec
##  7 Concessional Co-payments 1564702 1992 Jan
##  8 Concessional Co-payments 1732508 1992 Feb
##  9 Concessional Co-payments 2046102 1992 Mar
## 10 Concessional Co-payments 2225977 1992 Apr
## # ℹ 806 more rows</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="time-series-graphics.html#cb42-1" tabindex="-1"></a>PBS <span class="sc">|&gt;</span></span>
<span id="cb42-2"><a href="time-series-graphics.html#cb42-2" tabindex="-1"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">&#39;A10&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="time-series-graphics.html#cb42-3" tabindex="-1"></a>  <span class="fu">select</span>(Month, Concession, Type, Cost) <span class="sc">|&gt;</span></span>
<span id="cb42-4"><a href="time-series-graphics.html#cb42-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TotalC =</span> <span class="fu">sum</span>(Cost))</span></code></pre></div>
<pre><code>## # A tsibble: 204 x 2 [1M]
##       Month  TotalC
##       &lt;mth&gt;   &lt;dbl&gt;
##  1 1991 Jul 3526591
##  2 1991 Aug 3180891
##  3 1991 Sep 3252221
##  4 1991 Oct 3611003
##  5 1991 Nov 3565869
##  6 1991 Dec 4306371
##  7 1992 Jan 5088335
##  8 1992 Feb 2814520
##  9 1992 Mar 2985811
## 10 1992 Apr 3204780
## # ℹ 194 more rows</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="time-series-graphics.html#cb44-1" tabindex="-1"></a>PBS <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="time-series-graphics.html#cb44-2" tabindex="-1"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">&#39;A10&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb44-3"><a href="time-series-graphics.html#cb44-3" tabindex="-1"></a>  <span class="fu">select</span>(Month, Concession, Type, Cost) <span class="sc">|&gt;</span></span>
<span id="cb44-4"><a href="time-series-graphics.html#cb44-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TotalC =</span> <span class="fu">sum</span>(Cost)) <span class="sc">|&gt;</span></span>
<span id="cb44-5"><a href="time-series-graphics.html#cb44-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Cost =</span> TotalC <span class="sc">/</span> <span class="fl">1e6</span>)</span></code></pre></div>
<pre><code>## # A tsibble: 204 x 3 [1M]
##       Month  TotalC  Cost
##       &lt;mth&gt;   &lt;dbl&gt; &lt;dbl&gt;
##  1 1991 Jul 3526591  3.53
##  2 1991 Aug 3180891  3.18
##  3 1991 Sep 3252221  3.25
##  4 1991 Oct 3611003  3.61
##  5 1991 Nov 3565869  3.57
##  6 1991 Dec 4306371  4.31
##  7 1992 Jan 5088335  5.09
##  8 1992 Feb 2814520  2.81
##  9 1992 Mar 2985811  2.99
## 10 1992 Apr 3204780  3.20
## # ℹ 194 more rows</code></pre>
<p>Save to the further usage.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="time-series-graphics.html#cb46-1" tabindex="-1"></a>PBS <span class="sc">|&gt;</span></span>
<span id="cb46-2"><a href="time-series-graphics.html#cb46-2" tabindex="-1"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">&#39;A10&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb46-3"><a href="time-series-graphics.html#cb46-3" tabindex="-1"></a>  <span class="fu">select</span>(Month, Concession, Type, Cost) <span class="sc">|&gt;</span></span>
<span id="cb46-4"><a href="time-series-graphics.html#cb46-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">TotalC =</span> <span class="fu">sum</span>(Cost)) <span class="sc">|&gt;</span></span>
<span id="cb46-5"><a href="time-series-graphics.html#cb46-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Cost =</span> TotalC <span class="sc">/</span> <span class="fl">1e6</span>) <span class="ot">-&gt;</span> a10</span>
<span id="cb46-6"><a href="time-series-graphics.html#cb46-6" tabindex="-1"></a></span>
<span id="cb46-7"><a href="time-series-graphics.html#cb46-7" tabindex="-1"></a>a10</span></code></pre></div>
<pre><code>## # A tsibble: 204 x 3 [1M]
##       Month  TotalC  Cost
##       &lt;mth&gt;   &lt;dbl&gt; &lt;dbl&gt;
##  1 1991 Jul 3526591  3.53
##  2 1991 Aug 3180891  3.18
##  3 1991 Sep 3252221  3.25
##  4 1991 Oct 3611003  3.61
##  5 1991 Nov 3565869  3.57
##  6 1991 Dec 4306371  4.31
##  7 1992 Jan 5088335  5.09
##  8 1992 Feb 2814520  2.81
##  9 1992 Mar 2985811  2.99
## 10 1992 Apr 3204780  3.20
## # ℹ 194 more rows</code></pre>
</div>
<div id="read-a-csv-file-and-convert-to-a-tsibble" class="section level3 hasAnchor" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Read a csv file and convert to a tsibble<a href="time-series-graphics.html#read-a-csv-file-and-convert-to-a-tsibble" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="time-series-graphics.html#cb48-1" tabindex="-1"></a>prison <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&#39;https://OTexts.com/fpp3/extrafiles/prison_population.csv&#39;</span>)</span>
<span id="cb48-2"><a href="time-series-graphics.html#cb48-2" tabindex="-1"></a></span>
<span id="cb48-3"><a href="time-series-graphics.html#cb48-3" tabindex="-1"></a>prison <span class="ot">&lt;-</span> prison <span class="sc">|&gt;</span></span>
<span id="cb48-4"><a href="time-series-graphics.html#cb48-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Quarter =</span> <span class="fu">yearquarter</span>(Date)) <span class="sc">|&gt;</span></span>
<span id="cb48-5"><a href="time-series-graphics.html#cb48-5" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Date) <span class="sc">|&gt;</span></span>
<span id="cb48-6"><a href="time-series-graphics.html#cb48-6" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">key =</span> <span class="fu">c</span>(State, Gender, Legal, Indigenous))</span></code></pre></div>
<pre><code>## Using `Quarter` as index variable.</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="time-series-graphics.html#cb50-1" tabindex="-1"></a>prison</span></code></pre></div>
<pre><code>## # A tsibble: 3,072 x 6 [1Q]
## # Key:       State, Gender, Legal, Indigenous [64]
##    State Gender Legal    Indigenous Count Quarter
##    &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;      &lt;int&gt;   &lt;qtr&gt;
##  1 ACT   Female Remanded ATSI           0 2005 Q1
##  2 ACT   Female Remanded ATSI           1 2005 Q2
##  3 ACT   Female Remanded ATSI           0 2005 Q3
##  4 ACT   Female Remanded ATSI           0 2005 Q4
##  5 ACT   Female Remanded ATSI           1 2006 Q1
##  6 ACT   Female Remanded ATSI           1 2006 Q2
##  7 ACT   Female Remanded ATSI           1 2006 Q3
##  8 ACT   Female Remanded ATSI           0 2006 Q4
##  9 ACT   Female Remanded ATSI           0 2007 Q1
## 10 ACT   Female Remanded ATSI           1 2007 Q2
## # ℹ 3,062 more rows</code></pre>
<blockquote>
<p>For a tsibble to be valid, it requires a unique index for each combination of keys. The <code>tsibble()</code> or <code>as_tsibble()</code> function will return an error if this is not true.</p>
</blockquote>
</div>
<div id="the-seasonal-period" class="section level3 hasAnchor" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> The seasonal period<a href="time-series-graphics.html#the-seasonal-period" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>The seasonal period is the number of observations before the seasonal pattern repeats.</p>
</blockquote>
<table>
<thead>
<tr class="header">
<th align="left">Data</th>
<th align="right">Minute</th>
<th align="right">Hour</th>
<th align="right">Day</th>
<th align="right">Week</th>
<th align="right">Year</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Quarters</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">Months</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Weeks</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right">52.18</td>
</tr>
<tr class="even">
<td align="left">Days</td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right">7</td>
<td align="right">365.25</td>
</tr>
<tr class="odd">
<td align="left">Hours</td>
<td align="right"></td>
<td align="right"></td>
<td align="right">24</td>
<td align="right">168</td>
<td align="right">8766</td>
</tr>
<tr class="even">
<td align="left">Minutes</td>
<td align="right"></td>
<td align="right">60</td>
<td align="right">1440</td>
<td align="right">10080</td>
<td align="right">525960</td>
</tr>
<tr class="odd">
<td align="left">Seconds</td>
<td align="right">60</td>
<td align="right">3600</td>
<td align="right">86400</td>
<td align="right">604800</td>
<td align="right">31557600</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="time-plot" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Time plot<a href="time-series-graphics.html#time-plot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/time-plots.html">The source of the section</a></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="time-series-graphics.html#cb52-1" tabindex="-1"></a>a10</span></code></pre></div>
<pre><code>## # A tsibble: 204 x 3 [1M]
##       Month  TotalC  Cost
##       &lt;mth&gt;   &lt;dbl&gt; &lt;dbl&gt;
##  1 1991 Jul 3526591  3.53
##  2 1991 Aug 3180891  3.18
##  3 1991 Sep 3252221  3.25
##  4 1991 Oct 3611003  3.61
##  5 1991 Nov 3565869  3.57
##  6 1991 Dec 4306371  4.31
##  7 1992 Jan 5088335  5.09
##  8 1992 Feb 2814520  2.81
##  9 1992 Mar 2985811  2.99
## 10 1992 Apr 3204780  3.20
## # ℹ 194 more rows</code></pre>
<p><code>autoplot()</code> is a smart function.</p>
<blockquote>
<p>It automatically produces an appropriate plot of whatever you pass to it in the first argument</p>
</blockquote>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="time-series-graphics.html#cb54-1" tabindex="-1"></a>a10 <span class="sc">|&gt;</span> </span>
<span id="cb54-2"><a href="time-series-graphics.html#cb54-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Cost) <span class="sc">+</span></span>
<span id="cb54-3"><a href="time-series-graphics.html#cb54-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">&#39;$ (millions)&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Australian antidiabetic drug sales&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-24-1.png" width="672" /></p>
<p>Using <code>ggplot</code>.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="time-series-graphics.html#cb55-1" tabindex="-1"></a>a10 <span class="sc">|&gt;</span></span>
<span id="cb55-2"><a href="time-series-graphics.html#cb55-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> Cost)) <span class="sc">+</span></span>
<span id="cb55-3"><a href="time-series-graphics.html#cb55-3" tabindex="-1"></a>    <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb55-4"><a href="time-series-graphics.html#cb55-4" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&#39;Australian antidiabetic drug sales&#39;</span>) <span class="sc">+</span></span>
<span id="cb55-5"><a href="time-series-graphics.html#cb55-5" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&#39;$ (millions)&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-25-1.png" width="672" /></p>
<p>Add points on the line.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="time-series-graphics.html#cb56-1" tabindex="-1"></a>a10 <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a href="time-series-graphics.html#cb56-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Cost) <span class="sc">+</span></span>
<span id="cb56-3"><a href="time-series-graphics.html#cb56-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb56-4"><a href="time-series-graphics.html#cb56-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">&#39;$ (millions)&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Australian antidiabetic drug sales&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-26-1.png" width="672" /></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="time-series-graphics.html#cb57-1" tabindex="-1"></a>ansett</span></code></pre></div>
<pre><code>## # A tsibble: 7,407 x 4 [1W]
## # Key:       Airports, Class [30]
##        Week Airports Class    Passengers
##      &lt;week&gt; &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;
##  1 1989 W28 ADL-PER  Business        193
##  2 1989 W29 ADL-PER  Business        254
##  3 1989 W30 ADL-PER  Business        185
##  4 1989 W31 ADL-PER  Business        254
##  5 1989 W32 ADL-PER  Business        191
##  6 1989 W33 ADL-PER  Business        136
##  7 1989 W34 ADL-PER  Business          0
##  8 1989 W35 ADL-PER  Business          0
##  9 1989 W36 ADL-PER  Business          0
## 10 1989 W37 ADL-PER  Business          0
## # ℹ 7,397 more rows</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="time-series-graphics.html#cb59-1" tabindex="-1"></a>ansett <span class="sc">|&gt;</span></span>
<span id="cb59-2"><a href="time-series-graphics.html#cb59-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Passengers)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-28-1.png" width="672" /></p>
<p>Distinct categories.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="time-series-graphics.html#cb60-1" tabindex="-1"></a><span class="fu">print</span>(ansett <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Class))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 1
##   Class   
##   &lt;chr&gt;   
## 1 Business
## 2 Economy 
## 3 First</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="time-series-graphics.html#cb62-1" tabindex="-1"></a><span class="fu">print</span>(ansett <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Airports))</span></code></pre></div>
<pre><code>## # A tibble: 10 × 1
##    Airports
##    &lt;chr&gt;   
##  1 ADL-PER 
##  2 MEL-ADL 
##  3 MEL-BNE 
##  4 MEL-OOL 
##  5 MEL-PER 
##  6 MEL-SYD 
##  7 SYD-ADL 
##  8 SYD-BNE 
##  9 SYD-OOL 
## 10 SYD-PER</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="time-series-graphics.html#cb64-1" tabindex="-1"></a>ansett <span class="sc">|&gt;</span></span>
<span id="cb64-2"><a href="time-series-graphics.html#cb64-2" tabindex="-1"></a>  <span class="fu">filter</span>(Class <span class="sc">==</span> <span class="st">&#39;Economy&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb64-3"><a href="time-series-graphics.html#cb64-3" tabindex="-1"></a>  <span class="fu">autoplot</span>(Passengers) <span class="sc">+</span></span>
<span id="cb64-4"><a href="time-series-graphics.html#cb64-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Number of passanger&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Week&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Number of passangers by routs&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-30-1.png" width="672" /></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="time-series-graphics.html#cb65-1" tabindex="-1"></a>ansett <span class="sc">|&gt;</span></span>
<span id="cb65-2"><a href="time-series-graphics.html#cb65-2" tabindex="-1"></a>  <span class="fu">filter</span>(Airports <span class="sc">==</span> <span class="st">&#39;MEL-SYD&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb65-3"><a href="time-series-graphics.html#cb65-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Airports) <span class="sc">|&gt;</span> <span class="co"># to avoid the filtered rout from titles</span></span>
<span id="cb65-4"><a href="time-series-graphics.html#cb65-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(Passengers) <span class="sc">+</span></span>
<span id="cb65-5"><a href="time-series-graphics.html#cb65-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Number of passanger&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Week&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Number of passangers by class&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-31-1.png" width="672" /></p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="time-series-graphics.html#cb66-1" tabindex="-1"></a>melsyd_economy <span class="ot">&lt;-</span> ansett <span class="sc">|&gt;</span></span>
<span id="cb66-2"><a href="time-series-graphics.html#cb66-2" tabindex="-1"></a>  <span class="fu">filter</span>(Airports <span class="sc">==</span> <span class="st">&#39;MEL-SYD&#39;</span>, Class <span class="sc">==</span> <span class="st">&#39;Economy&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb66-3"><a href="time-series-graphics.html#cb66-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Passengers =</span> Passengers<span class="sc">/</span><span class="fl">1e3</span>)</span>
<span id="cb66-4"><a href="time-series-graphics.html#cb66-4" tabindex="-1"></a></span>
<span id="cb66-5"><a href="time-series-graphics.html#cb66-5" tabindex="-1"></a>melsyd_economy <span class="sc">|&gt;</span></span>
<span id="cb66-6"><a href="time-series-graphics.html#cb66-6" tabindex="-1"></a>  <span class="fu">autoplot</span>(Passengers) <span class="sc">+</span></span>
<span id="cb66-7"><a href="time-series-graphics.html#cb66-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Ansett airlines economy class&#39;</span>,</span>
<span id="cb66-8"><a href="time-series-graphics.html#cb66-8" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Melbourne-Sydney&#39;</span>,</span>
<span id="cb66-9"><a href="time-series-graphics.html#cb66-9" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Passangers (K)&#39;</span>, <span class="at">x =</span> <span class="st">&#39;Week&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-32-1.png" width="672" /></p>
</div>
<div id="time-series-patterns" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Time series patterns<a href="time-series-graphics.html#time-series-patterns" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/tspatterns.html">The source of the section</a></p>
<ul>
<li><strong>Trend</strong>: pattern exists when there is a long-term increase or decrease in the data.</li>
<li><strong>Seasonal</strong>: pattern exists when a series is influenced by seasonal factor (quarter, month, week, day of the week, etc.).</li>
<li><strong>Cyclic</strong>: pattern exists when data exhibit rises and falls that are not of fixed period.</li>
</ul>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="time-series-graphics.html#cb67-1" tabindex="-1"></a><span class="co"># positive trend</span></span>
<span id="cb67-2"><a href="time-series-graphics.html#cb67-2" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span></span>
<span id="cb67-3"><a href="time-series-graphics.html#cb67-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&gt;=</span> <span class="dv">1980</span>) <span class="sc">|&gt;</span></span>
<span id="cb67-4"><a href="time-series-graphics.html#cb67-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(Electricity) <span class="sc">+</span></span>
<span id="cb67-5"><a href="time-series-graphics.html#cb67-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;GWh&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Australian electricity production&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-34-1.png" width="672" /></p>
<blockquote>
<p><strong>Important!</strong> Many time series include trend, cycles and seasonality. When choosing a forecasting method, we will first need to identify the time series patterns in the data, and then choose a method that is able to capture the patterns properly.</p>
</blockquote>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="time-series-graphics.html#cb68-1" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a href="time-series-graphics.html#cb68-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Bricks) <span class="sc">+</span></span>
<span id="cb68-3"><a href="time-series-graphics.html#cb68-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;MIllion units&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Australian clay brick production&#39;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 20 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<p><img src="figure_html/ch02-ts-plots-35-1.png" width="672" /></p>
<blockquote>
<p>The timing of peaks and troughs is predictable with seasonal data, but unpredictable in the long term with ciclic data.</p>
</blockquote>
</div>
<div id="seasonal-plots" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Seasonal plots<a href="time-series-graphics.html#seasonal-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/seasonal-plots.html">The source of the section</a></p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="time-series-graphics.html#cb70-1" tabindex="-1"></a>a10 <span class="sc">|&gt;</span> </span>
<span id="cb70-2"><a href="time-series-graphics.html#cb70-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Cost)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-36-1.png" width="672" /></p>
<p>A seasonal plot plots the data against the individual season in which the data were observed.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="time-series-graphics.html#cb71-1" tabindex="-1"></a>a10 <span class="sc">|&gt;</span></span>
<span id="cb71-2"><a href="time-series-graphics.html#cb71-2" tabindex="-1"></a>  <span class="fu">gg_season</span>(Cost, <span class="at">labels =</span> <span class="st">&#39;both&#39;</span>) <span class="sc">+</span></span>
<span id="cb71-3"><a href="time-series-graphics.html#cb71-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;$ million&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Seasonal plot: antidiabetic drug sales&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-37-1.png" width="672" /></p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="time-series-graphics.html#cb72-1" tabindex="-1"></a>beer <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb72-2"><a href="time-series-graphics.html#cb72-2" tabindex="-1"></a>  <span class="fu">select</span>(Quarter, Beer) <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a href="time-series-graphics.html#cb72-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&gt;=</span> <span class="dv">1992</span>)</span>
<span id="cb72-4"><a href="time-series-graphics.html#cb72-4" tabindex="-1"></a></span>
<span id="cb72-5"><a href="time-series-graphics.html#cb72-5" tabindex="-1"></a>beer <span class="sc">|&gt;</span> <span class="fu">autoplot</span>(Beer) <span class="sc">+</span></span>
<span id="cb72-6"><a href="time-series-graphics.html#cb72-6" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb72-7"><a href="time-series-graphics.html#cb72-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Australian beer production&#39;</span>, <span class="at">y =</span> <span class="st">&#39;Megalitres&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-38-1.png" width="672" /></p>
<div id="multiple-seasonal-periods" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Multiple seasonal periods<a href="time-series-graphics.html#multiple-seasonal-periods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="time-series-graphics.html#cb73-1" tabindex="-1"></a>vic_elec <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `.vars = Demand`</code></pre>
<p><img src="figure_html/ch02-ts-plots-39-1.png" width="672" /></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="time-series-graphics.html#cb75-1" tabindex="-1"></a>vic_elec <span class="sc">|&gt;</span></span>
<span id="cb75-2"><a href="time-series-graphics.html#cb75-2" tabindex="-1"></a>  <span class="fu">gg_season</span>(Demand)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-40-1.png" width="672" /></p>
<p>By time during the day.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="time-series-graphics.html#cb76-1" tabindex="-1"></a>vic_elec <span class="sc">|&gt;</span></span>
<span id="cb76-2"><a href="time-series-graphics.html#cb76-2" tabindex="-1"></a>  <span class="fu">gg_season</span>(Demand, <span class="at">period =</span> <span class="st">&#39;day&#39;</span>) <span class="sc">+</span></span>
<span id="cb76-3"><a href="time-series-graphics.html#cb76-3" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb76-4"><a href="time-series-graphics.html#cb76-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">&quot;MWh&quot;</span>, <span class="at">title=</span><span class="st">&quot;Electricity demand: Victoria&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-41-1.png" width="672" /></p>
<p>Weekly.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="time-series-graphics.html#cb77-1" tabindex="-1"></a>vic_elec <span class="sc">|&gt;</span></span>
<span id="cb77-2"><a href="time-series-graphics.html#cb77-2" tabindex="-1"></a>  <span class="fu">gg_season</span>(Demand, <span class="at">period =</span> <span class="st">&#39;week&#39;</span>) <span class="sc">+</span></span>
<span id="cb77-3"><a href="time-series-graphics.html#cb77-3" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb77-4"><a href="time-series-graphics.html#cb77-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">&quot;MWh&quot;</span>, <span class="at">title=</span><span class="st">&quot;Electricity demand: Victoria&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-42-1.png" width="672" /></p>
<p>Monthly.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="time-series-graphics.html#cb78-1" tabindex="-1"></a>vic_elec <span class="sc">|&gt;</span></span>
<span id="cb78-2"><a href="time-series-graphics.html#cb78-2" tabindex="-1"></a>  <span class="fu">gg_season</span>(Demand, <span class="at">period =</span> <span class="st">&#39;month&#39;</span>) <span class="sc">+</span></span>
<span id="cb78-3"><a href="time-series-graphics.html#cb78-3" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb78-4"><a href="time-series-graphics.html#cb78-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">&quot;MWh&quot;</span>, <span class="at">title=</span><span class="st">&quot;Electricity demand: Victoria&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-43-1.png" width="672" /></p>
</div>
</div>
<div id="seasonal-subseries-plots" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Seasonal subseries plots<a href="time-series-graphics.html#seasonal-subseries-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/subseries.html">The source of the section</a></p>
<p>Mini plots per each season.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="time-series-graphics.html#cb79-1" tabindex="-1"></a>a10 <span class="sc">|&gt;</span></span>
<span id="cb79-2"><a href="time-series-graphics.html#cb79-2" tabindex="-1"></a>  <span class="fu">gg_subseries</span>(Cost) <span class="sc">+</span></span>
<span id="cb79-3"><a href="time-series-graphics.html#cb79-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;$ (millions)&#39;</span>,</span>
<span id="cb79-4"><a href="time-series-graphics.html#cb79-4" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Australian antidiabetic drug sales&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-44-1.png" width="672" /></p>
<blockquote>
<p>This plot is useful to identify changing within particular seasons.</p>
</blockquote>
<div id="example-australian-holiday-tourism" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Example: Australian holiday tourism<a href="time-series-graphics.html#example-australian-holiday-tourism" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="time-series-graphics.html#cb80-1" tabindex="-1"></a>holidays <span class="ot">&lt;-</span> tourism <span class="sc">|&gt;</span></span>
<span id="cb80-2"><a href="time-series-graphics.html#cb80-2" tabindex="-1"></a>  <span class="fu">filter</span>(Purpose <span class="sc">==</span> <span class="st">&#39;Holiday&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb80-3"><a href="time-series-graphics.html#cb80-3" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">|&gt;</span></span>
<span id="cb80-4"><a href="time-series-graphics.html#cb80-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Trips =</span> <span class="fu">sum</span>(Trips))</span>
<span id="cb80-5"><a href="time-series-graphics.html#cb80-5" tabindex="-1"></a></span>
<span id="cb80-6"><a href="time-series-graphics.html#cb80-6" tabindex="-1"></a>holidays</span></code></pre></div>
<pre><code>## # A tsibble: 640 x 3 [1Q]
## # Key:       State [8]
##    State Quarter Trips
##    &lt;chr&gt;   &lt;qtr&gt; &lt;dbl&gt;
##  1 ACT   1998 Q1  196.
##  2 ACT   1998 Q2  127.
##  3 ACT   1998 Q3  111.
##  4 ACT   1998 Q4  170.
##  5 ACT   1999 Q1  108.
##  6 ACT   1999 Q2  125.
##  7 ACT   1999 Q3  178.
##  8 ACT   1999 Q4  218.
##  9 ACT   2000 Q1  158.
## 10 ACT   2000 Q2  155.
## # ℹ 630 more rows</code></pre>
<p>Time plots of each series show that there is strong seasonality for most states, but that the seasonal peaks do not coincide.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="time-series-graphics.html#cb82-1" tabindex="-1"></a>holidays <span class="sc">|&gt;</span></span>
<span id="cb82-2"><a href="time-series-graphics.html#cb82-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Trips) <span class="sc">+</span></span>
<span id="cb82-3"><a href="time-series-graphics.html#cb82-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Obernight trips (K)&#39;</span>,</span>
<span id="cb82-4"><a href="time-series-graphics.html#cb82-4" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Australian domestic holidays&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-46-1.png" width="672" /></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="time-series-graphics.html#cb83-1" tabindex="-1"></a>holidays <span class="sc">|&gt;</span></span>
<span id="cb83-2"><a href="time-series-graphics.html#cb83-2" tabindex="-1"></a>  <span class="fu">gg_season</span>(Trips) <span class="sc">+</span></span>
<span id="cb83-3"><a href="time-series-graphics.html#cb83-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Obernight trips (K)&#39;</span>,</span>
<span id="cb83-4"><a href="time-series-graphics.html#cb83-4" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Australian domestic holidays&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-47-1.png" width="768" /></p>
<p>Subseries plot.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="time-series-graphics.html#cb84-1" tabindex="-1"></a>holidays <span class="sc">|&gt;</span></span>
<span id="cb84-2"><a href="time-series-graphics.html#cb84-2" tabindex="-1"></a>  <span class="fu">gg_subseries</span>(Trips) <span class="sc">+</span></span>
<span id="cb84-3"><a href="time-series-graphics.html#cb84-3" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Obernight trips (K)&#39;</span>,</span>
<span id="cb84-4"><a href="time-series-graphics.html#cb84-4" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Australian domestic holidays&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-48-1.png" width="768" /></p>
</div>
</div>
<div id="scatterplots" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Scatterplots<a href="time-series-graphics.html#scatterplots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/scatterplots.html">The source of the section</a></p>
<p>Scatterplots are useful to explore relationship between time series.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="time-series-graphics.html#cb85-1" tabindex="-1"></a>vic_elec_day_type <span class="ot">=</span> vic_elec <span class="sc">|&gt;</span></span>
<span id="cb85-2"><a href="time-series-graphics.html#cb85-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Time) <span class="sc">==</span> <span class="dv">2014</span>) <span class="sc">|&gt;</span></span>
<span id="cb85-3"><a href="time-series-graphics.html#cb85-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Day_Type =</span>  <span class="fu">case_when</span>(Holiday <span class="sc">~</span> <span class="st">&quot;Holiday&quot;</span>,</span>
<span id="cb85-4"><a href="time-series-graphics.html#cb85-4" tabindex="-1"></a>                               <span class="fu">wday</span>(Date) <span class="sc">%in%</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span> <span class="sc">~</span> <span class="st">&quot;Weekday&quot;</span>,</span>
<span id="cb85-5"><a href="time-series-graphics.html#cb85-5" tabindex="-1"></a>                               <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Weekend&quot;</span>))</span>
<span id="cb85-6"><a href="time-series-graphics.html#cb85-6" tabindex="-1"></a></span>
<span id="cb85-7"><a href="time-series-graphics.html#cb85-7" tabindex="-1"></a>vic_elec_day_type</span></code></pre></div>
<pre><code>## # A tsibble: 17,520 x 6 [30m] &lt;Australia/Melbourne&gt;
##    Time                Demand Temperature Date       Holiday Day_Type
##    &lt;dttm&gt;               &lt;dbl&gt;       &lt;dbl&gt; &lt;date&gt;     &lt;lgl&gt;   &lt;chr&gt;   
##  1 2014-01-01 00:00:00  4092.        18.7 2014-01-01 TRUE    Holiday 
##  2 2014-01-01 00:30:00  4198.        18.1 2014-01-01 TRUE    Holiday 
##  3 2014-01-01 01:00:00  3915.        18.2 2014-01-01 TRUE    Holiday 
##  4 2014-01-01 01:30:00  3673.        17.9 2014-01-01 TRUE    Holiday 
##  5 2014-01-01 02:00:00  3498.        17.6 2014-01-01 TRUE    Holiday 
##  6 2014-01-01 02:30:00  3339.        16.8 2014-01-01 TRUE    Holiday 
##  7 2014-01-01 03:00:00  3204.        16.3 2014-01-01 TRUE    Holiday 
##  8 2014-01-01 03:30:00  3100.        16.6 2014-01-01 TRUE    Holiday 
##  9 2014-01-01 04:00:00  3039.        16.6 2014-01-01 TRUE    Holiday 
## 10 2014-01-01 04:30:00  3012.        16.7 2014-01-01 TRUE    Holiday 
## # ℹ 17,510 more rows</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="time-series-graphics.html#cb87-1" tabindex="-1"></a>vic_elec_day_type <span class="sc">|&gt;</span></span>
<span id="cb87-2"><a href="time-series-graphics.html#cb87-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(<span class="at">facets=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb87-3"><a href="time-series-graphics.html#cb87-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;GWh&quot;</span>,</span>
<span id="cb87-4"><a href="time-series-graphics.html#cb87-4" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Half-hourly electricity demand: Victoria&quot;</span>)</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `.vars = Demand`</code></pre>
<pre><code>## Warning in geom_line(...): Ignoring unknown parameters: `facets`</code></pre>
<p><img src="figure_html/ch02-ts-plots-50-1.png" width="672" /></p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="time-series-graphics.html#cb90-1" tabindex="-1"></a>vic_elec_day_type <span class="sc">|&gt;</span></span>
<span id="cb90-2"><a href="time-series-graphics.html#cb90-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Temperature) <span class="sc">+</span></span>
<span id="cb90-3"><a href="time-series-graphics.html#cb90-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Degrees Celsius&quot;</span>,</span>
<span id="cb90-4"><a href="time-series-graphics.html#cb90-4" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Half-hourly temperatures: Melbourne, Australia&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-51-1.png" width="672" /></p>
<p>The relationship between demand and temperature.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="time-series-graphics.html#cb91-1" tabindex="-1"></a>vic_elec_day_type <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href="time-series-graphics.html#cb91-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Temperature, <span class="at">y =</span> Demand)) <span class="sc">+</span></span>
<span id="cb91-3"><a href="time-series-graphics.html#cb91-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb91-4"><a href="time-series-graphics.html#cb91-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Temperature (Cº)&#39;</span>,</span>
<span id="cb91-5"><a href="time-series-graphics.html#cb91-5" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Electricity demand (GWh&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-52-1.png" width="672" /></p>
<p>By the type of a day.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="time-series-graphics.html#cb92-1" tabindex="-1"></a>vic_elec_day_type <span class="sc">|&gt;</span></span>
<span id="cb92-2"><a href="time-series-graphics.html#cb92-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Temperature, <span class="at">y =</span> Demand, <span class="at">colour =</span> Day_Type)) <span class="sc">+</span></span>
<span id="cb92-3"><a href="time-series-graphics.html#cb92-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb92-4"><a href="time-series-graphics.html#cb92-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Temperature (Cº)&#39;</span>,</span>
<span id="cb92-5"><a href="time-series-graphics.html#cb92-5" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Electricity demand (GWh)&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-53-1.png" width="672" /></p>
<div id="correlation" class="section level3 hasAnchor" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Correlation<a href="time-series-graphics.html#correlation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The correlation coefficient.</p>
<p><span class="math display">\[
r = \frac {\sum{(x_t - \bar{x})(y_t - \bar{y})}}{\sqrt{\sum(x_t - \bar{x})^2}\sqrt{\sum(y_t - \bar{y})^2}}, -1 \leq r \leq 1
\]</span></p>
</div>
<div id="scatterplot-matrices" class="section level3 hasAnchor" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Scatterplot matrices<a href="time-series-graphics.html#scatterplot-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="time-series-graphics.html#cb93-1" tabindex="-1"></a>tourism</span></code></pre></div>
<pre><code>## # A tsibble: 24,320 x 5 [1Q]
## # Key:       Region, State, Purpose [304]
##    Quarter Region   State Purpose  Trips
##      &lt;qtr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1 1998 Q1 Adelaide SA    Business  135.
##  2 1998 Q2 Adelaide SA    Business  110.
##  3 1998 Q3 Adelaide SA    Business  166.
##  4 1998 Q4 Adelaide SA    Business  127.
##  5 1999 Q1 Adelaide SA    Business  137.
##  6 1999 Q2 Adelaide SA    Business  200.
##  7 1999 Q3 Adelaide SA    Business  169.
##  8 1999 Q4 Adelaide SA    Business  134.
##  9 2000 Q1 Adelaide SA    Business  154.
## 10 2000 Q2 Adelaide SA    Business  169.
## # ℹ 24,310 more rows</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="time-series-graphics.html#cb95-1" tabindex="-1"></a>visitors <span class="ot">&lt;-</span> tourism <span class="sc">|&gt;</span></span>
<span id="cb95-2"><a href="time-series-graphics.html#cb95-2" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">|&gt;</span></span>
<span id="cb95-3"><a href="time-series-graphics.html#cb95-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Trips =</span> <span class="fu">sum</span>(Trips))</span>
<span id="cb95-4"><a href="time-series-graphics.html#cb95-4" tabindex="-1"></a></span>
<span id="cb95-5"><a href="time-series-graphics.html#cb95-5" tabindex="-1"></a>visitors</span></code></pre></div>
<pre><code>## # A tsibble: 640 x 3 [1Q]
## # Key:       State [8]
##    State Quarter Trips
##    &lt;chr&gt;   &lt;qtr&gt; &lt;dbl&gt;
##  1 ACT   1998 Q1  551.
##  2 ACT   1998 Q2  416.
##  3 ACT   1998 Q3  436.
##  4 ACT   1998 Q4  450.
##  5 ACT   1999 Q1  379.
##  6 ACT   1999 Q2  558.
##  7 ACT   1999 Q3  449.
##  8 ACT   1999 Q4  595.
##  9 ACT   2000 Q1  600.
## 10 ACT   2000 Q2  557.
## # ℹ 630 more rows</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="time-series-graphics.html#cb97-1" tabindex="-1"></a>visitors <span class="sc">|&gt;</span></span>
<span id="cb97-2"><a href="time-series-graphics.html#cb97-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Quarter, <span class="at">y =</span> Trips)) <span class="sc">+</span></span>
<span id="cb97-3"><a href="time-series-graphics.html#cb97-3" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb97-4"><a href="time-series-graphics.html#cb97-4" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(State), <span class="at">scales =</span> <span class="st">&#39;free_y&#39;</span>) <span class="sc">+</span></span>
<span id="cb97-5"><a href="time-series-graphics.html#cb97-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Australian domestic tourism&#39;</span>,</span>
<span id="cb97-6"><a href="time-series-graphics.html#cb97-6" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Overnight trips (K)&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-56-1.png" width="768" /></p>
<p>A scatterplot matrix displays the relationships between pairs of variables in a dataset by showing scatterplots for each combination of variables. This helps to visualize correlations, trends, and patterns between variables, making it easier to detect linear relationships, clusters, or outliers. Each scatterplot shows how one variable relates to another, and the diagonal typically contains the distribution (e.g., histograms, density) of each variable.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="time-series-graphics.html#cb98-1" tabindex="-1"></a>visitors <span class="sc">|&gt;</span></span>
<span id="cb98-2"><a href="time-series-graphics.html#cb98-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">values_from =</span> <span class="st">&#39;Trips&#39;</span>, <span class="at">names_from =</span> <span class="st">&#39;State&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb98-3"><a href="time-series-graphics.html#cb98-3" tabindex="-1"></a>  GGally<span class="sc">::</span><span class="fu">ggpairs</span>(<span class="at">columns =</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-57-1.png" width="768" /></p>
</div>
</div>
<div id="lag-plots" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Lag plots<a href="time-series-graphics.html#lag-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/lag-plots.html">The source of the section</a></p>
<p>Lag plot uses to identify relationship between multiple time series.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="time-series-graphics.html#cb99-1" tabindex="-1"></a>new_production <span class="ot">&lt;-</span> aus_production <span class="sc">|&gt;</span></span>
<span id="cb99-2"><a href="time-series-graphics.html#cb99-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Quarter) <span class="sc">&gt;=</span> <span class="dv">1992</span>)</span>
<span id="cb99-3"><a href="time-series-graphics.html#cb99-3" tabindex="-1"></a></span>
<span id="cb99-4"><a href="time-series-graphics.html#cb99-4" tabindex="-1"></a>new_production</span></code></pre></div>
<pre><code>## # A tsibble: 74 x 7 [1Q]
##    Quarter  Beer Tobacco Bricks Cement Electricity   Gas
##      &lt;qtr&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 1992 Q1   443    5777    383   1289       38332   117
##  2 1992 Q2   410    5853    404   1501       39774   151
##  3 1992 Q3   420    6416    446   1539       42246   175
##  4 1992 Q4   532    5825    420   1568       38498   129
##  5 1993 Q1   433    5724    394   1450       39460   116
##  6 1993 Q2   421    6036    462   1668       41356   149
##  7 1993 Q3   410    6570    475   1648       42949   163
##  8 1993 Q4   512    5675    443   1863       40974   138
##  9 1994 Q1   449    5311    421   1468       40162   127
## 10 1994 Q2   381    5717    475   1755       41199   159
## # ℹ 64 more rows</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="time-series-graphics.html#cb101-1" tabindex="-1"></a>new_production <span class="sc">|&gt;</span></span>
<span id="cb101-2"><a href="time-series-graphics.html#cb101-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Beer) <span class="sc">+</span></span>
<span id="cb101-3"><a href="time-series-graphics.html#cb101-3" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-59-1.png" width="672" /></p>
<blockquote>
<p>Each graph shows <span class="math inline">\(y_t\)</span> plotted against <span class="math inline">\(y_{t−k}\)</span> for different values of <span class="math inline">\(k\)</span>.</p>
</blockquote>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="time-series-graphics.html#cb102-1" tabindex="-1"></a>new_production <span class="sc">|&gt;</span></span>
<span id="cb102-2"><a href="time-series-graphics.html#cb102-2" tabindex="-1"></a>  <span class="fu">gg_lag</span>(Beer, <span class="at">geom=</span><span class="st">&#39;point&#39;</span>) <span class="sc">+</span></span>
<span id="cb102-3"><a href="time-series-graphics.html#cb102-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;lag(Beer, k)&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-60-1.png" width="768" /></p>
<p>The relationship is strongly positive at lags 4 and 8, reflecting the strong seasonality in the data. The negative relationship seen for lags 2 and 6 occurs because peaks (in Q4) are plotted against troughs (in Q2)</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="time-series-graphics.html#cb103-1" tabindex="-1"></a>new_production <span class="sc">|&gt;</span></span>
<span id="cb103-2"><a href="time-series-graphics.html#cb103-2" tabindex="-1"></a>  <span class="fu">gg_lag</span>(Beer, <span class="at">geom=</span><span class="st">&#39;path&#39;</span>) <span class="sc">+</span></span>
<span id="cb103-3"><a href="time-series-graphics.html#cb103-3" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;lag(Beer, k)&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-61-1.png" width="768" /></p>
</div>
<div id="autocorrelation" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Autocorrelation<a href="time-series-graphics.html#autocorrelation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/acf.html">The source of the section</a></p>
<p>Autocorrelation measures the linear relationship between lagged values of a time series.</p>
<p>For example, <span class="math inline">\(r_1\)</span> measures the relationship between <span class="math inline">\(y_t\)</span> and <span class="math inline">\(y_{t−1}\)</span>, <span class="math inline">\(r_2\)</span> measures the relationship between <span class="math inline">\(y_t\)</span> and $y_{t−2}, and so on.</p>
<p><span class="math display">\[
ACF_1 = r_1 = Corr(y_t, y_{t-1}) \\
ACF_2 = r_2 = Corr(y_t, y_{t-2}) \\
... \\
ACF_k = r_k = Corr(y_t, y_{t-k})
\]</span></p>
<p>The value of <span class="math inline">\(r_k\)</span> can be written as</p>
<p>$$</p>
<p>r_k = {_{t=1}^T (y_t - {y})^2}</p>
<p>$$</p>
<p>where <span class="math inline">\(T\)</span> is the length of the time series. The autocorrelation coefficients make up the autocorrelation function or ACF.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="time-series-graphics.html#cb104-1" tabindex="-1"></a>new_production <span class="sc">|&gt;</span></span>
<span id="cb104-2"><a href="time-series-graphics.html#cb104-2" tabindex="-1"></a>  <span class="fu">ACF</span>(Beer, <span class="at">lag_max =</span> <span class="dv">9</span>)</span></code></pre></div>
<pre><code>## # A tsibble: 9 x 2 [1Q]
##        lag     acf
##   &lt;cf_lag&gt;   &lt;dbl&gt;
## 1       1Q -0.102 
## 2       2Q -0.657 
## 3       3Q -0.0603
## 4       4Q  0.869 
## 5       5Q -0.0892
## 6       6Q -0.635 
## 7       7Q -0.0542
## 8       8Q  0.832 
## 9       9Q -0.108</code></pre>
<p>Build correlogram.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="time-series-graphics.html#cb106-1" tabindex="-1"></a>new_production <span class="sc">|&gt;</span></span>
<span id="cb106-2"><a href="time-series-graphics.html#cb106-2" tabindex="-1"></a>  <span class="fu">ACF</span>(Beer) <span class="sc">|&gt;</span></span>
<span id="cb106-3"><a href="time-series-graphics.html#cb106-3" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Australian beer production&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-63-1.png" width="672" /></p>
<p>Interpretaion:</p>
<ul>
<li><span class="math inline">\(r_4\)</span> is higher than for the other lags. This is due to the seasonal pattern in the data: the peaks tend to be four quarters apart and the troughs tend to be four quarters apart.</li>
<li><span class="math inline">\(r_2\)</span> is more negative than for the other lags because troughs tend to be two quarters behind peaks.</li>
<li>The dashed blue lines indicate whether the correlations are significantly different from zero.</li>
</ul>
<div id="trend-and-seasonality-in-acf-plots" class="section level3 hasAnchor" number="2.8.1">
<h3><span class="header-section-number">2.8.1</span> Trend and seasonality in ACF plots<a href="time-series-graphics.html#trend-and-seasonality-in-acf-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Trend:</strong> Indicated by a slow decay in autocorrelations over increasing lags, suggesting a persistent pattern. ACF values decrease gradually without sharp drops.</p>
<p><strong>Seasonality:</strong> Shown by regular spikes at consistent intervals (lags), reflecting repeating cycles. For example, monthly data with yearly seasonality will spike at lag 12, 24, etc.</p>
<blockquote>
<p>When data are both trended and seasonal, you see a combination of these effects.</p>
</blockquote>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="time-series-graphics.html#cb107-1" tabindex="-1"></a>a10 <span class="sc">|&gt;</span></span>
<span id="cb107-2"><a href="time-series-graphics.html#cb107-2" tabindex="-1"></a>  <span class="fu">ACF</span>(Cost, <span class="at">lag_max =</span> <span class="dv">48</span>) <span class="sc">|&gt;</span></span>
<span id="cb107-3"><a href="time-series-graphics.html#cb107-3" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span></span>
<span id="cb107-4"><a href="time-series-graphics.html#cb107-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Australian antidiabetic drug sales&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-64-1.png" width="672" /></p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="time-series-graphics.html#cb108-1" tabindex="-1"></a>retail <span class="ot">&lt;-</span> us_employment <span class="sc">|&gt;</span></span>
<span id="cb108-2"><a href="time-series-graphics.html#cb108-2" tabindex="-1"></a>  <span class="fu">filter</span>(Title <span class="sc">==</span> <span class="st">&#39;Retail Trade&#39;</span>, <span class="fu">year</span>(Month) <span class="sc">&gt;=</span> <span class="dv">1980</span>) </span>
<span id="cb108-3"><a href="time-series-graphics.html#cb108-3" tabindex="-1"></a></span>
<span id="cb108-4"><a href="time-series-graphics.html#cb108-4" tabindex="-1"></a>retail <span class="sc">|&gt;</span></span>
<span id="cb108-5"><a href="time-series-graphics.html#cb108-5" tabindex="-1"></a>  <span class="fu">autoplot</span>(Employed)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-65-1.png" width="672" /></p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="time-series-graphics.html#cb109-1" tabindex="-1"></a>retail <span class="sc">|&gt;</span></span>
<span id="cb109-2"><a href="time-series-graphics.html#cb109-2" tabindex="-1"></a>  <span class="fu">ACF</span>(Employed, <span class="at">lag_max =</span> <span class="dv">48</span>) <span class="sc">|&gt;</span></span>
<span id="cb109-3"><a href="time-series-graphics.html#cb109-3" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-66-1.png" width="672" /></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="time-series-graphics.html#cb110-1" tabindex="-1"></a>google_2015 <span class="ot">&lt;-</span> gafa_stock <span class="sc">|&gt;</span></span>
<span id="cb110-2"><a href="time-series-graphics.html#cb110-2" tabindex="-1"></a>  <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">&#39;GOOG&#39;</span>, <span class="fu">year</span>(Date) <span class="sc">==</span> <span class="dv">2015</span>) <span class="sc">|&gt;</span></span>
<span id="cb110-3"><a href="time-series-graphics.html#cb110-3" tabindex="-1"></a>  <span class="fu">select</span>(Date, Close)</span>
<span id="cb110-4"><a href="time-series-graphics.html#cb110-4" tabindex="-1"></a></span>
<span id="cb110-5"><a href="time-series-graphics.html#cb110-5" tabindex="-1"></a>google_2015</span></code></pre></div>
<pre><code>## # A tsibble: 252 x 2 [!]
##    Date       Close
##    &lt;date&gt;     &lt;dbl&gt;
##  1 2015-01-02  522.
##  2 2015-01-05  511.
##  3 2015-01-06  499.
##  4 2015-01-07  498.
##  5 2015-01-08  500.
##  6 2015-01-09  493.
##  7 2015-01-12  490.
##  8 2015-01-13  493.
##  9 2015-01-14  498.
## 10 2015-01-15  499.
## # ℹ 242 more rows</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="time-series-graphics.html#cb112-1" tabindex="-1"></a>google_2015 <span class="sc">|&gt;</span></span>
<span id="cb112-2"><a href="time-series-graphics.html#cb112-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Close)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-68-1.png" width="672" /></p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="time-series-graphics.html#cb113-1" tabindex="-1"></a>google_2015 <span class="sc">|&gt;</span></span>
<span id="cb113-2"><a href="time-series-graphics.html#cb113-2" tabindex="-1"></a>  <span class="fu">ACF</span>(Close, <span class="at">lag_max =</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb113-3"><a href="time-series-graphics.html#cb113-3" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span></code></pre></div>
<pre><code>## Warning: Provided data has an irregular interval, results should be treated with caution. Computing ACF by observation.</code></pre>
<p><img src="figure_html/ch02-ts-plots-69-1.png" width="672" /></p>
</div>
</div>
<div id="white-moise" class="section level2 hasAnchor" number="2.9">
<h2><span class="header-section-number">2.9</span> White moise<a href="time-series-graphics.html#white-moise" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://otexts.com/fpp3/wn.html">The source of the section</a></p>
<blockquote>
<p>Time series that show no autocorrelation are called white noise.</p>
</blockquote>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="time-series-graphics.html#cb115-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">30</span>)</span>
<span id="cb115-2"><a href="time-series-graphics.html#cb115-2" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">tsibble</span>(<span class="at">sample =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>,</span>
<span id="cb115-3"><a href="time-series-graphics.html#cb115-3" tabindex="-1"></a>             <span class="at">wn =</span> <span class="fu">rnorm</span>(<span class="dv">50</span>),</span>
<span id="cb115-4"><a href="time-series-graphics.html#cb115-4" tabindex="-1"></a>             <span class="at">index =</span> sample)</span>
<span id="cb115-5"><a href="time-series-graphics.html#cb115-5" tabindex="-1"></a></span>
<span id="cb115-6"><a href="time-series-graphics.html#cb115-6" tabindex="-1"></a>y <span class="sc">|&gt;</span> </span>
<span id="cb115-7"><a href="time-series-graphics.html#cb115-7" tabindex="-1"></a>  <span class="fu">autoplot</span>(wn) <span class="sc">+</span></span>
<span id="cb115-8"><a href="time-series-graphics.html#cb115-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;White noise&#39;</span>, <span class="at">y =</span> <span class="st">&#39;&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-70-1.png" width="672" /></p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="time-series-graphics.html#cb116-1" tabindex="-1"></a>y <span class="sc">|&gt;</span></span>
<span id="cb116-2"><a href="time-series-graphics.html#cb116-2" tabindex="-1"></a>  <span class="fu">ACF</span>(wn) <span class="sc">|&gt;</span></span>
<span id="cb116-3"><a href="time-series-graphics.html#cb116-3" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span></span>
<span id="cb116-4"><a href="time-series-graphics.html#cb116-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;White noise&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-71-1.png" width="672" /></p>
<blockquote>
<p>For white noise series, we expect each autocorrelation to be close to zero. For a white noise series, we expect 95% of the spikes in the ACF to lie within <span class="math inline">\(\pm 1.96/\sqrt{T}\)</span>, where <span class="math inline">\(T\)</span> is the length of the time series.</p>
</blockquote>
<blockquote>
<p>If one or more large spikes are outside these bounds, or if substantially more than 5% of spikes are outside these bounds, then the series is probably not white noise.</p>
</blockquote>
</div>
<div id="excercises-1" class="section level2 hasAnchor" number="2.10">
<h2><span class="header-section-number">2.10</span> Excercises<a href="time-series-graphics.html#excercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li></li>
</ol>
<ul>
<li><code>Bricks</code> from <code>aus_production</code></li>
</ul>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="time-series-graphics.html#cb117-1" tabindex="-1"></a>?aus_production</span>
<span id="cb117-2"><a href="time-series-graphics.html#cb117-2" tabindex="-1"></a><span class="co"># Quarterly estimates of selected indicators of manufacturing production in Australia.</span></span>
<span id="cb117-3"><a href="time-series-graphics.html#cb117-3" tabindex="-1"></a><span class="co"># Bricks:   Clay brick production in millions of bricks.</span></span>
<span id="cb117-4"><a href="time-series-graphics.html#cb117-4" tabindex="-1"></a></span>
<span id="cb117-5"><a href="time-series-graphics.html#cb117-5" tabindex="-1"></a>aus_production</span></code></pre></div>
<pre><code>## # A tsibble: 218 x 7 [1Q]
##    Quarter  Beer Tobacco Bricks Cement Electricity   Gas
##      &lt;qtr&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;
##  1 1956 Q1   284    5225    189    465        3923     5
##  2 1956 Q2   213    5178    204    532        4436     6
##  3 1956 Q3   227    5297    208    561        4806     7
##  4 1956 Q4   308    5681    197    570        4418     6
##  5 1957 Q1   262    5577    187    529        4339     5
##  6 1957 Q2   228    5651    214    604        4811     7
##  7 1957 Q3   236    5317    227    603        5259     7
##  8 1957 Q4   320    6152    222    582        4735     6
##  9 1958 Q1   272    5758    199    554        4608     5
## 10 1958 Q2   233    5641    229    620        5196     7
## # ℹ 208 more rows</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="time-series-graphics.html#cb119-1" tabindex="-1"></a><span class="co"># What is the time interval: Quarter</span></span>
<span id="cb119-2"><a href="time-series-graphics.html#cb119-2" tabindex="-1"></a></span>
<span id="cb119-3"><a href="time-series-graphics.html#cb119-3" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span></span>
<span id="cb119-4"><a href="time-series-graphics.html#cb119-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(Bricks) <span class="sc">+</span></span>
<span id="cb119-5"><a href="time-series-graphics.html#cb119-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Bricks (million)&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Quarterly production of bricks (million) in Australia&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-72-1.png" width="672" /></p>
<ul>
<li><code>Lynx</code> from <code>pelt</code></li>
</ul>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="time-series-graphics.html#cb120-1" tabindex="-1"></a>?pelt</span>
<span id="cb120-2"><a href="time-series-graphics.html#cb120-2" tabindex="-1"></a><span class="co"># Hudson Bay Company trading records for Snowshoe Hare and Canadian Lynx furs from 1845 to 1935. This data contains trade records for all areas of the company.</span></span>
<span id="cb120-3"><a href="time-series-graphics.html#cb120-3" tabindex="-1"></a><span class="co"># Lynx: The number of Canadian Lynx pelts traded.</span></span>
<span id="cb120-4"><a href="time-series-graphics.html#cb120-4" tabindex="-1"></a></span>
<span id="cb120-5"><a href="time-series-graphics.html#cb120-5" tabindex="-1"></a>pelt</span></code></pre></div>
<pre><code>## # A tsibble: 91 x 3 [1Y]
##     Year  Hare  Lynx
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  1845 19580 30090
##  2  1846 19600 45150
##  3  1847 19610 49150
##  4  1848 11990 39520
##  5  1849 28040 21230
##  6  1850 58000  8420
##  7  1851 74600  5560
##  8  1852 75090  5080
##  9  1853 88480 10170
## 10  1854 61280 19600
## # ℹ 81 more rows</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="time-series-graphics.html#cb122-1" tabindex="-1"></a><span class="co"># What is the time interval: Year</span></span>
<span id="cb122-2"><a href="time-series-graphics.html#cb122-2" tabindex="-1"></a></span>
<span id="cb122-3"><a href="time-series-graphics.html#cb122-3" tabindex="-1"></a>pelt <span class="sc">|&gt;</span></span>
<span id="cb122-4"><a href="time-series-graphics.html#cb122-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(Lynx) <span class="sc">+</span></span>
<span id="cb122-5"><a href="time-series-graphics.html#cb122-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Number of Lynx&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Annual trading of Lynx&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-73-1.png" width="672" /></p>
<ul>
<li><code>Close</code> from <code>gafa_stock</code></li>
</ul>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="time-series-graphics.html#cb123-1" tabindex="-1"></a>?gafa_stock</span>
<span id="cb123-2"><a href="time-series-graphics.html#cb123-2" tabindex="-1"></a><span class="co"># Historical stock prices from 2014-2018 for Google, Amazon, Facebook and Apple. All prices are in $USD.</span></span>
<span id="cb123-3"><a href="time-series-graphics.html#cb123-3" tabindex="-1"></a><span class="co"># Close:    The closing price for the stock.</span></span>
<span id="cb123-4"><a href="time-series-graphics.html#cb123-4" tabindex="-1"></a></span>
<span id="cb123-5"><a href="time-series-graphics.html#cb123-5" tabindex="-1"></a>gafa_stock</span></code></pre></div>
<pre><code>## # A tsibble: 5,032 x 8 [!]
## # Key:       Symbol [4]
##    Symbol Date        Open  High   Low Close Adj_Close    Volume
##    &lt;chr&gt;  &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1 AAPL   2014-01-02  79.4  79.6  78.9  79.0      67.0  58671200
##  2 AAPL   2014-01-03  79.0  79.1  77.2  77.3      65.5  98116900
##  3 AAPL   2014-01-06  76.8  78.1  76.2  77.7      65.9 103152700
##  4 AAPL   2014-01-07  77.8  78.0  76.8  77.1      65.4  79302300
##  5 AAPL   2014-01-08  77.0  77.9  77.0  77.6      65.8  64632400
##  6 AAPL   2014-01-09  78.1  78.1  76.5  76.6      65.0  69787200
##  7 AAPL   2014-01-10  77.1  77.3  75.9  76.1      64.5  76244000
##  8 AAPL   2014-01-13  75.7  77.5  75.7  76.5      64.9  94623200
##  9 AAPL   2014-01-14  76.9  78.1  76.8  78.1      66.1  83140400
## 10 AAPL   2014-01-15  79.1  80.0  78.8  79.6      67.5  97909700
## # ℹ 5,022 more rows</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="time-series-graphics.html#cb125-1" tabindex="-1"></a><span class="co"># What is the time interval: Trading days</span></span>
<span id="cb125-2"><a href="time-series-graphics.html#cb125-2" tabindex="-1"></a></span>
<span id="cb125-3"><a href="time-series-graphics.html#cb125-3" tabindex="-1"></a>gafa_stock <span class="sc">|&gt;</span></span>
<span id="cb125-4"><a href="time-series-graphics.html#cb125-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(Close) <span class="sc">+</span></span>
<span id="cb125-5"><a href="time-series-graphics.html#cb125-5" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(Symbol), <span class="at">scale =</span> <span class="st">&#39;free_y&#39;</span>) <span class="sc">+</span></span>
<span id="cb125-6"><a href="time-series-graphics.html#cb125-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;$USD&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Historical stock prices from 2014-2018&#39;</span>,</span>
<span id="cb125-7"><a href="time-series-graphics.html#cb125-7" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Google, Amazon, Facebook and Apple&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-74-1.png" width="672" /></p>
<ul>
<li><code>Demand</code> from <code>vic_elec</code></li>
</ul>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="time-series-graphics.html#cb126-1" tabindex="-1"></a>?vic_elec</span>
<span id="cb126-2"><a href="time-series-graphics.html#cb126-2" tabindex="-1"></a><span class="co"># vic_elec is a half-hourly tsibble with three values:</span></span>
<span id="cb126-3"><a href="time-series-graphics.html#cb126-3" tabindex="-1"></a><span class="co"># Demand:   Total electricity demand in MWh.</span></span>
<span id="cb126-4"><a href="time-series-graphics.html#cb126-4" tabindex="-1"></a></span>
<span id="cb126-5"><a href="time-series-graphics.html#cb126-5" tabindex="-1"></a>vic_elec</span></code></pre></div>
<pre><code>## # A tsibble: 52,608 x 5 [30m] &lt;Australia/Melbourne&gt;
##    Time                Demand Temperature Date       Holiday
##    &lt;dttm&gt;               &lt;dbl&gt;       &lt;dbl&gt; &lt;date&gt;     &lt;lgl&gt;  
##  1 2012-01-01 00:00:00  4383.        21.4 2012-01-01 TRUE   
##  2 2012-01-01 00:30:00  4263.        21.0 2012-01-01 TRUE   
##  3 2012-01-01 01:00:00  4049.        20.7 2012-01-01 TRUE   
##  4 2012-01-01 01:30:00  3878.        20.6 2012-01-01 TRUE   
##  5 2012-01-01 02:00:00  4036.        20.4 2012-01-01 TRUE   
##  6 2012-01-01 02:30:00  3866.        20.2 2012-01-01 TRUE   
##  7 2012-01-01 03:00:00  3694.        20.1 2012-01-01 TRUE   
##  8 2012-01-01 03:30:00  3562.        19.6 2012-01-01 TRUE   
##  9 2012-01-01 04:00:00  3433.        19.1 2012-01-01 TRUE   
## 10 2012-01-01 04:30:00  3359.        19.0 2012-01-01 TRUE   
## # ℹ 52,598 more rows</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="time-series-graphics.html#cb128-1" tabindex="-1"></a><span class="co"># What is the time interval: 30 m</span></span>
<span id="cb128-2"><a href="time-series-graphics.html#cb128-2" tabindex="-1"></a></span>
<span id="cb128-3"><a href="time-series-graphics.html#cb128-3" tabindex="-1"></a>vic_elec <span class="sc">|&gt;</span></span>
<span id="cb128-4"><a href="time-series-graphics.html#cb128-4" tabindex="-1"></a>  <span class="fu">autoplot</span>(Demand) <span class="sc">+</span></span>
<span id="cb128-5"><a href="time-series-graphics.html#cb128-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Demand (MWh)&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Total electricity demand&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-75-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="time-series-graphics.html#cb129-1" tabindex="-1"></a>peak_stock <span class="ot">&lt;-</span> gafa_stock <span class="sc">|&gt;</span></span>
<span id="cb129-2"><a href="time-series-graphics.html#cb129-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Symbol) <span class="sc">|&gt;</span></span>
<span id="cb129-3"><a href="time-series-graphics.html#cb129-3" tabindex="-1"></a>  <span class="fu">filter</span>(Close <span class="sc">==</span> <span class="fu">max</span>(Close)) <span class="sc">|&gt;</span></span>
<span id="cb129-4"><a href="time-series-graphics.html#cb129-4" tabindex="-1"></a>  <span class="fu">select</span>(Close) <span class="sc">|&gt;</span></span>
<span id="cb129-5"><a href="time-series-graphics.html#cb129-5" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<pre><code>## Adding missing grouping variables: `Symbol`</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="time-series-graphics.html#cb131-1" tabindex="-1"></a>peak_stock</span></code></pre></div>
<pre><code>## # A tsibble: 4 x 3 [!]
## # Key:       Symbol [4]
##   Symbol Close Date      
##   &lt;chr&gt;  &lt;dbl&gt; &lt;date&gt;    
## 1 AAPL    232. 2018-10-03
## 2 AMZN   2040. 2018-09-04
## 3 FB      218. 2018-07-25
## 4 GOOG   1268. 2018-07-26</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="time-series-graphics.html#cb133-1" tabindex="-1"></a>gafa_stock <span class="sc">|&gt;</span></span>
<span id="cb133-2"><a href="time-series-graphics.html#cb133-2" tabindex="-1"></a>  <span class="fu">autoplot</span>(Close) <span class="sc">+</span> </span>
<span id="cb133-3"><a href="time-series-graphics.html#cb133-3" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">data=</span>peak_stock, <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">xintercept=</span>Date), <span class="at">color =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb133-4"><a href="time-series-graphics.html#cb133-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>peak_stock, <span class="at">mapping=</span><span class="fu">aes</span>(<span class="at">x=</span>Date, <span class="at">y=</span>Close), <span class="at">color =</span> <span class="st">&#39;red&#39;</span>) <span class="sc">+</span></span>
<span id="cb133-5"><a href="time-series-graphics.html#cb133-5" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(Symbol), <span class="at">scale =</span> <span class="st">&#39;free_y&#39;</span>) <span class="sc">+</span></span>
<span id="cb133-6"><a href="time-series-graphics.html#cb133-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;$USD&#39;</span>, <span class="at">title =</span> <span class="st">&#39;Historical stock prices from 2014-2018&#39;</span>,</span>
<span id="cb133-7"><a href="time-series-graphics.html#cb133-7" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;Google, Amazon, Facebook and Apple&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-77-1.png" width="672" /></p>
<ol start="3" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="time-series-graphics.html#cb134-1" tabindex="-1"></a><span class="co"># a.</span></span>
<span id="cb134-2"><a href="time-series-graphics.html#cb134-2" tabindex="-1"></a>tute <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&#39;https://bit.ly/fpptute1&#39;</span>)</span>
<span id="cb134-3"><a href="time-series-graphics.html#cb134-3" tabindex="-1"></a>tute</span></code></pre></div>
<pre><code>##        Quarter  Sales AdBudget   GDP
## 1   1981-03-01 1020.2    659.2 251.8
## 2   1981-06-01  889.2    589.0 290.9
## 3   1981-09-01  795.0    512.5 290.8
## 4   1981-12-01 1003.9    614.1 292.4
## 5   1982-03-01 1057.7    647.2 279.1
## 6   1982-06-01  944.4    602.0 254.0
## 7   1982-09-01  778.5    530.7 295.6
## 8   1982-12-01  932.5    608.4 271.7
## 9   1983-03-01  996.5    637.9 259.6
## 10  1983-06-01  907.7    582.4 280.5
## 11  1983-09-01  735.1    506.8 287.2
## 12  1983-12-01  958.1    606.7 278.0
## 13  1984-03-01 1034.1    658.7 256.8
## 14  1984-06-01  992.8    614.9 271.0
## 15  1984-09-01  791.7    489.9 300.9
## 16  1984-12-01  914.2    586.5 289.8
## 17  1985-03-01 1106.5    663.0 266.8
## 18  1985-06-01  985.1    591.7 273.7
## 19  1985-09-01  823.9    502.2 301.3
## 20  1985-12-01 1025.1    616.4 285.6
## 21  1986-03-01 1064.7    647.1 270.6
## 22  1986-06-01  981.9    615.5 274.6
## 23  1986-09-01  828.3    514.8 299.7
## 24  1986-12-01  940.7    609.1 275.9
## 25  1987-03-01  991.1    641.3 279.3
## 26  1987-06-01 1021.2    620.2 290.8
## 27  1987-09-01  796.7    511.2 295.6
## 28  1987-12-01  986.6    621.3 271.9
## 29  1988-03-01 1054.2    645.3 267.4
## 30  1988-06-01 1018.7    616.0 281.0
## 31  1988-09-01  815.6    503.2 309.0
## 32  1988-12-01 1010.6    617.5 266.7
## 33  1989-03-01 1071.5    642.8 283.5
## 34  1989-06-01  954.0    585.6 282.3
## 35  1989-09-01  822.9    520.6 289.2
## 36  1989-12-01  867.5    608.6 270.7
## 37  1990-03-01 1002.3    645.7 266.5
## 38  1990-06-01  972.0    597.4 287.9
## 39  1990-09-01  782.9    499.8 287.6
## 40  1990-12-01  972.8    601.8 283.4
## 41  1991-03-01 1108.0    650.8 266.4
## 42  1991-06-01  943.7    588.3 292.3
## 43  1991-09-01  806.1    491.6 330.6
## 44  1991-12-01  954.2    603.3 286.2
## 45  1992-03-01 1115.5    663.2 259.2
## 46  1992-06-01  927.1    614.0 263.7
## 47  1992-09-01  800.7    506.3 288.2
## 48  1992-12-01  955.7    606.2 274.1
## 49  1993-03-01 1049.8    639.5 287.1
## 50  1993-06-01  886.0    585.9 285.5
## 51  1993-09-01  786.4    492.2 303.7
## 52  1993-12-01  991.3    610.4 275.6
## 53  1994-03-01 1113.9    660.8 249.3
## 54  1994-06-01  924.5    612.2 272.9
## 55  1994-09-01  771.4    509.2 289.8
## 56  1994-12-01  949.8    612.1 269.2
## 57  1995-03-01  990.5    653.2 261.3
## 58  1995-06-01 1071.4    605.3 292.9
## 59  1995-09-01  854.1    506.6 304.6
## 60  1995-12-01  929.8    597.4 276.3
## 61  1996-03-01  959.6    635.2 268.2
## 62  1996-06-01  991.1    611.6 293.5
## 63  1996-09-01  832.9    503.8 311.1
## 64  1996-12-01 1006.1    609.9 273.7
## 65  1997-03-01 1040.7    645.2 267.5
## 66  1997-06-01 1026.3    609.8 271.9
## 67  1997-09-01  785.9    512.1 308.8
## 68  1997-12-01  997.6    603.7 282.9
## 69  1998-03-01 1055.0    639.4 268.4
## 70  1998-06-01  925.6    601.6 271.4
## 71  1998-09-01  805.6    497.0 292.1
## 72  1998-12-01  934.1    602.8 287.6
## 73  1999-03-01 1081.7    647.3 258.0
## 74  1999-06-01 1062.3    612.5 282.9
## 75  1999-09-01  798.8    492.2 295.0
## 76  1999-12-01 1014.3    610.8 271.2
## 77  2000-03-01 1049.5    646.5 275.4
## 78  2000-06-01  961.7    603.3 284.0
## 79  2000-09-01  793.4    503.8 300.9
## 80  2000-12-01  872.3    598.3 277.4
## 81  2001-03-01 1014.2    649.4 273.8
## 82  2001-06-01  952.6    620.2 288.4
## 83  2001-09-01  792.4    497.9 283.4
## 84  2001-12-01  922.3    609.2 273.4
## 85  2002-03-01 1055.9    665.9 271.5
## 86  2002-06-01  906.2    600.4 283.6
## 87  2002-09-01  811.2    502.3 290.6
## 88  2002-12-01 1005.8    605.6 289.1
## 89  2003-03-01 1013.8    647.6 282.2
## 90  2003-06-01  905.6    583.5 285.6
## 91  2003-09-01  957.3    502.5 304.0
## 92  2003-12-01 1059.5    625.9 271.5
## 93  2004-03-01 1090.6    648.7 263.9
## 94  2004-06-01  998.9    610.7 288.3
## 95  2004-09-01  866.6    519.1 290.2
## 96  2004-12-01 1018.7    634.9 284.0
## 97  2005-03-01 1112.5    663.1 270.9
## 98  2005-06-01  997.4    583.3 294.7
## 99  2005-09-01  826.8    508.6 292.2
## 100 2005-12-01  992.6    634.2 255.1</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="time-series-graphics.html#cb136-1" tabindex="-1"></a><span class="fu">str</span>(tute)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    100 obs. of  4 variables:
##  $ Quarter : IDate, format: &quot;1981-03-01&quot; &quot;1981-06-01&quot; &quot;1981-09-01&quot; &quot;1981-12-01&quot; ...
##  $ Sales   : num  1020 889 795 1004 1058 ...
##  $ AdBudget: num  659 589 512 614 647 ...
##  $ GDP     : num  252 291 291 292 279 ...</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="time-series-graphics.html#cb138-1" tabindex="-1"></a><span class="co"># b.</span></span>
<span id="cb138-2"><a href="time-series-graphics.html#cb138-2" tabindex="-1"></a>tute <span class="sc">|&gt;</span></span>
<span id="cb138-3"><a href="time-series-graphics.html#cb138-3" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">Quarter =</span> <span class="fu">yearquarter</span>(Quarter)) <span class="sc">|&gt;</span></span>
<span id="cb138-4"><a href="time-series-graphics.html#cb138-4" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> Quarter)</span></code></pre></div>
<pre><code>## # A tsibble: 100 x 4 [1Q]
##    Quarter Sales AdBudget   GDP
##      &lt;qtr&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 1981 Q1 1020.     659.  252.
##  2 1981 Q2  889.     589   291.
##  3 1981 Q3  795      512.  291.
##  4 1981 Q4 1004.     614.  292.
##  5 1982 Q1 1058.     647.  279.
##  6 1982 Q2  944.     602   254 
##  7 1982 Q3  778.     531.  296.
##  8 1982 Q4  932.     608.  272.
##  9 1983 Q1  996.     638.  260.
## 10 1983 Q2  908.     582.  280.
## # ℹ 90 more rows</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="time-series-graphics.html#cb140-1" tabindex="-1"></a><span class="co"># c.</span></span>
<span id="cb140-2"><a href="time-series-graphics.html#cb140-2" tabindex="-1"></a></span>
<span id="cb140-3"><a href="time-series-graphics.html#cb140-3" tabindex="-1"></a>tute <span class="sc">|&gt;</span></span>
<span id="cb140-4"><a href="time-series-graphics.html#cb140-4" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">Quarter =</span> <span class="fu">yearquarter</span>(Quarter)) <span class="sc">|&gt;</span></span>
<span id="cb140-5"><a href="time-series-graphics.html#cb140-5" tabindex="-1"></a>   <span class="fu">as_tsibble</span>(<span class="at">index =</span> Quarter) <span class="sc">|&gt;</span></span>
<span id="cb140-6"><a href="time-series-graphics.html#cb140-6" tabindex="-1"></a>   <span class="fu">pivot_longer</span>(<span class="sc">-</span>Quarter) <span class="sc">|&gt;</span></span>
<span id="cb140-7"><a href="time-series-graphics.html#cb140-7" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Quarter, <span class="at">y =</span> value, <span class="at">color =</span> name)) <span class="sc">+</span></span>
<span id="cb140-8"><a href="time-series-graphics.html#cb140-8" tabindex="-1"></a>      <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-78-1.png" width="672" /></p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="time-series-graphics.html#cb141-1" tabindex="-1"></a>tute <span class="sc">|&gt;</span></span>
<span id="cb141-2"><a href="time-series-graphics.html#cb141-2" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">Quarter =</span> <span class="fu">yearquarter</span>(Quarter)) <span class="sc">|&gt;</span></span>
<span id="cb141-3"><a href="time-series-graphics.html#cb141-3" tabindex="-1"></a>   <span class="fu">as_tsibble</span>(<span class="at">index =</span> Quarter) <span class="sc">|&gt;</span></span>
<span id="cb141-4"><a href="time-series-graphics.html#cb141-4" tabindex="-1"></a>   <span class="fu">pivot_longer</span>(<span class="sc">-</span>Quarter) <span class="sc">|&gt;</span></span>
<span id="cb141-5"><a href="time-series-graphics.html#cb141-5" tabindex="-1"></a>   <span class="fu">autoplot</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `.vars = value`</code></pre>
<p><img src="figure_html/ch02-ts-plots-78-2.png" width="672" /></p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="time-series-graphics.html#cb143-1" tabindex="-1"></a><span class="co"># split time series into different plots</span></span>
<span id="cb143-2"><a href="time-series-graphics.html#cb143-2" tabindex="-1"></a>tute <span class="sc">|&gt;</span></span>
<span id="cb143-3"><a href="time-series-graphics.html#cb143-3" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">Quarter =</span> <span class="fu">yearquarter</span>(Quarter)) <span class="sc">|&gt;</span></span>
<span id="cb143-4"><a href="time-series-graphics.html#cb143-4" tabindex="-1"></a>   <span class="fu">as_tsibble</span>(<span class="at">index =</span> Quarter) <span class="sc">|&gt;</span></span>
<span id="cb143-5"><a href="time-series-graphics.html#cb143-5" tabindex="-1"></a>   <span class="fu">pivot_longer</span>(<span class="sc">-</span>Quarter) <span class="sc">|&gt;</span></span>
<span id="cb143-6"><a href="time-series-graphics.html#cb143-6" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Quarter, <span class="at">y =</span> value, <span class="at">color =</span> name)) <span class="sc">+</span></span>
<span id="cb143-7"><a href="time-series-graphics.html#cb143-7" tabindex="-1"></a>      <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb143-8"><a href="time-series-graphics.html#cb143-8" tabindex="-1"></a>   <span class="fu">facet_grid</span>(name <span class="sc">~</span> ., <span class="at">scales =</span> <span class="st">&quot;free_y&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-78-3.png" width="672" /></p>
<ol start="4" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="time-series-graphics.html#cb144-1" tabindex="-1"></a><span class="co"># a.</span></span>
<span id="cb144-2"><a href="time-series-graphics.html#cb144-2" tabindex="-1"></a></span>
<span id="cb144-3"><a href="time-series-graphics.html#cb144-3" tabindex="-1"></a><span class="co"># load library</span></span>
<span id="cb144-4"><a href="time-series-graphics.html#cb144-4" tabindex="-1"></a><span class="fu">library</span>(USgas)</span>
<span id="cb144-5"><a href="time-series-graphics.html#cb144-5" tabindex="-1"></a></span>
<span id="cb144-6"><a href="time-series-graphics.html#cb144-6" tabindex="-1"></a>?us_total</span>
<span id="cb144-7"><a href="time-series-graphics.html#cb144-7" tabindex="-1"></a></span>
<span id="cb144-8"><a href="time-series-graphics.html#cb144-8" tabindex="-1"></a><span class="co"># b.</span></span>
<span id="cb144-9"><a href="time-series-graphics.html#cb144-9" tabindex="-1"></a>us_total <span class="sc">|&gt;</span></span>
<span id="cb144-10"><a href="time-series-graphics.html#cb144-10" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> year, <span class="at">key =</span> <span class="fu">c</span>(state))</span></code></pre></div>
<pre><code>## # A tsibble: 1,266 x 3 [1Y]
## # Key:       state [53]
##     year state        y
##    &lt;int&gt; &lt;chr&gt;    &lt;int&gt;
##  1  1997 Alabama 324158
##  2  1998 Alabama 329134
##  3  1999 Alabama 337270
##  4  2000 Alabama 353614
##  5  2001 Alabama 332693
##  6  2002 Alabama 379343
##  7  2003 Alabama 350345
##  8  2004 Alabama 382367
##  9  2005 Alabama 353156
## 10  2006 Alabama 391093
## # ℹ 1,256 more rows</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="time-series-graphics.html#cb146-1" tabindex="-1"></a><span class="co"># c.</span></span>
<span id="cb146-2"><a href="time-series-graphics.html#cb146-2" tabindex="-1"></a>us_total <span class="sc">|&gt;</span></span>
<span id="cb146-3"><a href="time-series-graphics.html#cb146-3" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> year, <span class="at">key =</span> <span class="fu">c</span>(state)) <span class="sc">|&gt;</span></span>
<span id="cb146-4"><a href="time-series-graphics.html#cb146-4" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;Maine&#39;</span>, <span class="st">&#39;Vermont&#39;</span>, <span class="st">&#39;New Hampshire&#39;</span>, </span>
<span id="cb146-5"><a href="time-series-graphics.html#cb146-5" tabindex="-1"></a>                      <span class="st">&#39;Massachusetts&#39;</span>, <span class="st">&#39;Connecticut&#39;</span>, <span class="st">&#39;Rhode Island&#39;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb146-6"><a href="time-series-graphics.html#cb146-6" tabindex="-1"></a>  <span class="fu">autoplot</span>() <span class="sc">+</span></span>
<span id="cb146-7"><a href="time-series-graphics.html#cb146-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&#39;Volume (Million Cubic Feet)&#39;</span>,</span>
<span id="cb146-8"><a href="time-series-graphics.html#cb146-8" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Annual natural gas consumption&#39;</span>,</span>
<span id="cb146-9"><a href="time-series-graphics.html#cb146-9" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&#39;New England area&#39;</span>)</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `.vars = y`</code></pre>
<p><img src="figure_html/ch02-ts-plots-79-1.png" width="672" /></p>
<ol start="5" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="time-series-graphics.html#cb148-1" tabindex="-1"></a><span class="co"># a.</span></span>
<span id="cb148-2"><a href="time-series-graphics.html#cb148-2" tabindex="-1"></a>tourism<span class="fl">.5</span> <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">&#39;https://bit.ly/fpptourism&#39;</span>)</span>
<span id="cb148-3"><a href="time-series-graphics.html#cb148-3" tabindex="-1"></a></span>
<span id="cb148-4"><a href="time-series-graphics.html#cb148-4" tabindex="-1"></a><span class="co"># b.</span></span>
<span id="cb148-5"><a href="time-series-graphics.html#cb148-5" tabindex="-1"></a></span>
<span id="cb148-6"><a href="time-series-graphics.html#cb148-6" tabindex="-1"></a><span class="co"># tourism form tsibble package</span></span>
<span id="cb148-7"><a href="time-series-graphics.html#cb148-7" tabindex="-1"></a>tourism</span></code></pre></div>
<pre><code>## # A tsibble: 24,320 x 5 [1Q]
## # Key:       Region, State, Purpose [304]
##    Quarter Region   State Purpose  Trips
##      &lt;qtr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1 1998 Q1 Adelaide SA    Business  135.
##  2 1998 Q2 Adelaide SA    Business  110.
##  3 1998 Q3 Adelaide SA    Business  166.
##  4 1998 Q4 Adelaide SA    Business  127.
##  5 1999 Q1 Adelaide SA    Business  137.
##  6 1999 Q2 Adelaide SA    Business  200.
##  7 1999 Q3 Adelaide SA    Business  169.
##  8 1999 Q4 Adelaide SA    Business  134.
##  9 2000 Q1 Adelaide SA    Business  154.
## 10 2000 Q2 Adelaide SA    Business  169.
## # ℹ 24,310 more rows</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="time-series-graphics.html#cb150-1" tabindex="-1"></a><span class="co"># index = Quarter, keys = [Region, State, Purpose]</span></span>
<span id="cb150-2"><a href="time-series-graphics.html#cb150-2" tabindex="-1"></a></span>
<span id="cb150-3"><a href="time-series-graphics.html#cb150-3" tabindex="-1"></a>ts_tourims <span class="ot">&lt;-</span> tourism<span class="fl">.5</span> <span class="sc">|&gt;</span></span>
<span id="cb150-4"><a href="time-series-graphics.html#cb150-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Quarter =</span> <span class="fu">yearquarter</span>(Quarter)) <span class="sc">|&gt;</span></span>
<span id="cb150-5"><a href="time-series-graphics.html#cb150-5" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> Quarter,</span>
<span id="cb150-6"><a href="time-series-graphics.html#cb150-6" tabindex="-1"></a>             <span class="at">key =</span> <span class="fu">c</span>(<span class="st">&#39;Region&#39;</span>, <span class="st">&#39;State&#39;</span>, <span class="st">&#39;Purpose&#39;</span>))</span>
<span id="cb150-7"><a href="time-series-graphics.html#cb150-7" tabindex="-1"></a></span>
<span id="cb150-8"><a href="time-series-graphics.html#cb150-8" tabindex="-1"></a>ts_tourims</span></code></pre></div>
<pre><code>## # A tsibble: 24,320 x 5 [1Q]
## # Key:       Region, State, Purpose [304]
##    Quarter Region   State           Purpose  Trips
##      &lt;qtr&gt; &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;    &lt;dbl&gt;
##  1 1998 Q1 Adelaide South Australia Business  135.
##  2 1998 Q2 Adelaide South Australia Business  110.
##  3 1998 Q3 Adelaide South Australia Business  166.
##  4 1998 Q4 Adelaide South Australia Business  127.
##  5 1999 Q1 Adelaide South Australia Business  137.
##  6 1999 Q2 Adelaide South Australia Business  200.
##  7 1999 Q3 Adelaide South Australia Business  169.
##  8 1999 Q4 Adelaide South Australia Business  134.
##  9 2000 Q1 Adelaide South Australia Business  154.
## 10 2000 Q2 Adelaide South Australia Business  169.
## # ℹ 24,310 more rows</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="time-series-graphics.html#cb152-1" tabindex="-1"></a><span class="co"># c.</span></span>
<span id="cb152-2"><a href="time-series-graphics.html#cb152-2" tabindex="-1"></a>ts_tourims <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Region)</span></code></pre></div>
<pre><code>## # A tibble: 76 × 1
##    Region                    
##    &lt;chr&gt;                     
##  1 Adelaide                  
##  2 Adelaide Hills            
##  3 Alice Springs             
##  4 Australia&#39;s Coral Coast   
##  5 Australia&#39;s Golden Outback
##  6 Australia&#39;s North West    
##  7 Australia&#39;s South West    
##  8 Ballarat                  
##  9 Barkly                    
## 10 Barossa                   
## # ℹ 66 more rows</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="time-series-graphics.html#cb154-1" tabindex="-1"></a>ts_tourims <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Purpose)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 1
##   Purpose 
##   &lt;chr&gt;   
## 1 Business
## 2 Holiday 
## 3 Other   
## 4 Visiting</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="time-series-graphics.html#cb156-1" tabindex="-1"></a>ts_tourims <span class="sc">|&gt;</span></span>
<span id="cb156-2"><a href="time-series-graphics.html#cb156-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region, Purpose) <span class="sc">|&gt;</span></span>
<span id="cb156-3"><a href="time-series-graphics.html#cb156-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Trips =</span> <span class="fu">mean</span>(Trips)) <span class="sc">|&gt;</span></span>
<span id="cb156-4"><a href="time-series-graphics.html#cb156-4" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Trips)) <span class="sc">|&gt;</span></span>
<span id="cb156-5"><a href="time-series-graphics.html#cb156-5" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Warning: Current temporal ordering may yield unexpected results.
## ℹ Suggest to sort by `Region`, `Purpose`, `Quarter` first.</code></pre>
<pre><code>## # A tsibble: 76 x 4 [1Q]
## # Key:       Region, Purpose [76]
## # Groups:    Region [76]
##    Region                     Purpose  Quarter Trips
##    &lt;chr&gt;                      &lt;chr&gt;      &lt;qtr&gt; &lt;dbl&gt;
##  1 Adelaide                   Visiting 2017 Q1 270. 
##  2 Adelaide Hills             Visiting 2002 Q4  81.1
##  3 Alice Springs              Holiday  1998 Q3  76.5
##  4 Australia&#39;s Coral Coast    Holiday  2014 Q3 198. 
##  5 Australia&#39;s Golden Outback Business 2017 Q3 174. 
##  6 Australia&#39;s North West     Business 2016 Q3 297. 
##  7 Australia&#39;s South West     Holiday  2016 Q1 612. 
##  8 Ballarat                   Visiting 2004 Q1 103. 
##  9 Barkly                     Holiday  1998 Q3  37.9
## 10 Barossa                    Holiday  2006 Q1  51.0
## # ℹ 66 more rows</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="time-series-graphics.html#cb159-1" tabindex="-1"></a><span class="co">#d.</span></span>
<span id="cb159-2"><a href="time-series-graphics.html#cb159-2" tabindex="-1"></a>ts_tourims <span class="sc">|&gt;</span></span>
<span id="cb159-3"><a href="time-series-graphics.html#cb159-3" tabindex="-1"></a>  <span class="fu">group_by</span>(State) <span class="sc">|&gt;</span></span>
<span id="cb159-4"><a href="time-series-graphics.html#cb159-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_trips =</span> <span class="fu">sum</span>(Trips)) <span class="sc">|&gt;</span></span>
<span id="cb159-5"><a href="time-series-graphics.html#cb159-5" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> Quarter, <span class="at">key =</span> <span class="fu">c</span>(State))</span></code></pre></div>
<pre><code>## # A tsibble: 640 x 3 [1Q]
## # Key:       State [8]
##    State Quarter total_trips
##    &lt;chr&gt;   &lt;qtr&gt;       &lt;dbl&gt;
##  1 ACT   1998 Q1        551.
##  2 ACT   1998 Q2        416.
##  3 ACT   1998 Q3        436.
##  4 ACT   1998 Q4        450.
##  5 ACT   1999 Q1        379.
##  6 ACT   1999 Q2        558.
##  7 ACT   1999 Q3        449.
##  8 ACT   1999 Q4        595.
##  9 ACT   2000 Q1        600.
## 10 ACT   2000 Q2        557.
## # ℹ 630 more rows</code></pre>
<ol start="6" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="time-series-graphics.html#cb161-1" tabindex="-1"></a>?aus_arrivals</span>
<span id="cb161-2"><a href="time-series-graphics.html#cb161-2" tabindex="-1"></a>aus_arrivals</span></code></pre></div>
<pre><code>## # A tsibble: 508 x 3 [1Q]
## # Key:       Origin [4]
##    Quarter Origin Arrivals
##      &lt;qtr&gt; &lt;chr&gt;     &lt;int&gt;
##  1 1981 Q1 Japan     14763
##  2 1981 Q2 Japan      9321
##  3 1981 Q3 Japan     10166
##  4 1981 Q4 Japan     19509
##  5 1982 Q1 Japan     17117
##  6 1982 Q2 Japan     10617
##  7 1982 Q3 Japan     11737
##  8 1982 Q4 Japan     20961
##  9 1983 Q1 Japan     20671
## 10 1983 Q2 Japan     12235
## # ℹ 498 more rows</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="time-series-graphics.html#cb163-1" tabindex="-1"></a><span class="co"># autoplot()</span></span>
<span id="cb163-2"><a href="time-series-graphics.html#cb163-2" tabindex="-1"></a>aus_arrivals <span class="sc">|&gt;</span></span>
<span id="cb163-3"><a href="time-series-graphics.html#cb163-3" tabindex="-1"></a>  <span class="fu">autoplot</span>(Arrivals) <span class="sc">+</span></span>
<span id="cb163-4"><a href="time-series-graphics.html#cb163-4" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(Origin), <span class="at">scales =</span> <span class="st">&#39;free_y&#39;</span>) <span class="sc">+</span></span>
<span id="cb163-5"><a href="time-series-graphics.html#cb163-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Quarterly international arrivals to Australia&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-81-1.png" width="768" /></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="time-series-graphics.html#cb164-1" tabindex="-1"></a><span class="co"># gg_season()</span></span>
<span id="cb164-2"><a href="time-series-graphics.html#cb164-2" tabindex="-1"></a>aus_arrivals <span class="sc">|&gt;</span></span>
<span id="cb164-3"><a href="time-series-graphics.html#cb164-3" tabindex="-1"></a>  <span class="fu">gg_season</span>(Arrivals, <span class="at">labels =</span> <span class="st">&#39;both&#39;</span>) <span class="sc">+</span></span>
<span id="cb164-4"><a href="time-series-graphics.html#cb164-4" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">vars</span>(Origin), <span class="at">scales =</span> <span class="st">&#39;free_y&#39;</span>) <span class="sc">+</span></span>
<span id="cb164-5"><a href="time-series-graphics.html#cb164-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Seasonal international arrivals to Australia&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-81-2.png" width="768" /></p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="time-series-graphics.html#cb165-1" tabindex="-1"></a><span class="co"># gg_subseries()</span></span>
<span id="cb165-2"><a href="time-series-graphics.html#cb165-2" tabindex="-1"></a>aus_arrivals <span class="sc">|&gt;</span></span>
<span id="cb165-3"><a href="time-series-graphics.html#cb165-3" tabindex="-1"></a>  <span class="fu">gg_subseries</span>(Arrivals) <span class="sc">+</span></span>
<span id="cb165-4"><a href="time-series-graphics.html#cb165-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&#39;Quarterly international arrivals to Australia&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-81-3.png" width="768" /></p>
<ol start="7" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="time-series-graphics.html#cb166-1" tabindex="-1"></a>?aus_retail</span>
<span id="cb166-2"><a href="time-series-graphics.html#cb166-2" tabindex="-1"></a>aus_retail</span></code></pre></div>
<pre><code>## # A tsibble: 64,532 x 5 [1M]
## # Key:       State, Industry [152]
##    State                        Industry                                 `Series ID`    Month Turnover
##    &lt;chr&gt;                        &lt;chr&gt;                                    &lt;chr&gt;          &lt;mth&gt;    &lt;dbl&gt;
##  1 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Apr      4.4
##  2 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 May      3.4
##  3 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Jun      3.6
##  4 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Jul      4  
##  5 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Aug      3.6
##  6 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Sep      4.2
##  7 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Oct      4.8
##  8 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Nov      5.4
##  9 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1982 Dec      6.9
## 10 Australian Capital Territory Cafes, restaurants and catering services A3349849A   1983 Jan      3.8
## # ℹ 64,522 more rows</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="time-series-graphics.html#cb168-1" tabindex="-1"></a>myseries <span class="ot">&lt;-</span> aus_retail <span class="sc">|&gt;</span></span>
<span id="cb168-2"><a href="time-series-graphics.html#cb168-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Series ID</span><span class="st">`</span> <span class="sc">==</span> <span class="fu">sample</span>(aus_retail<span class="sc">$</span><span class="st">`</span><span class="at">Series ID</span><span class="st">`</span>,<span class="dv">1</span>))</span>
<span id="cb168-3"><a href="time-series-graphics.html#cb168-3" tabindex="-1"></a></span>
<span id="cb168-4"><a href="time-series-graphics.html#cb168-4" tabindex="-1"></a>myseries</span></code></pre></div>
<pre><code>## # A tsibble: 441 x 5 [1M]
## # Key:       State, Industry [1]
##    State    Industry                           `Series ID`    Month Turnover
##    &lt;chr&gt;    &lt;chr&gt;                              &lt;chr&gt;          &lt;mth&gt;    &lt;dbl&gt;
##  1 Victoria Other recreational goods retailing A3349415T   1982 Apr     15.6
##  2 Victoria Other recreational goods retailing A3349415T   1982 May     15.8
##  3 Victoria Other recreational goods retailing A3349415T   1982 Jun     15.2
##  4 Victoria Other recreational goods retailing A3349415T   1982 Jul     15.2
##  5 Victoria Other recreational goods retailing A3349415T   1982 Aug     14.5
##  6 Victoria Other recreational goods retailing A3349415T   1982 Sep     15.1
##  7 Victoria Other recreational goods retailing A3349415T   1982 Oct     16.3
##  8 Victoria Other recreational goods retailing A3349415T   1982 Nov     17.5
##  9 Victoria Other recreational goods retailing A3349415T   1982 Dec     21.5
## 10 Victoria Other recreational goods retailing A3349415T   1983 Jan     15.6
## # ℹ 431 more rows</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="time-series-graphics.html#cb170-1" tabindex="-1"></a>myseries <span class="sc">|&gt;</span></span>
<span id="cb170-2"><a href="time-series-graphics.html#cb170-2" tabindex="-1"></a>  <span class="fu">autoplot</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `.vars = Turnover`</code></pre>
<p><img src="figure_html/ch02-ts-plots-82-1.png" width="672" /></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="time-series-graphics.html#cb172-1" tabindex="-1"></a>myseries <span class="sc">|&gt;</span></span>
<span id="cb172-2"><a href="time-series-graphics.html#cb172-2" tabindex="-1"></a>  <span class="fu">gg_season</span>(<span class="at">labels =</span> <span class="st">&#39;both&#39;</span>)</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Turnover`</code></pre>
<p><img src="figure_html/ch02-ts-plots-82-2.png" width="672" /></p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="time-series-graphics.html#cb174-1" tabindex="-1"></a>myseries <span class="sc">|&gt;</span></span>
<span id="cb174-2"><a href="time-series-graphics.html#cb174-2" tabindex="-1"></a>  <span class="fu">gg_subseries</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Turnover`</code></pre>
<p><img src="figure_html/ch02-ts-plots-82-3.png" width="672" /></p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="time-series-graphics.html#cb176-1" tabindex="-1"></a>myseries <span class="sc">|&gt;</span></span>
<span id="cb176-2"><a href="time-series-graphics.html#cb176-2" tabindex="-1"></a>  <span class="fu">gg_lag</span>(<span class="at">geom =</span> <span class="st">&#39;point&#39;</span>)</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Turnover`</code></pre>
<p><img src="figure_html/ch02-ts-plots-82-4.png" width="672" /></p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="time-series-graphics.html#cb178-1" tabindex="-1"></a>myseries <span class="sc">|&gt;</span></span>
<span id="cb178-2"><a href="time-series-graphics.html#cb178-2" tabindex="-1"></a>  <span class="fu">gg_tsdisplay</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `y = Turnover`</code></pre>
<p><img src="figure_html/ch02-ts-plots-82-5.png" width="672" /></p>
<ol start="8" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="time-series-graphics.html#cb180-1" tabindex="-1"></a><span class="co"># “Total Private” Employed from us_employment</span></span>
<span id="cb180-2"><a href="time-series-graphics.html#cb180-2" tabindex="-1"></a>total_private <span class="ot">&lt;-</span> us_employment <span class="sc">|&gt;</span></span>
<span id="cb180-3"><a href="time-series-graphics.html#cb180-3" tabindex="-1"></a>  <span class="fu">filter</span>(Title <span class="sc">==</span> <span class="st">&#39;Total Private&#39;</span>)</span>
<span id="cb180-4"><a href="time-series-graphics.html#cb180-4" tabindex="-1"></a></span>
<span id="cb180-5"><a href="time-series-graphics.html#cb180-5" tabindex="-1"></a>total_private <span class="sc">|&gt;</span> <span class="fu">autoplot</span>(Employed)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-83-1.png" width="672" /></p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="time-series-graphics.html#cb181-1" tabindex="-1"></a>total_private <span class="sc">|&gt;</span> <span class="fu">gg_season</span>(Employed)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-83-2.png" width="672" /></p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="time-series-graphics.html#cb182-1" tabindex="-1"></a>total_private <span class="sc">|&gt;</span> <span class="fu">gg_subseries</span>(Employed)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-83-3.png" width="672" /></p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="time-series-graphics.html#cb183-1" tabindex="-1"></a>total_private <span class="sc">|&gt;</span> <span class="fu">gg_lag</span>(Employed)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-83-4.png" width="672" /></p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="time-series-graphics.html#cb184-1" tabindex="-1"></a>total_private <span class="sc">|&gt;</span> <span class="fu">ACF</span>(Employed) <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-83-5.png" width="672" /></p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="time-series-graphics.html#cb185-1" tabindex="-1"></a><span class="co"># Bricks from aus_production</span></span>
<span id="cb185-2"><a href="time-series-graphics.html#cb185-2" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span> <span class="fu">autoplot</span>(Bricks)</span></code></pre></div>
<pre><code>## Warning: Removed 20 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<p><img src="figure_html/ch02-ts-plots-84-1.png" width="672" /></p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="time-series-graphics.html#cb187-1" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span> <span class="fu">gg_season</span>(Bricks, <span class="at">labels =</span> <span class="st">&#39;both&#39;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 20 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<pre><code>## Warning: Removed 5 rows containing missing values or values outside the scale range (`geom_text()`).</code></pre>
<pre><code>## Warning: Removed 6 rows containing missing values or values outside the scale range (`geom_text()`).</code></pre>
<p><img src="figure_html/ch02-ts-plots-84-2.png" width="672" /></p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="time-series-graphics.html#cb191-1" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span> <span class="fu">gg_subseries</span>(Bricks)</span></code></pre></div>
<pre><code>## Warning: Removed 5 rows containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<p><img src="figure_html/ch02-ts-plots-84-3.png" width="672" /></p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="time-series-graphics.html#cb193-1" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span> <span class="fu">gg_lag</span>(Bricks)</span></code></pre></div>
<pre><code>## Warning: Removed 20 rows containing missing values (gg_lag).</code></pre>
<p><img src="figure_html/ch02-ts-plots-84-4.png" width="672" /></p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="time-series-graphics.html#cb195-1" tabindex="-1"></a>aus_production <span class="sc">|&gt;</span> <span class="fu">ACF</span>(Bricks) <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-84-5.png" width="672" /></p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="time-series-graphics.html#cb196-1" tabindex="-1"></a><span class="co"># Hare from pelt</span></span>
<span id="cb196-2"><a href="time-series-graphics.html#cb196-2" tabindex="-1"></a>pelt <span class="sc">|&gt;</span> <span class="fu">autoplot</span>(Hare)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-85-1.png" width="672" /></p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="time-series-graphics.html#cb197-1" tabindex="-1"></a><span class="co">#pelt |&gt; gg_season(Hare, labels = &quot;both&quot;)</span></span>
<span id="cb197-2"><a href="time-series-graphics.html#cb197-2" tabindex="-1"></a>pelt <span class="sc">|&gt;</span> <span class="fu">gg_subseries</span>(Hare)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-85-2.png" width="672" /></p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="time-series-graphics.html#cb198-1" tabindex="-1"></a>pelt <span class="sc">|&gt;</span> <span class="fu">gg_lag</span>(Hare)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-85-3.png" width="672" /></p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="time-series-graphics.html#cb199-1" tabindex="-1"></a>pelt <span class="sc">|&gt;</span> <span class="fu">ACF</span>(Hare) <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-85-4.png" width="672" /></p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="time-series-graphics.html#cb200-1" tabindex="-1"></a><span class="co"># “H02” Cost from PBS</span></span>
<span id="cb200-2"><a href="time-series-graphics.html#cb200-2" tabindex="-1"></a></span>
<span id="cb200-3"><a href="time-series-graphics.html#cb200-3" tabindex="-1"></a>h02 <span class="ot">&lt;-</span> PBS <span class="sc">|&gt;</span></span>
<span id="cb200-4"><a href="time-series-graphics.html#cb200-4" tabindex="-1"></a>  <span class="fu">filter</span>(ATC2 <span class="sc">==</span> <span class="st">&#39;H02&#39;</span>) <span class="sc">|&gt;</span></span>
<span id="cb200-5"><a href="time-series-graphics.html#cb200-5" tabindex="-1"></a>  <span class="fu">select</span>(Cost) <span class="sc">|&gt;</span></span>
<span id="cb200-6"><a href="time-series-graphics.html#cb200-6" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> Month, <span class="at">key =</span> <span class="fu">c</span>(<span class="st">&quot;Concession&quot;</span>, <span class="st">&quot;Type&quot;</span>, <span class="st">&quot;ATC1&quot;</span>, <span class="st">&quot;ATC2&quot;</span>))</span>
<span id="cb200-7"><a href="time-series-graphics.html#cb200-7" tabindex="-1"></a>  </span>
<span id="cb200-8"><a href="time-series-graphics.html#cb200-8" tabindex="-1"></a>h02 <span class="sc">|&gt;</span> <span class="fu">autoplot</span>(Cost) <span class="sc">+</span></span>
<span id="cb200-9"><a href="time-series-graphics.html#cb200-9" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Concession <span class="sc">~</span> Type) <span class="sc">+</span></span>
<span id="cb200-10"><a href="time-series-graphics.html#cb200-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-86-1.png" width="672" /></p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="time-series-graphics.html#cb201-1" tabindex="-1"></a>h02 <span class="sc">|&gt;</span> <span class="fu">gg_season</span>(Cost, <span class="at">labels =</span> <span class="st">&#39;both&#39;</span>) <span class="sc">+</span></span>
<span id="cb201-2"><a href="time-series-graphics.html#cb201-2" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Concession <span class="sc">~</span> Type)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-86-2.png" width="672" /></p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="time-series-graphics.html#cb202-1" tabindex="-1"></a>h02 <span class="sc">|&gt;</span> <span class="fu">gg_subseries</span>(Cost) <span class="sc">+</span></span>
<span id="cb202-2"><a href="time-series-graphics.html#cb202-2" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Concession <span class="sc">~</span> Type)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-86-3.png" width="672" /></p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="time-series-graphics.html#cb203-1" tabindex="-1"></a><span class="co"># h02 |&gt; gg_lag(Cost) +</span></span>
<span id="cb203-2"><a href="time-series-graphics.html#cb203-2" tabindex="-1"></a><span class="co">#   facet_grid(Concession ~ Type)</span></span>
<span id="cb203-3"><a href="time-series-graphics.html#cb203-3" tabindex="-1"></a></span>
<span id="cb203-4"><a href="time-series-graphics.html#cb203-4" tabindex="-1"></a>h02 <span class="sc">|&gt;</span> <span class="fu">ACF</span>(Cost) <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-86-4.png" width="672" /></p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="time-series-graphics.html#cb204-1" tabindex="-1"></a><span class="co"># Barrels from us_gasoline</span></span>
<span id="cb204-2"><a href="time-series-graphics.html#cb204-2" tabindex="-1"></a>us_gasoline <span class="sc">|&gt;</span> <span class="fu">autoplot</span>(Barrels)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-87-1.png" width="672" /></p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="time-series-graphics.html#cb205-1" tabindex="-1"></a>us_gasoline <span class="sc">|&gt;</span> <span class="fu">gg_season</span>(Barrels, <span class="at">labels =</span> <span class="st">&#39;both&#39;</span>)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-87-2.png" width="672" /></p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="time-series-graphics.html#cb206-1" tabindex="-1"></a>us_gasoline <span class="sc">|&gt;</span> <span class="fu">gg_subseries</span>(Barrels)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-87-3.png" width="672" /></p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="time-series-graphics.html#cb207-1" tabindex="-1"></a>us_gasoline <span class="sc">|&gt;</span> <span class="fu">gg_lag</span>(Barrels)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-87-4.png" width="672" /></p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="time-series-graphics.html#cb208-1" tabindex="-1"></a>us_gasoline <span class="sc">|&gt;</span> <span class="fu">ACF</span>(Barrels) <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-87-5.png" width="672" /></p>
<ol start="9" style="list-style-type: decimal">
<li></li>
</ol>
<p><img src="https://otexts.com/fpp3/fpp_files/figure-html/acfguess-1.png" alt="alt text" />
Source: <a href="https://otexts.com/fpp3/graphics-exercises.html">#9 in 2.10 Exercises section</a></p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="time-series-graphics.html#cb209-1" tabindex="-1"></a><span class="co"># 1 - B</span></span>
<span id="cb209-2"><a href="time-series-graphics.html#cb209-2" tabindex="-1"></a><span class="co"># 2 - A</span></span>
<span id="cb209-3"><a href="time-series-graphics.html#cb209-3" tabindex="-1"></a><span class="co"># 3 - D</span></span>
<span id="cb209-4"><a href="time-series-graphics.html#cb209-4" tabindex="-1"></a><span class="co"># 4 - C</span></span>
<span id="cb209-5"><a href="time-series-graphics.html#cb209-5" tabindex="-1"></a></span>
<span id="cb209-6"><a href="time-series-graphics.html#cb209-6" tabindex="-1"></a><span class="fu">library</span>(fma)</span>
<span id="cb209-7"><a href="time-series-graphics.html#cb209-7" tabindex="-1"></a><span class="co"># 1</span></span>
<span id="cb209-8"><a href="time-series-graphics.html#cb209-8" tabindex="-1"></a>cowtemp <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-88-1.png" width="672" /></p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="time-series-graphics.html#cb210-1" tabindex="-1"></a>cowtemp <span class="sc">|&gt;</span> <span class="fu">ggAcf</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-88-2.png" width="672" /></p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="time-series-graphics.html#cb211-1" tabindex="-1"></a><span class="co"># 2</span></span>
<span id="cb211-2"><a href="time-series-graphics.html#cb211-2" tabindex="-1"></a>usdeaths <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-88-3.png" width="672" /></p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="time-series-graphics.html#cb212-1" tabindex="-1"></a>usdeaths <span class="sc">|&gt;</span> <span class="fu">ggAcf</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-88-4.png" width="672" /></p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="time-series-graphics.html#cb213-1" tabindex="-1"></a><span class="co"># 3</span></span>
<span id="cb213-2"><a href="time-series-graphics.html#cb213-2" tabindex="-1"></a>AirPassengers <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-88-5.png" width="672" /></p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="time-series-graphics.html#cb214-1" tabindex="-1"></a>AirPassengers <span class="sc">|&gt;</span> <span class="fu">ggAcf</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-88-6.png" width="672" /></p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="time-series-graphics.html#cb215-1" tabindex="-1"></a><span class="co"># 4</span></span>
<span id="cb215-2"><a href="time-series-graphics.html#cb215-2" tabindex="-1"></a>lynx <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-88-7.png" width="672" /></p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="time-series-graphics.html#cb216-1" tabindex="-1"></a>lynx <span class="sc">|&gt;</span> <span class="fu">ggAcf</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-88-8.png" width="672" /></p>
<ol start="10" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="time-series-graphics.html#cb217-1" tabindex="-1"></a>aus_livestock</span></code></pre></div>
<pre><code>## # A tsibble: 29,364 x 4 [1M]
## # Key:       Animal, State [54]
##       Month Animal                     State                        Count
##       &lt;mth&gt; &lt;fct&gt;                      &lt;fct&gt;                        &lt;dbl&gt;
##  1 1976 Jul Bulls, bullocks and steers Australian Capital Territory  2300
##  2 1976 Aug Bulls, bullocks and steers Australian Capital Territory  2100
##  3 1976 Sep Bulls, bullocks and steers Australian Capital Territory  2100
##  4 1976 Oct Bulls, bullocks and steers Australian Capital Territory  1900
##  5 1976 Nov Bulls, bullocks and steers Australian Capital Territory  2100
##  6 1976 Dec Bulls, bullocks and steers Australian Capital Territory  1800
##  7 1977 Jan Bulls, bullocks and steers Australian Capital Territory  1800
##  8 1977 Feb Bulls, bullocks and steers Australian Capital Territory  1900
##  9 1977 Mar Bulls, bullocks and steers Australian Capital Territory  2700
## 10 1977 Apr Bulls, bullocks and steers Australian Capital Territory  2300
## # ℹ 29,354 more rows</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="time-series-graphics.html#cb219-1" tabindex="-1"></a>aus_livestock <span class="sc">|&gt;</span> <span class="fu">distinct</span>(State)</span></code></pre></div>
<pre><code>## # A tibble: 8 × 1
##   State                       
##   &lt;fct&gt;                       
## 1 Australian Capital Territory
## 2 New South Wales             
## 3 Northern Territory          
## 4 Queensland                  
## 5 South Australia             
## 6 Tasmania                    
## 7 Victoria                    
## 8 Western Australia</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="time-series-graphics.html#cb221-1" tabindex="-1"></a>pigs <span class="ot">&lt;-</span> aus_livestock <span class="sc">|&gt;</span></span>
<span id="cb221-2"><a href="time-series-graphics.html#cb221-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(Month) <span class="sc">%in%</span> <span class="dv">1990</span><span class="sc">:</span><span class="dv">1995</span>, State <span class="sc">==</span> <span class="st">&#39;Victoria&#39;</span>, Animal <span class="sc">==</span> <span class="st">&#39;Pigs&#39;</span>)</span>
<span id="cb221-3"><a href="time-series-graphics.html#cb221-3" tabindex="-1"></a></span>
<span id="cb221-4"><a href="time-series-graphics.html#cb221-4" tabindex="-1"></a>pigs <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<pre><code>## Plot variable not specified, automatically selected `.vars = Count`</code></pre>
<p><img src="figure_html/ch02-ts-plots-89-1.png" width="672" /></p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="time-series-graphics.html#cb223-1" tabindex="-1"></a>pigs <span class="sc">|&gt;</span> <span class="fu">ACF</span>(Count, <span class="at">lag_max =</span> <span class="dv">48</span>) <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-89-2.png" width="672" /></p>
<ol start="11" style="list-style-type: decimal">
<li></li>
</ol>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="time-series-graphics.html#cb224-1" tabindex="-1"></a>dgoog <span class="ot">&lt;-</span> gafa_stock <span class="sc">|&gt;</span></span>
<span id="cb224-2"><a href="time-series-graphics.html#cb224-2" tabindex="-1"></a>  <span class="fu">filter</span>(Symbol <span class="sc">==</span> <span class="st">&quot;GOOG&quot;</span>, <span class="fu">year</span>(Date) <span class="sc">&gt;=</span> <span class="dv">2018</span>) <span class="sc">|&gt;</span></span>
<span id="cb224-3"><a href="time-series-graphics.html#cb224-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">trading_day =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb224-4"><a href="time-series-graphics.html#cb224-4" tabindex="-1"></a>  <span class="fu">update_tsibble</span>(<span class="at">index =</span> trading_day, <span class="at">regular =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb224-5"><a href="time-series-graphics.html#cb224-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diff =</span> <span class="fu">difference</span>(Close))</span>
<span id="cb224-6"><a href="time-series-graphics.html#cb224-6" tabindex="-1"></a></span>
<span id="cb224-7"><a href="time-series-graphics.html#cb224-7" tabindex="-1"></a>dgoog <span class="sc">|&gt;</span> <span class="fu">autoplot</span>(Close)</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-90-1.png" width="672" /></p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="time-series-graphics.html#cb225-1" tabindex="-1"></a>dgoog <span class="sc">|&gt;</span> <span class="fu">ACF</span>(Close) <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-90-2.png" width="672" /></p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="time-series-graphics.html#cb226-1" tabindex="-1"></a>dgoog <span class="sc">|&gt;</span> <span class="fu">autoplot</span>(diff)</span></code></pre></div>
<pre><code>## Warning: Removed 1 row containing missing values or values outside the scale range (`geom_line()`).</code></pre>
<p><img src="figure_html/ch02-ts-plots-90-3.png" width="672" /></p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="time-series-graphics.html#cb228-1" tabindex="-1"></a>dgoog <span class="sc">|&gt;</span> <span class="fu">ACF</span>(diff) <span class="sc">|&gt;</span> <span class="fu">autoplot</span>()</span></code></pre></div>
<p><img src="figure_html/ch02-ts-plots-90-4.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-started.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="time-series-decomposition.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "fixed"
},
"info": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
